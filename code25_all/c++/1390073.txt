Panda
Panda
Bamboo
Panda
Bamboo
class Panda
{
    int a;
    int b;
    int _bambooCount;
    Bamboo* _bamboo;

    Panda (int count, Bamboo* bamboo)
    {
    _bambooCount = count;
    _bamboo = new Bamboo[count];

    // ... copy bamboo into the array ...
    }
}

Bamboo
Panda
Bamboo
class Panda
{
    int a;
    int b;

    Panda ()
    {
        // ... other initializations here ...
    }

    static Panda *createPanda (int count, Bamboo* bamboo)
    {
    byte* p = new byte[sizeof(Panda) +
        sizeof(Bamboo) * count];
    new (p) Panda ();

    Bamboo* bamboo = (Bamboo*)
        p + sizeof(Panda);

    // ... copy bamboo objects into the memory
        // behind the object...

        return (Panda*)p; 
    }
}

