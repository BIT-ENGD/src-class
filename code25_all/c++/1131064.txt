#include <boost/ptr_container/ptr_list.hpp>
class Base {
public:
    virtual void get_list(boost::ptr_list<AnotherObject>& list) const = 0;
};

Derived
class Derived : public Base { ... };

void Derived::get_list(boost::ptr_list<AnotherObject& list) const {
    list.push_back(new AnotherObject(1));
    list.push_back(new AnotherObject(2));
}

create
destroy
extern "C" {
    Base* create() { new Derived; }
    destroy(Base* p) { delete p; }
}

create
destroy
Derived
Base* obj = create();
boost::ptr_list<AnotherObject> list;
obj->get_list(list);

new
AnotherObject
delete
AnotherObject
