class A
{
  public:
    A();
    void foo();
};

map<int,A> m;
m[0].foo();

map<int,A> m;
m[0] = A();
m[0].foo();

map<int,A> m;
A a = m[5];

void foo(A & a);
map<int,A> m;
foo(m[5]);

