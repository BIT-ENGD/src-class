void SendToTheWorld(const Foo& f);

Foo
X PreprocessFoo(const Foo& f)
{
   if (something)
   {
      // create new object (very expensive).
      return Foo();
   }

   // return original object (cannot be copied)
   return f;
}

Foo foo;
SendToTheWorld(PreprocessFoo(foo));

X PreprocessFoo()
const Foo&
Foo
X
const Foo&
Foo
const Foo&
Foo PreprocessFoo(const Foo& f)
{
   // create new object (very expensive).
   return Foo();
}

Foo foo;

if (something)
{
   SendToTheWorld(PreprocessFoo(foo));
}
else
{
   SendToTheWorld(foo);
}

