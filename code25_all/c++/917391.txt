QPen
QPainter
std::pair<QColor, QString>
QSyntaxHighlighter
QTextDocument
QTextDocument
QTextDocument
QPainter
QTextDocument
QTextLayout
QPainter
painter.setPen(default_color);
QTextDocument doc;
doc.setDefaultFont(font());
doc.setDocumentMargin(0);
doc.setPlainText(text);
highlighter_->setDocument(&doc);

painter.save();
painter.translate(x, y);
QAbstractTextDocumentLayout::PaintContext context;
context.palette.setColor(QPalette::Text, painter.pen().color());
doc.draw(&painter, context);
painter.restore();

