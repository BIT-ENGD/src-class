bool __declspec(dllexport) InstallHook(){
    g_hHook      = SetWindowsHookEx(WH_CBT, (HOOKPROC) CBTProc, g_hInstance, 0);
    return g_hHook != NULL;
}

LRESULT CALLBACK CBTProc(int nCode, WPARAM wParam, LPARAM lParam){
    if (nCode < 0)
        return CallNextHookEx(g_hHook, nCode, wParam, lParam);
    /* Something should go here to do stuff when certain nCodes are recieved.*/
    return 0;
}

int _tmain(int argc, _TCHAR* argv[]){
    bool bbbb = InstallHook();
    Sleep(2000);
    return 0;
}

