#include <cstdarg>
#include <iostream>

using namespace std;

class a {
};

void fun1(a& aa, ...)
{
    va_list argp;
    va_start(argp, aa);
    char *p = 0;
    while ((p = va_arg(argp, char *)) != 0) {
        cout << p << endl;
    }
    va_end(argp);
}

void fun2(char *aa, ...)
{
    va_list argp;
    va_start(argp, aa);
    char *p = 0;
    while ((p = va_arg(argp, char *)) != 0) {
        cout << p << endl;
    }
    va_end(argp);
}

int main()
{
    cout << "fun2" << endl;
    fun2("a", "1", "2", (char *)0);
    cout << "fun1" << endl;
    fun1(a(), "1", "2", (char *)0);
    getchar();
}

fun2
1
2
fun1

fun2
1
2
fun1
1
2

