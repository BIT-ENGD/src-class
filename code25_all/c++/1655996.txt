template<multimap<string, double> arr>
void calculate(string key) {
}

multimap<string, double> arr;
vector<string> keys;
// ...
for_each(keys.begin(), keys.end(), calculate<arr>);

typedef multimap<string, double> my_map;

template<my_map arr>

