std::map<unsigned, CItem*> m_map;

void RegisterEvent(unsigned eventID) {
  std::map<unsigned, CItem*>::iterator it = m_map.find(eventID); <<< crashes
  if (it == m_map.end()) {
    m_map[eventID] = new CItem();
  }
  else {
    ...
  }
}

