template<class T, T* T::*nextptr>
class Queue
{
    T* head;
    T* tail;
    static T* T::*pnext;
};

template<class T, T* T::*nextptr> T* Queue<T, nextptr>::*pnext(nextptr);

