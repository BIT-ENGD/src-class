foo &operator=(foo other)
{
    swap(*this, other);
    return *this;
}

foo &operator=(const foo &other)
{
    foo copy(other);
    swap(*this, copy);
    return *this;
}

