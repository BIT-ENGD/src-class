set.insert (key)
if (set.insert( key )) {
    // some kind of code
}

conditional expression of type 'std::_Tree<_Traits>::iterator' is illegal

