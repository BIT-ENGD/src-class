A = now;
for (blah; blah; blah) {
    Blah();
    if (now - A > 30000)
         break;
}

