boost:shared_ptr
shared_ptr
this
shared_ptr
void bar(boost::shared_ptr<Foo> pFoo)
{
    ...
}

void Foo::someFunction()
{
    bar(this);
}

shared_ptr
bar(boost::shared_ptr<Foo>(this))
