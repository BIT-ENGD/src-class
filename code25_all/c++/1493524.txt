if (clientProtocolVersion == 1)
    // do something here
else if (clientProtocolVersion == 2)
    // do something else here
else if (clientProtocolVersion == 3)
    // do a third thing here...

if (clientProtoVersion == 5 || clientProtoVersion == 6)
IProtocol
    ^
    |
CProtoVersion1
    ^
    |
CProtoVersion2
    ^
    |
CProtoVersion3

IProtocol
CProtocolVersion4
ByteArray getFooMessage(string param1, int param2)
ByteArray getFooMessage(string param1, int param2, float param3)
