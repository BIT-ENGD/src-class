calculateNoOfStocksTraded ::String->Database.HDBC.Sqlite3.Connection->IO ()
calculateNoOfStocksTraded code conn=do                             
  res <- quickQuery' conn  "SELECT SUM(volume) FROM historicalData WHERE companyCode = ? " [toSql code]
  let conv=convertSqlValToInt res

  run conn "CREATE TRIGGER calStocks \
           \AFTER INSERT ON historicalData \
           \FOR EACH ROW \
           \BEGIN \
           \UPDATE company \
           \SET noOfStocks= ? ; \
           \END; " [toSql (conv::Integer)]

  commit conn

