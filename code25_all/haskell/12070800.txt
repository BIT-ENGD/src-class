extern C
{#pointer ... foreign #}
pure unsafe
[0..n]
LTIData lti_new_data(int n)
int lti_element_count(LTIData data)
int lti_get_element(LTIData data, int n)
n
LTIData
void lti_free_data(LTIData data)
p_1, p_2, ..., p_n
\sum_{i = 1..n} 1 + p_i
$ valgrind dist/build/TestHsLTI/TestHsLTI 100             2>&1 | grep -e allocs -e frees
==22647==   total heap usage: 184 allocs, 74 frees, 148,119 bytes allocated

$ valgrind dist/build/TestHsLTI/TestHsLTI 100 100         2>&1 | grep -e allocs -e frees
==22651==   total heap usage: 292 allocs, 80 frees, 181,799 bytes allocated

$ valgrind dist/build/TestHsLTI/TestHsLTI 100 100 100     2>&1 | grep -e allocs -e frees
==22655==   total heap usage: 400 allocs, 86 frees, 215,479 bytes allocated

$ valgrind dist/build/TestHsLTI/TestHsLTI 100 100 100 100 2>&1 | grep -e allocs -e frees
==22659==   total heap usage: 508 allocs, 92 frees, 249,159 bytes allocated

git clone https://github.com/weissi/c2hs-experiments.git && cd c2hs-experiments && cabal configure && cabal build && dist/build/TestHsLTI/TestHsLTI
Foreign.Ptr
Foreign.ForeignPtr
{#pointer ... foreign #}
.chs
void lti_free_data(LTIData data)
free()
