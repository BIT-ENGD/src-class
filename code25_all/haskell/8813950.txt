create :: AppHandler ()
create = method POST $ do
         lastName  <- decodeUtf8 . fromJust <$> getParam "lastName"
         firstName <- decodeUtf8 . fromJust <$> getParam "firstName"
         createPerson $ Person firstName lastName
         modifyResponse (setResponseCode 204)

Snap.Test
createOwnerReq :: RequestBuilder IO () 
createOwnerReq = postUrlEncoded "host/person/create" $
                 fromList [ ("firstName", ["Greg-Shaw"])
                          , ("lastName",  ["Snoy'Sullivan"])
                          ]

createOwnerReq
Snap.Test
 runHandler :: MonadIO a => RequestBuilder m () -> Snap a -> m Response

 ... do 
     resp <- runHandler createOwnerReq ??? 

AppHandler ()
runHandler
Snap a
AppHandler
Snap
