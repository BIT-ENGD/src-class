MVar
atomicIO :: MVar () -> IO a -> IO a
atomicIO mvar io =
  do
    takeMVar mvar
    result <- io
    putMVar mvar ()
    return result

IORef
IORef
MVar
    result <- io `par` io

    return result `par` result

    result `par` return result

IO ()
()
