HasRoles
Entity
class HasRoles a where
    -- Get all roles for a specific 'a'
    getRoles :: a -> IO [Role]

class Entity a where
    -- Update an entity with a new entity. Return the new entity.
    update :: a -> a -> IO a

instance Entity Book where
    update orig newV = insertVersion V >>= copyBookRoles orig

Entity
HasRoles
RequiresMoreWork a b
insertVersion
HasRoles w => RequiresMoreWork w Book
update
Book
RequiresMoreWork
workComplete :: RequiresMoreWork () Book -> Book
insertVersion
HasRoles
HasRoles
