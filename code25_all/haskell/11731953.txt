share [mkPersist sqlSettings, mkMigrate "migrateAll"] [persist|
mongoSettings
mongoSettings
MkPersistSettings { mpsBackend = ConT ''Action }
SqlPersist
MongoPersist
MongoPersist
instance YesodPersist PersistTest where
    type YesodPersistBackend PersistTest = SqlPersist
    runDB action = do
        PersistTest pool <- getYesod
        runSqlPool action pool

main :: IO ()
main = withSqliteConn ":memory:" $ runSqlConn $ do
    runMigration migrateAll
    johnId <- insert $ Person "John Doe" $ Just 35
    ... and so on

main :: IO()
main = withMongoDBConn ":memory:" $ runMongoDBConn $ do
    runMigration migrateAll 
    johnId <- insert $ Person "John Doe" $ Just 35
    ... and so on          

runMigration
Couldn't match expected type
m0 b0'
    Expected type: m0 t0 -> (t0 -> m0 b0) -> AccessMode
      Actual type: m0 t0 -> (t0 -> m0 b0) -> m0 b0
