-- nicHtmlField2 :: YesodNic master => Field sub master Html
nicHtmlField2 = Field
    { fieldParse = \e _ -> return . Right . fmap (preEscapedText . sanitizeBalance) . listToMaybe $ e
    , fieldView = \theId name attrs val _isReq -> do
        toWidget [shamlet|
$newline never
    <textarea id="#{theId}" *{attrs} name="#{name}" .html>#{showVal val}
|]
        -- addScript' urlNicEdit
        addScript $ StaticR js_nicEdit_js
        -- addScript $ StaticR img_nicEditorIcons_gif
        master <- lift getYesod
        toWidget $
          case jsLoader master of
            BottomOfHeadBlocking -> [julius|
bkLib.onDomLoaded(function(){new nicEditor({fullPanel:true}).panelInstance("#        {rawJS theId}")});
|]
            _ -> [julius|
(function(){new nicEditor({fullPanel:true}).panelInstance("#{rawJS theId}")})();
|]
    , fieldEnctype = UrlEncoded
    }
  where
    showVal = either id (pack . renderHtml)

Settings.StaticFiles 

/static StaticR Static getStatic 

 iconsPath : './nicEditorIcons.gif',

 iconsPath : 'http://localhost:3000/static/img/nicEditorIcons.gif?etag=gUsMv6k-',

 iconsPath : './static/img/nicEditorIcons.gif',
 // iconsPath : 'http://localhost:3000/static/img/nicEditorIcons.gif',
 // iconsPath : './nicEditorIcons.gif',

module Handler.Img_nicEditorIcons_gif where

import Import
getImg_nicEditorIcons_gif :: Handler RepHtml
getImg_nicEditorIcons_gif = do 
    defaultLayout $ do
        -- $(widgetFile "img_nicEditorIcons_gif")
        -- [whamlet|@{StaticR img_nicEditorIcons_gif}|]
        [whamlet|<img src=@{StaticR img_nicEditorIcons_gif}>|]

 GET /blog
 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
 11/Jan/2013:22:05:09 +0200 [Debug#SQL] "SELECT \"id\",\"title\",\"content\" FROM     \"article\" ORDER BY \"title\" DESC" [] @(persistent-   1.1.3.2:Database.Persist.GenericSql.Raw ./Database/Persist/GenericSql/Raw.hs:121:12)
 Status: 200 OK. /blog
 GET /nicEditorIcons.gif
 Accept: image/png,image/*;q=0.8,*/*;q=0.5
 Status: 200 OK. /nicEditorIcons.gif

 iconsPath : 'http://localhost:3000/static/img/nicEditorIcons.gif',

 getBlog3R :: Handler RepHtml
 getBlog3R = do
   defaultLayout $ do
     setTitle "Trial to find the icons"
     $(widgetFile "articles3")
     $(widgetFile "blog3")
     toWidget $ [julius|
 bkLib.onDomLoaded(function(){new nicEditor({fullPanel:true}).panelInstance("h3")});
 |]

 <h1> Articles3
 $if null articles
   -- Show a standard message if there is no article
   <p> There are no articles in the blog
 $else
   -- Show the list of articles
   <ul>
     $forall Entity articleId article <- articles
       <li> 
          <a href=@{ArticleR articleId} > #{articleTitle article}

 <hr>
   <form method="post" enctype="application/x-www-form-urlencoded">
     <input type="hidden" name="_token" value="8mFKLWnKcn">
     <div class="required ">
       <label for="h2">Title
       <input id="h2" name="f2" type="text" required value="">
     <div class="required ">
       <label for="h3">Content
       <textarea id="h3" name="f3">
     <div>
      <input type="submit" value="Post New Article">

