4.hs:58:10:
    Couldn't match expected type `() -> IO b0' with actual type `IO ()'
    In the return type of a call of `putStrLn'
    Probable cause: `putStrLn' is applied to too many arguments
    In the second argument of `bracket', namely `(putStrLn "done.")'
    In the expression:
      bracket
        (printf "Connecting to %s ... " server >> hFlush stdout)
        (putStrLn "done.")
        a

--
-- Connect to the server and return the initial bot state
-- 
connect :: IO bot
connect = notify $ do
    t <- getClockTime
    h <- connectTo server (PortNumber (fromIntegral port))
    hSetBuffering h NoBuffering
    return (Bot h t)
  where
    notify a = bracket
        (printf "Connecting to %s ... " server >> hFlush stdout)
        (putStrLn "done.")
        a

