parse csvFile "(stdin)" str

Right [["s","o"],["h","i"]]

main = mainLoop []

mainLoop :: [[String]] -> IO ()
mainLoop db = do
     answer <- getLine
     case words answer of
        ("load":x) -> do
                str <- readFile (head x)
                mainLoop $ parseCSV str
        ("quit":_) -> return ()
        ("help":_) -> do 
                        putStrLn "This is your help"
                        mainLoop db
        otherwise  -> putStrLn "Not sure what you want me to do! :(" >> mainLoop db

csvFile = endBy line eol
line = sepBy cell (char ',')
cell = many (noneOf ",\n")
eol = char '\n'

parseCSV :: String -> Either ParseError [[String]]
parseCSV input = parse csvFile "(unknown)" input

