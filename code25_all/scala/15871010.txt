def simpleStatusListener = new StatusListener() {
    def onStatus(status: Status) { 
      appendToFile("/tmp/stream.txt",status.getText) 
    }
    def onDeletionNotice(statusDeletionNotice: StatusDeletionNotice) {}
    def onTrackLimitationNotice(numberOfLimitedStatuses: Int) {}
    def onException(ex: Exception) { ex.printStackTrace }
    def onScrubGeo(arg0: Long, arg1: Long) {}
    def onStallWarning(warning: StallWarning) {}
    }

val twitter = new TwitterFactory().getInstance

twitterStream.addListener(simpleStatusListener)

val now = System.nanoTime
if((System.nanoTime-now)/1000000 > 10){
      twitterStream.cleanUp
      twitterStream.shutdown
    }

