def readPatch(name:String): Patch = {
    // split name at tilde, prefix gives type
    val List(typeCode, filename) = List.fromString(name,'~')

    val patchClass = typeCode match {
        case "cfp" => CreateFilePatch.getClass
        case "dfp" => DeleteFilePatch.getClass
        case "cp" => ChangePatch.getClass
    }

    val inStream = new ObjectInputStream(new FileInputStream(filename))

    inStream.readObject().asInstanceOf[patchClass]
}

