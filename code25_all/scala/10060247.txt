private[session] val dyn = new DynamicVariable[Session](null)

def forDataSource(ds: DataSource): Database = new Database {
  protected[session] def createConnection(): Connection = ds.getConnection
}

[session]
protected
