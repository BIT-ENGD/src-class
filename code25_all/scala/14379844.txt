<table>
  @items.zipWithIndex.map {
    case (item, index) =>
      @itemRow(item, index)
  }
</table>

@itemRow(index: Int, item: Item) = {
    <tr>
        <td>
        @(index+1)
        </td>
        <td>
        @item.name
        </td>
        <td>
            <input type="hidden" name="@requestForm("items")("[" + index + "]")("itemId").name" value="@item.id">
            <input type="text" name="items[@index].count" value="@requestForm("items")("[" + index + "]")("count").value">

        </td>
    </tr>
}

@items.groupBy(item => item.category).map {
  case (categoryId, itemsInCategory) =>
    <table>
      @itemsInCategory.zipWithIndex.map {
        case (item, index) =>
          @itemRow(item, index)
      }
    </table>
}

# category 1
items[0].id = 1
items[0].count = 1
items[1].id = 2
items[1].count = 2

# category 2
items[0].id = 3
items[0].count = 1
items[1].id = 4
items[1].count = 5

# category 1
items[0].id = 1
items[0].count = 1
items[1].id = 2
items[1].count = 2

# category 2
items[2].id = 3
items[2].count = 1
items[3].id = 4
items[3].count = 5

