import dispatch._
object Main extends App {

  val svc = url("http://www.php.net/license")
  val src:Promise[String] = Http(svc OK as.String) recover {
    case StatusCode(301) => "got the 301, now where the heck should I go?"
    case error => "caught error:" + error.toString
  }

  println(src())
}

case x of
  sc@StatusCode(301) -> getMessage(sc)
  error -> ...

