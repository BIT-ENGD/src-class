val superSuperSorts = superSorts.flatMap(relations.get(_)).flatMap(x=>x)

val superSorts: Set[Sort]
val relations: Map[Sort, Set[Sort]]

val superSuperSorts = 
  for(
  ss <- superSorts;
  sss <- relations.get(ss); //get Option[Set[Sort]] and flatten the option
  s <- sss                  //extract the elements from the Set
) yield s

error: type mismatch; 
found   : scala.collection.immutable.Set[edu.uulm.scbayes.logic.Sort] 
required: Option[?] 
s <- sss

