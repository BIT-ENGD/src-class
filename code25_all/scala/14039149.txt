imports ...

class MainActivity extends FragmentActivity {
  private lazy val timePicker = findViewById(R.id.timePicker).asInstanceOf[TimePicker]
  private lazy val spinner_sourceBank = findViewById(R.id.spinnerSource).asInstanceOf[Spinner]
  private lazy val spinner_targetBank = findViewById(R.id.spinnerDestination).asInstanceOf[Spinner]
  private lazy val myApplication = getApplication.asInstanceOf[MyApplication]
  private var ignoreTimeChange = false

  override protected def onCreate(savedInstanceState: Bundle) = {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)

    timePicker.setIs24HourView(true)
    initializeSpinner(spinner_sourceBank)
    initializeSpinner(spinner_targetBank)
  }

  private def initializeSpinner(spinner: Spinner) = {
    val adapter = ArrayAdapter.createFromResource(this, R.array.banks, R.layout.spinner_item)
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
    spinner.setAdapter(adapter)
  }

  def reset(w: View) = {
    timePicker.setCurrentHour(13)
    timePicker.setCurrentMinute(00)
    spinner_sourceBank.setSelection(0)
    spinner_targetBank.setSelection(0)
  }

  def submit(w: View) = {
    if (spinner_sourceBank.getSelectedItemPosition == 0 || spinner_targetBank.getSelectedItemPosition == 0) {
      new AlertDialog.Builder(this).setPositiveButton("OK", new OnClickListener {
        override def onClick(dialog: DialogInterface, which: Int) { dialog dismiss }
      }).setMessage(getString(R.string.alert_title)).setTitle("Alert Dialog").setIcon(android.R.drawable.ic_dialog_alert).create.show
    } else manageFragments(sourceBank, targetBank)
  }

  def manageFragments(sourceBank: String, targetBank: String) = {
    val fragmentTransaction = getSupportFragmentManager.beginTransaction

    if (targetBank == sourceBank) myApplication.setCurrentFragment(MyApplication.NOW)
    else myApplication.setCurrentFragment(MyApplication.FIRST_SESSION)

    fragmentTransaction.replace(R.id.fragment_container, myApplication.getCurrentFragment)
    fragmentTransaction.commit
  }

  override def onCreateOptionsMenu(menu: Menu): Boolean = { getMenuInflater.inflate(R.menu.activity_main, menu); true }
}

