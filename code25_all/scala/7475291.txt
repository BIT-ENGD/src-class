abstract class ApiClient(contentType: String) {
  val supportedContentTypes: List[String]
  if (!(supportedContentTypes contains contentType)) {
    throw new RuntimeException("Type " + contentType + " not supported")
  }
}

class FacebookClient(contentType: String) extends ApiClient(contentType) {
  override val supportedContentTypes = List("text/xml", "application/xml")
}

val api = new FacebookClient("text/xml") // Throws NullPointerException

abstract class ApiClient(contentType: String, supportedContentTypes: List[String]) {
  if (!(supportedContentTypes contains contentType)) {
    throw new RuntimeException("Type " + contentType + " not supported")
  }
}

class FacebookClient(contentType: String) extends ApiClient(
  contentType,
  List("text/xml", "application/xml")) {
}

val api = new FacebookClient("text/xml") // Runs!

