def acquire(key: A, producer: => Future[B]): Future[B]

future { getOrRefresh }
getOrRefresh
B
producer
outer.flatMap
Await
Await
Option[Try[B]]
ready
B
result
Failure
Await.ready
val fut   = producer
val prod  = Await.ready(fut, Duration.Inf).value.get
if (prod.isFailure) sync.synchronized { locked = false }
prod.get

Future[B]
B
