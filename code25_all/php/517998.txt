$iterator = new RecursiveIteratorIterator(
    new Node_List(array($root)),
    RecursiveIteratorIterator::SELF_FIRST);

$i = 0;     
foreach ($iterator as $node) {
    $node->left = ++$i;
    $node->right = ++$i;
}

Node 
    Node 
    Node 

Node (1, 2)
    Node (3, 4)
    Node (5, 6)

Node (1, 6)
    Node (2, 3)
    Node (4, 5)

