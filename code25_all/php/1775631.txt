class Model_DbTable_Users extends Zend_Db_Table_Abstract
{
    protected $_name = 'users';

    public function addUser($username, $password, $email)
    {
        $data = array( 'username' => $username,
                       'password'    => $password,
                       'email'    => $email);
        $this->insert($data);
    }

public function stage1Action()
{
    $form = new Form_RegisterForm;
    $this->view->form = $form;

    $request = $this->getRequest();
    #if the form is submitted
    if($request->isPost()){
        #validated automatically by the form-errors echoed if invalid
        if($form->isValid($this->_request->getPost())) {
            $username = $form->getValue('username');
            $password = $form->getValue('password');
            $email = $form->getValue('email');

            $users = new Model_DbTable_Users;
            $users->addUser($username, $password, $email);

            $this->_helper->redirector('stage2');
        }
    }
}

