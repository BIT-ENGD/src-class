Parse error: syntax error, unexpected T_ECHO in /home/labvc/public_html/AT/site/getimages.php on line 26

<?php

echo '<br />';
echo '<div id=gallery>';

function getDirTree($dir,$p=true) {
    $d = dir($dir);$x=array();
    while (false !== ($r = $d->read())) {
        if($r!="."&&$r!=".."&&(($p==false&&is_dir($dir.$r))||$p==true)) {
                $x[$r] = (is_dir($dir.$r)?array():(is_file($dir.$r)?true:false));
        }
    }

    foreach ($x as $key => $value) {
        if (is_dir($dir.$key."/")) {
                $x[$key] = getDirTree($dir.$key."/",$p);
        }
    }

    ksort($x);
    return $x;
}

$tree = getDirTree("./res/gallery/painting/");

foreach($tree as $element => $eval) {
    if (is_array($eval)) {
        foreach($eval as $file => $value) {
                if (strstr($file, "png")||strstr($file, "jpg")||strstr($file, "bmp")||strstr($file, "gif")) {
                        $item = $tree.'/'.$element.$file;
            $itemthumb = $tree.'/thumbs/'.$element.$file;
                        echo '<a href="'.$item.'"><img src="'.$itemthumb.'" alt="'.$file.'"/></a>';
                }
        }
    }
}

echo '</div>';


echo '<br />';

echo 'tree: '.$tree.'<br />';
echo 'element: '.$element.'<br />';
echo 'file: '.$file.'<br />';

$abc="res/gallery/painting";
$def="01.png";
echo'<a href="'.$abc.$def.'"><img src="'.$abc.'/thumbs/'.$def.'" alt="'.$def.'"/></a>';

echo '<br />';

foreach($tree as $element => $eval) {

