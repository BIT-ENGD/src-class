Record user entered

while (user is still connected) {
    fetch changes in state since last awake
    send changes to user

    sleep(5);
}

Record user exit

