public static final function getInstance() {
  if (is_null(self::$instance) {
    $fh = fopen($filename, 'ab+');
    if (flock($fh, LOCK_EX)) {
      $N = filesize($filename); 
      if ($N > 0) {
        rewind($fh);
        $s = stream_get_contents($fh);
        $obj = unserialize($s);
      } else {
        $obj = new MyClass();
      }
      self::$instance = $obj;
      return $obj;
    } else {
      fclose($fh);
      trigger_error("could not create lock", E_USER_WARNING);
    }
  } else {
    return self::$instance;
  }
}

