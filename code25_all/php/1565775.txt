function process($node, $replaceRules) {
    if($node->hasChildNodes()) {
       foreach ($node->childNodes as $childNode) {
         if ($childNode instanceof DOMText) {
           $text = preg_replace(
            array_keys($replaceRules),
            array_values($replaceRules),
            $childNode->wholeText
           );
           $node->replaceChild(new DOMText($text),$childNode);
          } else {
            process($childNode, $replaceRules);
          }
       }
    }
}

$replaceRules = array(
  '/\b(c|C)olor\b/' => '$1olour',
  '/\b(kilom|Kilom|M|m)eter/' => '$1etre',
);

$htmlString = "<p><span style='color:red'>The color of the sky is: gray</p>";
$doc = new DOMDocument();
$doc->loadHtml($htmlString);
process($doc, $replaceRules);
$string = $doc->saveHTML();
echo mb_substr($string,119,-15);

<div>The distance is four kilometers</div>

<div>The distance is four kilometers<br>1000 meters to a kilometer</div>

<div>The distance is four kilometers<div class="guide">1000 meters to a kilometer</div></div>

