<?php
    if(isset($_POST["zip"])) {
         // build a curl object, execute the request, 
         // and basically just echo what the curl request returns.
    }
?>

function widget_getActivities( zip ){
    jQuery("#widget_active_list").text("");
    jQuery.post("http://localhost/wordpress/wp-content/ActiveAjax.php", { zip: zip}, 
        function(text) {
            jQuery(text).find("asset").each(function(j, aval){
                var html = "";
                html += "<a href='" + jQuery(aval).find("trackback").text() + "' target='new'> " +  jQuery(aval).find("assetName").text() + "</a><b> at </b>";

                jQuery("location", aval).each(function(i, val){
                    html += jQuery("locationName", val).text() + " <b> on </b>";
                });

                jQuery("date", aval).each(function(){
                    html += jQuery("startDate", aval).text();
                <!--jQuery("#widget_active_list").append("<div id='ActivityEntry'>" + html + " </div>");-->
                jQuery("#widget_active_list")
                    .append(jQuery("<div>")
                        .addClass("widget_ActivityEntry")
                        .html(html)
                        .bind("mouseenter", function(){
                            jQuery(this).animate({ fontSize: "20px", lineHeight: "1.2em" }, 50);  
                        })
                        .bind("mouseleave", function(){
                            jQuery(this).animate({ fontSize: "10px", lineHeight: "1.2em" }, 50);  
                    })
                    );

                });
            });
        });
}

jQuery(document).ready(function(){
    w_zip = jQuery("#widget_zip").val();
    widget_getActivities( w_zip );
    jQuery("#widget_updateZipLink").click(function() { //start function when any update link is clicked
        widget_c_zip = jQuery("#widget_zip").val();
        if (undefined == widget_c_zip || widget_c_zip == "" || widget_c_zip.length != 5)
            jQuery("#widget_zipError").text("Bad zip code");
        else
            widget_getActivities( widget_c_zip );

    });
})

