$Pareto = mysql_query("SELECT
            zsca_open.tqs_batch_num AS 'Batch Number',
            ft_tests.test_name AS 'Test Name',
            (SUM(ft_stats.over_filter + ft_stats.under_filter)) AS 'Failures'
        FROM
            ((zsca_open INNER JOIN ft_header ON zsca_open.tqs_batch_num = ft_header.batch_code)
            INNER JOIN ft_tests ON ft_header.serial_hi = ft_tests.serial_hi) 
            INNER JOIN ft_stats ON ft_tests.serial_si = ft_stats.serial_si
        WHERE
            (((zsca_open.vendor)='ASE')
            AND ((zsca_open.lot_type)='T')
            AND ((zsca_open.status)='H')
            AND ((zsca_open.is_active)=1)
            AND ((zsca_open.rec_ver)=0)
            AND ((ft_header.test_step)='PROD')
            AND ((ft_header.status)='VIRGIN')
            AND ((ft_stats.stats_name)='spec_stats'))
        GROUP BY
            zsca_open.tqs_batch_num,
            ft_tests.test_name
        HAVING
             (((ft_tests.test_name) Not In ('SW Bin','HW Bin','Pass')))
        ORDER BY
            SUM(ft_stats.over_filter + ft_stats.under_filter) DESC") or die(mysql_error());

Batch Number TestName Failures <br>
0938AT5213   PCS_Pout 2865 <br>
0939AT5228 LB_PAE 921 <br>
0938AT5213 DCS_Pout 769 <br>
0939AT5228 LB_Pout_Nom 730 <br>
0939AT5228 LB_Pout 642 <br>
0938AT5213 DCS_PAE 517 <br>
0919AT3366 Iswitch 513 <br>
0938AT5213 PCS_PAE 481 <br>
0939AT5228 RX2_Insert_Loss 474 <br>
0939AT5228 HB_PAE 470 <br>
0939AT5228 HB_Pout 434 <br>
0939AT5228 HB_Pout_Nom 426 <br>
0919AT3366 ACLR1L_H1_846p6 399 

Batch Number test_name Failures <br>
0938AT5213 PCS_Pout 2865 <br>
0939AT5228 LB_PAE 921<br>
0919AT3366 Iswitch 513

