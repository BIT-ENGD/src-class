<?php
class Db {
    private $connection;

    private function open_connection() {
        if (file_exists('config.inc.php')) {
            require('config.inc.php');
        } else {
            require('../config.inc.php');
        }
        try
        {
            $this->connection = mysqli_connect($dbhost,$dbuser,$dbpass,$dbname);
        }
        catch (Exception $e)
        {
            throw $e;
        }
    }
    private function close_connection() {
        try
        {
            mysqli_close($this->connection);
        }
        catch (Exception $e)
        {
            throw $e;
        }
    }
    public function query($query) {
        try
        {
            $this->open_connection();
            $result = mysqli_query($this->connection,$query);
            return $result;
        }
        catch (Exception $e)
        {
            throw $e;
        }
        $this->close_connection();
    }
    public function fetchArray($query) {
        $row = mysqli_fetch_assoc($query);
        return $row;
    }
    public function count_rows($query) {
        $row = mysqli_num_rows($query);
        return $row;
    }
    public function rows_affected() {
        $row = mysqli_affected_rows($this->connection);
        return $row;
    }
    public function created_id() {
        $row = mysqli_insert_id($this->connection);
        return $row;
    }
}
?>

<?php
class Test_data {
    public function show_text() {
        $db = new Db();
        $sql = $db->query("SELECT * FROM test_table");
        $row = $db->fetchArray($sql);
        echo 'This is the output: '.$row['text'];
    }
}
?>

<?php
$dbname     = 'database_name';
$dbhost     = 'localhost';
$dbuser     = 'database_user';
$dbpass     = 'database_password';
?>

<?php
require_once('config.inc.php');
require_once('Mysqli_database.php');
$db = new Db();
$test_data = new Test_data();
?>

<?php
require_once('includes.php');
$test_data->show_text();
?>

