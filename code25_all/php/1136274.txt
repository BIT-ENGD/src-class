test1:[[link]] test2:[[gold|silver]] test3:[[out1[[inside]]out2]] test4:this|not

test1:link test2:silver test3:out1insideout2 test4:this|not

$text = preg_replace("/\\[\\[|\\]\\]/",'',$text); // remove [[ or ]]

$text = preg_replace("/\\[\\[(.*\|)(.*?)\\]\\]/",'$2',$text);

test1:silver test3:[[out1[[inside]]out2]] this|not

