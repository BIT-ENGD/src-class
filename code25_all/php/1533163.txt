<script src="resource.php?id=123&ext=.js">
<link href="resource.php?id=123&ext=.css" />
<?php
session_start();
//Do a ton of stuff
//Including adding several files to the resource object
//Add the resource links to the head
$smarty->append('headSection','<link href="resource.php?id=<?=$resourceID?>&type=.js" />');
</head>
//Save the resource file which:
// - Outputs the file
// - Saves a reference to it in session
$_SESSION[$resourceID] = $file;
//Let Smarty display
$smarty->display($templateFile);
?>

<?php
readfile($_SESSION[$_GET['id']] . $_GET['type']);
?>

