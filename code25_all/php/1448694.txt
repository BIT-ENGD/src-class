  public function startAction() {
    require_once 'Train.php';
    $trainModel = new Train();

    $config = Zend_Registry::get('config');

    require_once 'Zend/Session/Namespace.php';
    $userNamespace = new Zend_Session_Namespace('User');
    $trainData = $trainModel->getTrain($userNamespace->gamePlayerId);

    switch($trainData['type']) {
      case 'STANDARD':
      default:
        $unitMovement = $config->train->standard->unit_movement;
        break;
      case 'FAST FREIGHT':
        $unitMovement = $config->train->fast_freight->unit_movement;
        break;
      case 'SUPER FREIGHT':
        $unitMovement = $config->train->superfreight->unit_movement;
        break;
      case 'HEAVY FREIGHT':
        $unitMovement = $config->train->heavy_freight->unit_movement;
        break;
    }
    $trainRow = array('track_units_remaining' => $unitMovement);
    $where = $trainModel->getAdapter()->quoteInto('id = ?', $trainData['id']);
    $trainModel->update($trainRow, $where);
    $this->_redirect($config->url->absolute->fb->canvas . '/turn/move-trains-auto');
  }
.
.
.
  public function moveTrainsAutoAction() {
$log = Zend_Registry::get('log');
$log->debug('moveTrainsAutoAction');
    require_once 'Train.php';
    $trainModel = new Train();

    $userNamespace = new Zend_Session_Namespace('User');
    $gameNamespace = new Zend_Session_Namespace('Game');

    $trainData = $trainModel->getTrain($userNamespace->gamePlayerId);

    $trainRow = $this->_helper->moveTrain($trainData['dest_city_id']);
    if(count($trainRow) > 0) {
      if($trainRow['status'] == 'ARRIVED') {
        // Pass id for last city user selected so we can return user to previous map scroll postion
        $this->_redirect($config->url->absolute->fb->canvas . '/turn/unload-cargo?city_id='.$gameNamespace->endTrackCity);
      } else if($trainRow['track_units_remaining'] > 0) {
        $this->_redirect($config->url->absolute->fb->canvas . '/turn/move-trains-auto');
      } else { /* Turn has ended */
        $this->_redirect($config->url->absolute->fb->canvas . '/turn/end');
      }
    }
    $this->_redirect($config->url->absolute->fb->canvas . '/turn/move-trains-auto-error'); //-set-destination-error');
  }

