<?PHP
date_default_timezone_set($_SESSION['time_zone']);
?>

<?PHP
// the time zone array would be here

echo '<select name="time_zone_list" id="time_zone_list"/>';
$_SESSION['time_zone'] = (isset($_SESSION['time_zone'])) ? $_SESSION['time_zone'] : '';

// the current time is already changed from me setting the pages timezone above, so the already changed time is getting changed again    
$current_date = date("h:i:s A");

foreach ($time_zone_array as $tz_id => $tz_name) {
    $selected = "";
    if ($tz_id == $_SESSION['time_zone']) $selected = ' selected="selected"';
    //build time to show user in dropdown

    $dt_obj = new DateTime($current_date." UTC");
    $dt_obj->setTimezone(new DateTimeZone($tz_id));
    print '<option value=' . $tz_id . $selected . '> ' .date_format($dt_obj, 'h:i:s A'). ' ' . $tz_name . '</option>';
}
echo '</select>';
?>

