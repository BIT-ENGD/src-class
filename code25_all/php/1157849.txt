<?php

// dbinterface.php

class db {
    private $con;
    private $host;
    private $user;
    private $pass;
    private $database;
    private $error;

    function db($host, $user, $pass, $database) {
        $this->con = mysql_connect($host, $user, $pass);
        mysql_select_db($database);
    }

    function escape($text) {
        return mysql_real_escape_string($text);
    }

    function run($query) {
        $q = mysql_query($query);
        if ($q === false) {
            $this->error = "Error " . mysql_errno() . ": " . mysql_error($this->con);
            return false;
        } elseif ($q === true) {
            return true;
        } else {
            $result = array();
            while ($row = mysql_fetch_assoc($q)) {
                array_push($result, $row);
            }
            return $result;
        }
    }

    function get_error() {
        return $this->error;
    }

    function cose() {
        mysql_close($this->con);
    }
}


?>

