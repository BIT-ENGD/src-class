array(7) {
  [0]=> "hello,pat1"
  [1]=> "hello,pat1"
  [2]=> "test,pat2"
  [3]=> "test,pat2"
  [4]=> "foo,pat3"
  [5]=> "foo,pat3"
  [6]=> "foo,pat3"
  ....
}

array(7) {
  [0]=> "hello,pat1"
  [1]=> "test,pat2"
  [2]=> "foo,pat3"
  [3]=> "foo,pat3"
  [4]=> "foo,pat3"
  [5]=> "hello,pat1"
  [6]=> "test,pat2"
  .....
}

while ( !empty( $array1 ) )
  $a = explode(",",$array1[$i]);
  if($a[1]=='pat1' &&)
     push && unset
  elseif($a[1]=='pat2' &&)
     push && unset
  elseif($a[1]=='pat3' and < 5)
     push && unset and reset pattern counter
}

