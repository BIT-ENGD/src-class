$current = $result->section;                        
// if there's a category ID -- use it
if ($current != null) echo $result->sectionid;
    else
    // if this is the first IDless category -- initialize. this happens once.
    if ($virginity == true) {
        $store = $current;
        $virginity = false;                             
        }
// if initialized and current category string is the same as stored category string -- print it
if (($virginity == 0) && ($store = $current)) {
    echo $defaultID;
    }
// if initialized and current category string is different from the stored category string -- set new default category +1 and print it
if (($virginity == false) && ($store != $current)) {
    $defaultID = $defaultID++;
    echo $defaultID;
    $store = $current;
    }

