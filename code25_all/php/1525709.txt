function GetCategoryList(){
    $push .= "<form action=\"main.php\" method=POST>";
    $push .= "<select name=cat>";
    $result = mysql_query("SELECT * FROM `cats`") or trigger_error(mysql_error()); 
    while($row = mysql_fetch_array($result)){ 
        foreach($row AS $key => $value) { $row[$key] = stripslashes($value); } 
            $id = $row['id'];
            $cat = $row['cat'];
            $push .= "<option value=$id>$cat</option>";
    }
    $push .= "</select>";
    $push .= "<input type=submit name=button id=button value=\"Set Category\"></form>";
    return $push;
}

function GetSubCategoryList($cat){
    $push .= "<form action=\"main.php\" method=POST>";
    $push .= "<select name=subcat>";
    $result = mysql_query("SELECT * FROM `subcats` WHERE cat = '$cat'") or trigger_error(mysql_error()); 
    while($row = mysql_fetch_array($result)){ 
        foreach($row AS $key => $value) { $row[$key] = stripslashes($value); } 
            $id = $row['id'];
            $subcat = $row['subcat'];
            $cat = $row['cat'];
            $push .= "<option value=$id>$subcat</option>";

    }
    $push .= "</select>";
    $push .= "<input type=hidden name=cat value=$cat>";
    $push .= "<input type=submit name=button id=button value=\"Set Sub-Category\"></form>";
    return $push;
}

  Category
<? echo GetCategoryList(); ?>
  <br />

  SubCategory
<? if(isset($_POST['cat'])){ echo GetSubCategoryList($_POST['cat']); } else { echo "<em>select a category</em>"; } ?>
<br />

