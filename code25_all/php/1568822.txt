  //While there are more records:

  while ($row = mysql_fetch_assoc($result)) {

     //If this key doeesn't already exist in the return array, 
     //add this key/value pair.

     //Proper logic for determining whether or not a cell has already been 
     //created for this record would go here...

     $ret[$row['output_row_id']][$row['output_name']] = $row['output_value'];    
  }

