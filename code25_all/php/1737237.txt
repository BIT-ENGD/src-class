<xsl:variable name="a">
   <xsl:choose>
      <xsl:when test="$someboolean">
         <xsl:value-of select="0.5"/>
      </xsl:when>
      <xsl:otherwise>
         <xsl:value-of select="0"/>
      </xsl:otherwise>
   </xsl:choose>
</xsl:variable>
<xsl:value-of select="$a + 2"/>

<xsl:value-of select="$a"/>

<xsl:variable name="a"><xsl:value-of select="0.5"/></xsl:variable>
<xsl:value-of select="$a"/> <!-- gives 0,5 --> 
<xsl:value-of select="$a + 2"/> <!-- gives NaN --> 
<xsl:variable name="b" select="0.5"/> 
<xsl:value-of select="$b"/> <!-- gives 0,5 --> 
<xsl:value-of select="$b + 2"/> <!-- gives 2,5 -->

<?php
printf("%.1f",0.5);  // gives 0.5
setlocale (LC_ALL, 'de_DE.utf8', 'de_DE@euro', 'de_DE', 'deu_deu', 'deu', 'de', 'ge');
printf("%.1f",0.5);  // gives 0,5

$xml = new DOMDocument;
$xml->loadXML('<a>a</a>');

$xsl = new DOMDocument;
$xsl->substituteEntities = TRUE;
$xsl->loadXML('
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:template match="/">
            <xsl:variable name="a"><xsl:value-of select="0.5"/></xsl:variable>
            <xsl:value-of select="$a"/>      <!-- gives 0,5 -->
            <xsl:value-of select="$a + 2"/>  <!-- gives NaN -->

            <xsl:variable name="b" select="0.5"/>
            <xsl:value-of select="$b"/>      <!-- gives 0,5 -->
            <xsl:value-of select="$b + 2"/>  <!-- gives 2,5 -->
        </xsl:template>
    </xsl:stylesheet>');

$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl);

echo $proc->transformToXML($xml);

?>

