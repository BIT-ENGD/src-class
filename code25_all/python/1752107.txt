data = StringIO("\x07\x00\x00\x00foobar\x00\x04\x00\x00\x00baz\x00")

len_name = data.read(4)

while len_name != "":
    len_name = struct.unpack("<I", len_name)[0]
    names.append(data.read(len_name))

    len_name = data.read(4)

read(4)
while
