readline
read_history_file
write_history_file
set_startup_hook
def command_history_hook():
    import readline
    readline.read_history_file('.python_history')
command_history_hook()

def ex():
    import readline
    readline.write_history_file('.python_history')
    exit()

ex()
ex
ex
def random_key()
    ''.join([choice(string.uppercase + string.digits) for i in range(16)])

def command_history_hook():
    import readline
    key = get_env_variable('command_history_key')
    if key:
        readline.read_history_file('.python_history_{0}'.format(key))
    else:
        set_env_variable('command_history_key', random_key())

def ex():
    import readline
    key = get_env_variable('command_history_key')
    if not key:
        set_env_variable('command_history_key', random_key())
    readline.write_history_file('.python_history_{0}'.format(key))
    exit()

