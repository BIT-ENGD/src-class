class SolutionFile(models.Model):
    '''
    A file from a solution.
    '''
    solution = models.ForeignKey(Solution)
    file = models.FileField(upload_to=make_solution_file_path)

./manage.py dumpdata
def test_post_solution_file(self):
    import tempfile
    import os
    filename = tempfile.mkstemp()[1]
    f = open(filename, 'w')
    f.write('These are the file contents')
    f.close()
    f = open(filename, 'r')
    post_data = {'file': f}
    response = self.client.post(self.solution.get_absolute_url()+'add_solution_file/', post_data,
                                follow=True)
    f.close()
    os.remove(filename)
    self.assertTemplateUsed(response, 'tests/solution_detail.html')
    self.assertContains(response, os.path.basename(filename))

tearDown()
settings.py
