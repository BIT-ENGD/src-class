content_type=text/csv
{id}.csv
/app/PROD/serialize
PROD.csv
map.connect('/app/{id}/serialize',controller = 'csvproducer',action='serialize')

map.connect('/app/{id}/serialize',controller = 'csvproducer',action='serialize')
map.connect('/app/csv/{foo}',controller = 'csvproducer', action='tocsv')

def serialize(self,id):
  try:
    session['key'] = self.service.serialize(id) #produces csv content
    session.save()
    redirect_to(str("/app/csv/%s.csv" % id))
  except Exception,e:
    log.error(e)
    abort(503)

def tocsv(self):
  try:
    csv = session.pop("rfa.enviornment.serialize")
  except Exception,e:
    log.error(e)
    abort(503)
  if csv:
    response.content_type='text/csv'
    response.status_int=200
    response.write(csv)
  else:
    abort(404)

location
content-disposition: attachment; filename='XXX.csv'
content-disposition
