UnboundLocalError: local variable 'total' referenced before assignment

