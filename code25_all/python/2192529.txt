zlib
input
output_function
with open("file") as input:
    output_function(input)

input
output_function
with open("file") as input:
    output_function(gzip_stream(input))

zlib.Compress.compress
zlib.Compress.flush
Compress
zlib.compressobj()
output_function(StringIO(zlib.compress(input.read())))
