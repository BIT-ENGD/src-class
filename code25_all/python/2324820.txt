with warnings.catch_warnings(record=True) as warn:
    ...
    self.assertEquals(len(warn), 2)

with
action='error'
try
catch
