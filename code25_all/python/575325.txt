import signal, sys, time, cProfile, pstats

call = 0

def sigint_handler(signal, frame):
global call
if call < 2:
    profiler.dump_stats("profile.prof")
    stats = pstats.Stats("profile.prof")
    stats.strip_dirs().sort_stats('cumulative').print_stats()
    call += 1
else:
    sys.exit()
def wait():
time.sleep(1)

def main_io_loop():
signal.signal(signal.SIGINT, sigint_handler)
while 1:
    wait()

profiler = cProfile.Profile()
profiler.runctx("main_io_loop()", globals(), locals())

