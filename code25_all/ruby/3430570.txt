ana.rb

class PerfAnalyser
  def self.options(args)
    ...
    PerfAnalyser.new(options).analyze
  end
  def analyse
    # Do base analysis here
  end
end
if __FILE__ == $0
  pa= PerfAnalyzer.options(ARGV)
  pa.print_out
end

overview.rb

def overview(args)
  pa = PerfAnalyzer.options(args)
  pa.overview
end
class PerfAnalyzer
  def overview
    ...
  end
end
if __FILE__ == $0
  overview(ARGV)
end

ruby ana.rb -f log.log -d dump.dmp
ruby overview.rb -f log.log -d dump.dmp
overview.rb
ana.rb
ruby overview.rb -f log.log -f tree
