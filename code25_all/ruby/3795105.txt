...
class User
  include DataMapper::Resource

  property :id, Serial, :key => true
  property :nickname, String

  has n, :contacts
  has n, :messages
end

class Contact
  include DataMapper::Resource

  belongs_to :user

  property :id, Serial, :key => true
  property :authgiven, String

  has 1, :user     
end

class Message
  include DataMapper::Resource

  belongs_to :user

  property :id, Serial, :key => true
  property :data, String
end

#apply models (validation etc.)
DataMapper.finalize
...

