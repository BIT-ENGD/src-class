class User < ActiveRecord::Base
  acts_as_authentic

  has_many :questions, :dependent => :destroy
  has_many :sites , :dependent => :destroy
end

class Question < ActiveRecord::Base
  has_many :sites, :dependent => :destroy
  has_many :notes, :through => :sites
  belongs_to :user
end

class Site < ActiveRecord::Base
  acts_as_voteable :vote_counter => true

  belongs_to :question
  belongs_to :user
  has_many :notes, :dependent => :destroy
  has_many :likes, :dependent => :destroy

  has_attached_file :photo, :styles => { :small => "250x250>" }

  validates_presence_of :name, :description

end

 def create
       @question = Question.find(params[:question_id])
       @site = @question.sites.create!(params[:site])

       respond_to do |format|
           format.html { redirect_to(@question) }
           format.js
         end
       end

