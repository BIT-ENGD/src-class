%li.sidebar-section
  %span#mailing-list-slug
    get on our mailing list
    <br/>
  %form{:id => "mailing_list_signup", :method => "post", :action => "/mailinglist/signup/the.grapevine"}
    %input{:type => 'text', :name => 'email', :value => "enter your email&hellip;", :id => 'mailing-list-signup'}
    %input{:id => "mailing_list_signup_button", :type => 'submit', :value => 'sign up'}
    #thanks
      thanks!  you're in!

  $.ajax({  
    type: "POST",  
    url: "/mailinglist/signup/the.grapevine",
    data: "email=" + email_address,
    success: function() {
      $('#thanks').show('slow');
    }
  });

  var email_address = $('input#email').val();

  $.post("/mailinglist/signup/the.grapevine", 
    $('form#mailing_list_signup').serialize(), function(result){alert(email_address);});
    return false; });
  });

post '/mailinglist/signup/:list' do
  adminuser = "ADMINUSERNAME"
  password  = "PASSWORD"
  email = params[:email]
  mailing_list = params[:list]
  myapps = ProvisioningApi.new(adminuser,password)
  myapps.add_member_to_group(email, mailing_list)
  gmail(:to => 'MYEMAIL', :subject => "HEY HEY GUESS WHAT, #{params[:email]} JUST SIGNED UP FOR #{params[:list]}!", :body => "Totally not joking--")
end

