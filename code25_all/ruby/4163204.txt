 h = { i1: { q1: 1, q2:2 }, i2: { q1: 3, q2: 4} }

{ q1: { i1: 1, i2: 3 }, q2: { i1: 2, i2: 4 } }

 ht = Hash.new{ |h,k| h[k] = {} }

 h.each_pair do |k,ih| 
   ih.each_pair{ |ik, iv| ht[ik][k] = iv }
 end

