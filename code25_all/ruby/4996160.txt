class Project < ActiveRecord::Base
  has_many :project_members
  has_many :members, :through => :project_members, :uniq => true,:class_name => "User",  :source => :user
  has_many :admins, :through => :project_members, :uniq => true, :conditions => ['project_members.admin = ?', true], :class_name => "User", :source => :user

end

class User < ActiveRecord::Base
  # References
  has_many :project_members
  has_many :projects, :through => :project_members

end

class ProjectMember < ActiveRecord::Base
    belongs_to :project
    belongs_to :user
end

project.admins.push(u)
project.save

project.project_members.first.admin = true

