require 'delegate'
require 'tmpdir'

class TmpFile < DelegateClass(File)
  def initialize(basename, tmpdir=Dir.tmpdir)
    @tmpfile = File.new("#{tmpdir}/#{basename}.tmp", File::RDWR|File::CREAT|File::EXCL, 0600)
    super(@tmpname)
  end
end

artem:~/projects/weatherdiff (master)$ irb
irb(main):001:0> require 'test.rb'
=> true
irb(main):002:0> t = TmpFile.new 'ttttt'
=> nil

