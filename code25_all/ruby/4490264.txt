def javascript(print_tag = false, &block)
  content_for(:javascript) do
    if print_tag
      javascript_tag(&block)          # does not work
      javascript_tag { block.call }   # does work 
    else
      capture(&block)
    end
  end
end

javascript { "alert('hurray'); }
<script type="text/javascript"> //<![CDATA[  //]]> </script>
