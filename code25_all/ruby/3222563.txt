require 'Qt4'

class PictureCommentForm < Qt::Widget
  def initialize(parent = nil)
    super()
    #setFixedSize(300, 100)

    @comment_text = nil

    picture = Qt::Label.new()
    image = Qt::Image.new('image.jpeg')
    picture.pixmap = image

    comment = Qt::LineEdit.new()

    layout = Qt::VBoxLayout.new()
    layout.addWidget(picture)
    layout.addWidget(comment)
    setLayout(layout)

    connect(comment, SIGNAL('returnPressed()'), self, setCommentText(comment.text) )
  end

  def setCommentText(text)
    @comment_text = text
    $qApp.quit()
  end
end

app = Qt::Application.new(ARGV)
comment_form = PictureCommentForm.new()
comment_form.show()

app.exec

comment_text = comment_form.comment_text
puts "Comment was:\n #{comment_text}"

