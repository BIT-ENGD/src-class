@obj.should_receive(:open).with("some_url").and_raise(SocketError)

begin
  resp = open(url)
  resp = resp.read
rescue SocketError
  something = true
end

nil.read
open()
timeout() {}
