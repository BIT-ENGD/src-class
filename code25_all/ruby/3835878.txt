%Q{
  def #{name}
   #{
   (name != "password") ? "attributes[:#{name}]" : 
                         "encrypt(attributes[:#{name}])"
   }
  end
}

define_method(name) do       
 if name == password
   decrypt(attributes[name])     
 else
   attributes[name]
 end
end

if (name == "password")
 define_method(name) do       
   decrypt(attributes[name])     
 end
else
 define_method(name) do       
   attributes[name]
 end
end

