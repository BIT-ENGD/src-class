net/http.rb#set_form_data
require 'net/http'
require 'uri'

module Net
  module HTTPHeader
    def set_form_data(params, sep = '&')
      params_array = params.map do |k,v|
        v.inject([]){|c, val| c << "#{urlencode(k.to_s)}=#{urlencode(val.to_s)}"}.join(sep)
      end
      self.body = params_array.join(sep)
      self.content_type = 'application/x-www-form-urlencoded'
    end
  end
end

res = Net::HTTP.post_form(URI.parse(URL),
                 {'type'=>'flowers',
                  'colors[]' => %w[red white blue] })

set_form_data
