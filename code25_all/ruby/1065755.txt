class String
  def foo
    def self.upcase
      self
    end
    self
  end
end

puts "bar".upcase #=> "BAR"
puts "bar".foo.upcase #=> "bar"

puts ({"bar".foo => "code"}).keys.first.upcase #=> "BAR", not "bar"!

