application_servers = nil

task :production do
   role :nfs, "nfs.someserver.net"
   application_servers = "app.someserver.net"
end

task :staging do
  role :nfs, "nfs-staging.someserver.net"
  application_servers = "app-staging.someserver.net"
end

desc "tail resin logs #{resin_logs}"
task :tail, :hosts => application_servers do
  puts("Server is:"#{application_servers})
  stream "tail -f #{resin_logs}"
end

#$ cap staging tail
  * executing `staging'
  * executing `tail'
  Server is:app-staging.someserver.net
  * executing "tail -f /log/resin/*.log"
    servers: ["nfs-staging.someserver.net"]
    [nfs-staging.someserver.net] executing command
tail: cannot open `/log/resin/*.log' for reading: No such file or directory
tail: no files remaining
    command finished
failed: "sh -c 'tail -f /log/resin/*.log'" on nfs-staging.someserver.net

