class Membership < ActiveRecord::Base

  define_index do
   indexes :title
   indexes user.first_name, :as => :first_name
   indexes user.last_name, :as => :last_name

   has :organization_id, :active
   set_property :delta => true
 end

 # begin
 sphinx_scope(:by_organization) do |org|
   {:with => {:organization_id => org.id, :active => true}}
 end

 sphinx_scope(:sort_by_name) do 
   {:order => 'last_name, first_name'}
 end

end

search_results = Membership.by_organization(Organization.current).sort_by_name.search((search_value || ""), :page => (page || 1), :per_page => 10)

