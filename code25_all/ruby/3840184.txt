class Parent < ActiveRecord::Base
  has_many :children

  # with attributes min_length, max_length
end

class Child < ActiveRecord::Base
  belongs_to :parent

  # with an attribute reference
end

validate :reference_length

def reference_length
  options = { :within => parent.min_length..parent.max_length }
  self.class.validates_length_of :reference, options
end

errors.add(:reference, message) if...
