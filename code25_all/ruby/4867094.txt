page.should have_selector('foo.bar > baz')  # added dynamically by JS
visit current_page
page.should have_selector('foo.bar > baz')  # still there after reload

persist
def persist
  yield
  visit current_page
  yield
end

2.times { |i|
    page.should have_selector('foo.bar > baz')
    visit current_page if i == 0
}

persist
persist
@__memoized = {}
visit current_page
ObsoleteElementError
