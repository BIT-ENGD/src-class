require 'spec_helper'

describe PagesController do
  render_views

  pages = ['home', 'contact', 'about', 'help']

  before(:each) do
    @base_title = "Ruby on Rails Tutorial Sample App | "
  end

  pages.each do |page|
    describe "GET '#{page}'" do
      it "should be successful" do
        get "#{page}"
        response.should be_success
      end

      it "should have the right title" do
        get "#{page}"
        response.should have_selector("title", :content => @base_title + page.capitalize)
      end
    end
  end

end

@pages = ['home', 'contact', 'about', 'help']

pages = ['home', 'contact', 'about', 'help']
@base_title = "Ruby on Rails Tutorial Sample App | "

before(:each) do
  pages = ['home', 'contact', 'about', 'help']
  @base_title = "Ruby on Rails Tutorial Sample App | "
end

Failure/Error: response.should have_selector("title", :content => @base_title + page.capitalize)
NoMethodError:
   You have a nil object when you didn't expect it!
   You might have expected an instance of Array.
   The error occurred while evaluating nil.+
 # ./spec/controllers/pages_controller_spec.rb:21:in `block (4 levels) in <top (required)>'

