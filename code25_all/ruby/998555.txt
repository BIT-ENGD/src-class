class Newsletter < ActiveRecord::Base
  before_validation :clean_up_whitespace
end


def clean_up_whitespace 

fields_to_strip = ['title','notes']
 fields_to_strip.each { |f|
   unless self.attributes[f].nil?
      self.attributes[f].strip!
   end
 }
end

require 'iconv'

class Newsletter < ActiveRecord::Base
  before_validation :clean_up_unicode
end

def clean_up_unicode

unless title.blank?
    self.title = Iconv.iconv('ascii//ignore//translit', 'utf-8', self.title).to_s
  end

  unless notes.blank?
    self.notes = Iconv.iconv('ascii//ignore//translit', 'utf-8', self.notes).to_s
  end
end

require 'iconv'

class Newsletter < ActiveRecord::Base
  before_validation :clean_up_unicode
end

def clean_up_unicode 

unicode_fields_to_clean = ['title','notes']
   unicode_fields_to_clean.each { |u|
    unless self.attributes[u].blank?
       self.attributes[u] = Iconv.iconv('ascii//ignore//translit', 'utf-8', attributes[u]).to_s
   end
 }
end

