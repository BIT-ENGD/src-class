module ActiveRecord
   class Base
      def self.included(base)
         base.class.send(:define_method, :my_macro) do |args|
            # instance_variable_set for the model instance that has called this 
            # macro using args
         end
      end
   end
end

class MyModel < ActiveRecord::Base
   my_macro(*args)
   def after_initialize
      # use the value set in the macro as @instance variable
   end
end

