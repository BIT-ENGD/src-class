atom_feed(:schema_date => @favourites.first.created_at) do |feed|
  feed.title("Favourites for #{@user.login}")

  feed.updated(@favourites.first.created_at)

  @favourites.each do |favourite|
    feed.entry(favourite, :url => favourite.asset.external_ref) do |entry|
      entry.title(favourite.asset.external_ref)
      entry.content(image_tag(favourite.asset.location), :type => 'html')
      entry.author do |author|
        author.name(@user.login)
      end
    end
  end
end

  map.namespace :public do |pub|
    pub.resources :users, :has_many => [ :favourites ]
    pub.resources :favourites
    pub.resources :assets, :only => [ :show ]
  end

feed.entry(favourite, :url => favourite.asset.external_ref) do |entry|

feed.entry([:public, favourite], :url => favourite.asset.external_ref) do |entry|

map.resource :favourites

