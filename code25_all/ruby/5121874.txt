def interleave(y)
  z = 0
  bl = self > 0 ? Math.log2(self) : 1
  ybl = y > 0 ? Math.log2(y) : 1
  ((((bl <=> ybl) == -1) ? ybl : bl).floor + 1).times{|i| z |= (self & 1 << i) << i | (y & 1 << i) << (i + 1)}
  return z
end

x = y = 0b11111111_11111111_11111111_11111111
Benchmark.bm{|bm| bm.report{1000000.times{x.interleave(y)}}}

     user     system      total        real
18.360000   0.010000  18.370000 ( 18.356196)

