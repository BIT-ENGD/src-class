def self.find_record(login)
  where(attributes).where(["username = :value OR email = :value", { :value => login }]).first
end

NameError (undefined local variable or method `attributes' for #<Class:0xa70e1a8>):

app/models/user.rb:63:in `find_record'
app/models/user.rb:44:in `find_recoverable_or_initialize_with_errors'
app/models/user.rb:30:in `send_reset_password_instructions'

