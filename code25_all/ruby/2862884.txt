  def dates_week(d, delim)
      "<tr>" + (d.beginning_of_week...(d.beginning_of_week+5)).map do |day|
      "<#{delim}> #{yield(day)} </#{delim}>"
    end.join + "</tr>"

  end

  def sent_emails_by_date(date)
    ContactEmail.find(:all, :conditions => "date_sent = '#{date}'"
    " ).count
  end

<table class='reports'>
    <%= dates_week(Date.today, "th") {|d| d.strftime("%A")} %>
    <%= dates_week(Date.today, "td") {|d| sent_emails_by_date(d)}%>
</table>

