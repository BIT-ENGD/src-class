+---------+             +---------+  
|         |             |         |
|         |             |         |
|  User   |1           1|  Book   |
|         |-----   -----|         |
+---------+     |  |    +---------+
     | 1        |  |          | 1
     |          |  |          |
     |          |  |          |              
     | 1,*      |  |          | 1,*
+---------+     |  | 1,*+---------+  
|         |     ---+----|         |
|         |1,*     |    |         |
| Comment |---------    |   Tag   |
|         |             |         |
+---------+             +---------+

class Users
  has_many :tags
  has_many :comments
  has_many :tagsBooks, :through=>tags, :class_name => "tags_books"
  has_many :commentsBooks, :through=>comments, :class_name => "comments_books"
end

class Books
  has_many :tags
  has_many :comments
  has_many :tagsUsers, :through=>tags, :class_name => "tags_users"
  has_many :commentsUsers, :through=>comments, :class_name => "comments_users"
end

class Tags
  belongs_top :users
  belongs_to :books
end

class Comments
  belongs_top :users
  belongs_to :books
end

