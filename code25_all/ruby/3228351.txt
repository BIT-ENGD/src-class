module WindowsGui

  def self.def_api(function, parameters, return_value)              
    api = Win32API.new 'user32', function, parameters, return_value

    define_method(function.snake_case) do |*args|                  
      api.call *args                                                
    end

  end
end

def_api 'FindWindow', ['P', 'P'], 'L' 

  it 'wraps a Windows call with a method' do
    find_window(nil, nil).should_not == 0
  end

  it 'enforces the argument count' do
    lambda {find_window}.should raise_error
  end

  raise BadArgs if args.length == 0

