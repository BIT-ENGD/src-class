        http = Net::HTTP.new(url.host, url.port)
http.read_timeout = 30
json = http.get(url.to_s).body
parsed = JSON.parse(json)
if parsed.has_key? 'code'
    updatePerson = Person.find_or_initialize_by_code(parsed['code'])
    puts updatePerson.code
    parsed.each do |key, value|
    puts "#{key} is #{value}"
      symkey = key.to_sym
      updatePerson[:symkey] = value.to_s
      updatePerson.save
      puts "#{key}....." # shows the current key
      puts updatePerson[:symkey] # shows the correct value
      puts updatePerson.first_name # a sample key, it's returning nil

end

