class LeadPartArray < DelegateClass(Array)

  def <<(part, &block)
    super(part) unless @arr.select{|p| p.text == part.text}.size > 0
  end

  def initialize(arr = [])
    @arr = arr
    super(@arr) 
  end

end

  def test_should_pass_predicates_to_add
    arr = LeadPartArray.new([])
    part = LeadCapturer::LeadPart.new("text", LeadCapturer::TextTag.new, 2)
    predicate = Proc.new{|part| part.text.size < 4}
    arr <<(part, &predicate)
    assert_equal(0, arr.size)
  end

