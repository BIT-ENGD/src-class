class Foo
    def initialize(&block)
      instance_eval(&block) if block_given?
    end
  end

class Foo
  def initialize
    yield self if block_given?
  end
end

x = Foo.new { def foo; 'foo'; end }
x.foo 

yield self
