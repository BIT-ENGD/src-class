def some_method
  begin
    do_some_stuff
  rescue WWW::Mechanize::ResponseCodeError => e
    if e.response_code.to_i == 503
      handle_the_situation
    end
  end
end

if e.response_code.to_i == 503
whatever.should_receive(:do_some_stuff).and_raise(WWW::Mechanize::ResponseCodeError)

