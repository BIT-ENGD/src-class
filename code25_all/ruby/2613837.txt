class User
    include DataMapper::Resource

    attr_accessor :password, :password_confirmation

    property :id, Serial, :required => true
    property :email, String, :required => true, :format => :email_address, :unique => true
    property :hashed_password, String
    property :salt, String, :required => true
    property :created_at, DateTime, :default => Time.now
    property :permission_level, Integer, :default => 1

    validates_present :password_confirmation, :unless => Proc.new { |t| t.hashed_password }
    validates_present :password, :unless => Proc.new { |t| t.hashed_password }
    validates_is_confirmed :password

