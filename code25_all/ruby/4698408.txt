first_var.sort.each do |first_id, first_value|
  second_var.sort.each do |second_id, second_value_value|
    difference = first_value - second_value
    if difference >= 0
      second_var.delete(second_id)
    else
      second_var[second_id] += first_value
      if second_var[second_id] == 0
        second_var.delete(second_id)
      end
      first_var.delete(first_id)
    end
  end
end

