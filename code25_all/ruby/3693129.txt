return if foo.nil?
bar = foo[:bar] || 0

NameError (undefined local variable or method `foo'..)

