current_user
# Recipe Controller
class RecipesController < ApplicationController
  def create
  # do something
  if @recipe.save
    current_user.check_if_badges_earned(current_user)
  end
end

check_if_badges_earned
current_user
# User model
class User < ActiveRecord::Base

  def check_if_badges_earned(user)
    if user.recipes.count > 10
      award_badge(1, user)
    end
    if user.recipes.count > 20
      award_badge(2, user)
    end
  end

  def award_badge(badge_id, user)
    #see if user already has this badge, if not, give it to them!
    unless user.badgings.any? { |b| b[:badge_id] == badge_id}
      @badging = Badging.new(:badge_id => badge_id, :user_id => user)
      @badging.save
    end
  end

end

check_if_badges_earned
award_badge()
award_badge()
unless user.badgings.any? { |b| b[:badge_id] == badge_id}
user_id
