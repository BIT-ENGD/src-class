mount
mount -t luks
mount.luks
#!/bin/bash
set -e
MAPPER=$(mktemp -up /dev/mapper)
cryptsetup luksOpen $1 $(basename $MAPPER)
shift
mount $MAPPER $* || cryptsetup luksClose $(basename $MAPPER)

$*
mount -t luks /dev/hda /mnt/decrypted
/etc/mtab
/dev/mapper/tmp.mpI5ClExf8 on /mnt/decrypted type ext3 (rw,relatime,errors=continue,data=writeback)

umount /dev/hda
umount /mnt/decrypted
/dev/hda on /mnt/decrypted type luks.ext3 (rw,relatime,errors=continue,data=writeback,mapper=/dev/mapper/tmp.mpI5ClExf8)

umount
umount.luks
#!/bin/bash
set -e
umount $1
cryptsetup luksClose $MAPPER

umount /mnt/decrypted
MAPPER
mount.luks
/etc/mtab
mount -n
mount -f
