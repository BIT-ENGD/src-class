#!/bin/bash

GRUB="/etc/grub.conf"
_pair="$(</home/wadhwaso/login.txt)"
Server_info="/tmp/server_info"
for e in $_pair
do
             # extract user and ips for each $e in $_pair
        IFS='@'
        set -- $e
        _user="$1"
        _ip="$2"

        sleep 2
        echo "Connecting to server '${_ip}' via SSH..."
        ssh ${_user}@${_ip} "sudo grep -q "elevator=noop" "$GRUB" >/dev/null"
        if [ $? -eq 0 ]; then
        echo "Present on ${_ip}" | tee -a "${Server_info}"
        else
        echo "not present on ${_ip}" | tee -a "${Server_info}"
        fi
done

