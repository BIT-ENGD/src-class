Operation must be run in a work tree.
echo -e "Thank you for pushing your changes to ${project}. \nHold on while I update the required directories..."
GIT_WORK_TREE=/home/www/${project} git checkout -f
echo "Local directory updated!"

for ref in $@; do
    echo $ref
    if [ "$ref" = "refs/heads/production" ]; then
        # Before we could set the GIT directory strictly from the local environment
        # but the case might not be the same remotely. Need absolute paths.
        ssh git@myserver GIT_DIR=/home/www/${project}/.git GIT_WORK_TREE=/home/www/${project} git checkout -f production
        ssh git@myserver.com GIT_DIR=/home/www/${project}/.git GIT_WORK_TREE=/home/www/${project} git pull -f production
        echo "Production push completed"
    fi
done

remote: fatal: /usr/lib/git-core/git-pull cannot be used without a working tree.
