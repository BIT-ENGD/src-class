unset
a
b
c
MY_VARIABLE
make foo
export MY_VARIABLE := 'false'
foo: prep_foo dist
prep_foo:
    $(shell export MY_VARIABLE='true')
    echo ${MY_VARIABLE}
dist: a b c
a: 
    make -C a/src
b: 
    make -C b/src
c: 
    make -C c/src

export MY_VARIABLE='true'
echo 'false'
false
...

make foo
export MY_VARIABLE := 'false'
foo: prep_foo dist
prep_foo:
    $(shell unset MY_VARIABLE)
    echo ${MY_VARIABLE}
dist: a b c
a: 
    make -C a/src
b: 
    make -C b/src
c: 
    make -C c/src

make: unset: No such file or directory
echo 'false'
false
...

MY_VARIABLE
foo
dist: a b c 
foo: a_foo b_foo c_foo
a:
    make -C a/src
...
a_foo
    make -C a_foo/src

a
export
unset
dist: a b c 
foo: a_foo b_foo c_foo
a:
    make -C a/src
...
a_foo:
    export MY_VARIABLE='true'; make -C a/src

export MY_VARIABLE='true'
unset
Makefile:16: *** unterminated variable reference.  Stop.

touch
makefile
foo: prep_foo
prep_foo:
    touch a/src/.foo
    make -C a/src

make foo
Makefile:14: *** commands commence before first target.  Stop.

make
prep_foo
touch
a
commands commence before first target
foo: prep_foo a
prep_foo:
    touch a/src/.foo

touch
