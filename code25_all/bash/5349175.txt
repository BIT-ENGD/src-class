#!/bin/bash
if [ $# -eq 1 ]
then
    if [ -d "./locale/$1" ]
    then
        echo '' > "./locale/$1/msg_tmp.po"
        find . -type f -iname "*.php" | xgettext -j --from-code="utf-8" -o "./locale/$1/msg_tmp.po" -f -
        msgmerge -N "./locale/$1/msg.po" "./locale/$1/msg_tmp_iconv.po" > "./locale/$1/msg_new.po"
        mv "./locale/$1/msg_new.po" "./locale/$1/msg.po"
        rm "./locale/$1/msg_tmp.po"
        rm "./locale/$1/msg_tmp_iconv.po"
    else
        echo The directory locale/$1 does not exist
    fi
else
    echo Locale not specified
fi

