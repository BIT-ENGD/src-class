#!/bin/bash -x
commits=`git log --pretty=oneline | grep "#1234" | cut -f1 -d" "`
no=1;
for COMMIT in $commits
do
    git format-patch -1 $COMMIT --start-number=$no
    no=$(($no+1))
done

$ ./getpatches.sh 
++ git log --pretty=oneline
++ grep '#6809'
++ cut -f1 '-d '
+ commits='da591d66f05513488ee06857edc9d24a046c179d
4fd781da9cc503b961f8e4c42bbb136d9e3c1806
3a9311f5507f91f830b44673c57f672e7aabaac0'
+ no=1
+ for COMMIT in '$commits'
+ git format-patch -1 'da591d66f05513488ee06857edc9d24a046c179d' --start-number=1
fatal: ambiguous argument 'da591d66f05513488ee06857edc9d24a046c179d': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions

git format-patch -1 'da591d66f05513488ee06857edc9d24a046c179d' --start-number=1
git log | grep $COMMIT
+ grep '992ab41d3539539bd609209beed33a9de2f4277a'
grep: Unmatched [ or [^

grep '992ab41d3539539bd609209beed33a9de2f4277a'
-x
bash
 + grep 992ab41d3539539bd609209beed33a9de2f4277a

