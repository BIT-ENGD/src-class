#!/bin/bash
# generates an XML file

googleAuth="$(curl https://www.google.com/accounts/ClientLogin -s \
  -d Email=foo \
  -d Passwd=bar \
  -d accountType=GOOGLE \
  -d source=curl-dataFeed-v2 \
  -d service=analytics \
  | awk /Auth=.*/)"

# ...

feedUri="https://www.google.com/analytics/feeds/data\
?ids=$table\
&start-date=$SD\
&end-date=$ED\
&dimensions=baz\
&metrics=xyzzy\
&prettyprint=true"

# ...

curl $feedUri --silent \
  --header "Authorization: GoogleLogin $googleAuth" \
  --header "GData-Version: 2" \
  | awk # ...

