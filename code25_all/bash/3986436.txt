dir_base=$1   
size_ok=5000000  
cd $dir_base  
curr_size=du -s -D | awk '{print $1}' | sed 's/%//g' zipname=archivedate +%Y%m%d

if (( $curr_size > $size_ok ))
then
    echo "Compressing and archiving files, Logs folder has grown above 5G"
    echo "oldest to newest selected."
    targfiles=( `ls -1rt` )
    echo "rocess files."
    for tfile in ${targfiles[@]}
    do
        let `du -s -D | awk '{print $1}' | sed 's/%//g' | tail -1`
        if [ $curr_size -lt $size_ok ];
        then
            echo "$size_ok has been reached. Stopping processes"
            break
        else  if [ $curr_size -gt $size_ok ];
        then
            zip -r $zipname $tfile
            rm -f $tfile
            echo "Added ' $tfile ' to archive'date +%Y%m%d`'.zip and removed"
        else [ $curr_size -le $size_ok ];
            echo "files in $dir_base are less than 5G, not archiving"
        fi

