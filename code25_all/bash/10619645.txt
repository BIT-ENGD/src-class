listoffile="$HOME/ffmpeglist.lst"
numberoffile=$(wc -l <$listoffile)
ffmpegpath="/usr/bin/ffmpeg"

    mystufvariabletouseonmyscript=$(kdialog --progressbar "hello this is a progress bar with 100 steps" 100) ;  sleep 2 ; qdbus $mystufvariabletouseonmyscript  showCancelButton true




    until test "true" = `qdbus  $mystufvariabletouseonmyscript wasCancelled` ; do 

            while read line ; do
                qdbus $mystufvariabletouseonmyscript org.kde.kdialog.ProgressDialog.setLabelText $"Starting Conversion...processing file $line"


                $ffmpegpath -i   "$line"   "${line%%.*}.$mp3" 


                value=$(( $(($a*100))/$numberoffile ))
                qdbus  $mystufvariabletouseonmyscript Set org.kde.kdialog.ProgressDialog value $value
                a=$(($a+1))

                done< "$listoffile"

        done

