myfunc() {

local cmd="echo bar"
local output=

while [[ -z output=`$cmd` ]];
do
    #cmd is failing so far, wait and try again
    sleep 5
done

# great success
echo "command returned: $output"
}

