#!/bin/bash

dir="/posix/path/to/folder"
cd "$dir"

color1 = "#816c51"
color2 = "#5a4a3b"
color3 = "#1c110f"

for file in *.tiff
do
    base=${file%*.tif}
    convert -unsharp 5 "$base" "$base.ppm"
    convert -opaque white -fill white -fuzz 10% "$base.ppm" "${base}_step1.tif"
    convert -fuzz 5% -fill "$color1" -opaque "$color1" "${base}_step1.tif" "${base}_step2.tif"
    convert -fuzz 1.5% -fill "$color1" -opaque "$color2" "${base}_step2.tif" "${base}_step3.tif"
    convert -fuzz 12% -fill "black" -opaque "$color3" "${base}_step3.tif" "${base}_step4.tif"
    convert "${base}_step4.tif" "${base}_final.tif"
done

convert: unable to open image ...
convert: missing an image filename
test.sh: line 6: color1: command not found
