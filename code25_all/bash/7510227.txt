#!/bin/bash

UD_GW1='/root/Lab/UD_GW1'
UD_GW2='/root/Lab/UD_GW2'
i='1'
while [ $i -le "2" ]; do
for e in  $UD_GW1 $UD_GW2 ; do
echo "TABLE USSD_GW$i"  
echo "START_SAMPLE_PERIOD"
while read numcodigo; do
cantidad_uniq=`tail -n 60000 $e | egrep "EXT-RESPONSE" | cut -d '|' -f 7 | egrep -v ^$  | egrep "$numcodigo" | wc -l`
echo "$numcodigo".Metric" "=" $numcodigo"
echo "CantCod."$numcodigo"Metric "=" $cantidad_uniq"
done #fin while read numcodigo;   
echo "END_SAMPLE_PERIOD"
echo "END_TABLE"
let i=$i+1
done
done

TABLE USSD_GW1
START_SAMPLE_PERIOD
600.Metric = 600
CantCod.600Metric = 8
518.Metric = 518
CantCod.518Metric = 0
504.Metric = 504
CantCod.504Metric = 0
516.Metric = 516
CantCod.516Metric = 1
527.Metric = 527
CantCod.527Metric = 0
END_SAMPLE_PERIOD
END_TABLE
TABLE USSD_GW2
START_SAMPLE_PERIOD
600.Metric = 600
CantCod.600Metric = 7
518.Metric = 518
CantCod.518Metric = 0
504.Metric = 504
CantCod.504Metric = 2
516.Metric = 516
CantCod.516Metric = 0
527.Metric = 527
CantCod.527Metric = 0
END_SAMPLE_PERIOD
END_TABLE

TABLE USSD_GW1
START_SAMPLE_PERIOD
600.Metric = 600
CantCod.600Metric = 8
518.Metric = 518
CantCod.518Metric = 0
504.Metric = 504
CantCod.504Metric = 0
516.Metric = 516  
CantCod.516Metric = 1
527.Metric = 527
CantCod.527Metric = 0
END_SAMPLE_PERIOD
END_TABLE 
TABLE USSD_GW2
START_SAMPLE_PERIOD
END_SAMPLE_PERIOD
END_TABLE

