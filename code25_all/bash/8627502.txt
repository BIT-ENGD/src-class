#!/bin/bash
function long_running {
    for i in $(seq 1 10); do
        echo foo
        sleep 100
    done
}

long_running | head -n 1

long_running | (head -n 1; exit)

set -e
(head -n 1; false)
head -n 1
