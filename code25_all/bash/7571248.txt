SHOW SLAVE STATUS\G
Last_Error: ...
Last_Error: Error 'Cannot add or update a child row: a foreign key constraint
fails (`dms/active_sessions`, CONSTRAINT `active_sessions_ibfk_1` FOREIGN KEY
(`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)' 
on query. Default database: 'dms'. Query: 'INSERT INTO active_sessions
(session_id,user_id,lastused,ip) VALUES ('749d9d494c31ab8ee76bf6b6b1127fd2',
'15389','2011-09-27 14:04:59','172.16.11.31')'

user_id
users
id
users
FIELD=`echo $LAST_ERROR | sed 's/.*FOREIGN KEY [\(\`]*\([0-9a-zA-Z_-]*\)[\`\)]*.*/\1/'`
TABLE=`echo $LAST_ERROR | sed 's/.*REFERENCES \`\([0-9a-zA-Z_-]*\)\`.*/\1/'`
COLUMN=`echo $LAST_ERROR | sed 's/.*REFERENCES \`['$TABLE']*\` [\(\`]*\([0-9a-zA-Z_-]*\)[\`\)]*.*/\1/'`

$FIELD
(session_id,user_id,lastused,ip)

$FIELD
('749d9d494c31ab8ee76bf6b6b1127fd2','15389','2011-09-27 14:04:59','172.16.11.31')

15389
