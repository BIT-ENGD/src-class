test_foo_and_bar() {
    expect_foo $1
    expect_bar $2
}

expect_foo() {
    [[ $1 != "foo" ]] && return 1
}

expect_bar() {
    [[ $1 != "bar" ]] && return 1
}

expect_foo
test_foo_and_bar
test_foo_and_bar() {
    expect_foo $1 || return 2
    expect_bar $2 || return 2
}

finally
