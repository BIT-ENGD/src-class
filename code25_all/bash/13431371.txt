#!/bin/bash
# Bash to initiate Solr Delta Import Handler

# Setup Variables
urlCmd='http://localhost:8080/solr/dataimport?command=delta-import&clean=false'
statusCmd='http://localhost:8080/solr/dataimport?command=status'
outputDir=. 

# Operations
wget -O $outputDir/check_status_update_index.txt ${statusCmd} 
2>/dev/null 
status=`fgrep idle $outputDir/check_status_update_index.txt` 
if [[ ${status} == *idle* ]] 
then 
wget -O $outputDir/status_update_index.txt ${urlCmd} 
2>/dev/null 
fi 

