test1
#!/bin/bash

test -f kill_me && rm kill_me

touch kill_me
tail -f kill_me

tail
kill %1
tail
bash
tail
test2
#!/bin/bash

test -f kill_me && rm kill_me

(
    touch kill_me
    tail -f kill_me
) &

while true; do
    sleep 1
    test -f kill_me && {
        kill %1
        exit
    }
done

tail
test3
#!/bin/bash

test -f kill_me && rm kill_me

# assuming test1 above is included in the same directory
./test1 &

while true; do
    sleep 1
    test -f kill_me && {
        kill %1
        exit
    }
done

tail
killall
