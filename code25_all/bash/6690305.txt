#!/bin/bash
lang=`echo $LANG`
# It's necessary to change the local setting. I don't know why.
export LANG=C
# Can comment the following statement if there is not dos2unix command.
dos2unix -q $1
sed -i -e 's;^\([[:blank:]]*\)//\(.*\);\1/* \2 */;' $1
export LANG=$lang

// some english 一些中文注释

/* some english */一些中文注释

/* some english 一些中文注释*/

/* some english 一些 */中文注释

~/sandbox$ uname -a
Linux xyt-dev 2.6.30-1-686 #1 SMP Sat Aug 15 19:11:58 UTC 2009 i686 GNU/Linux
~/sandbox$ echo $LANG
en_US.UTF-8
~/sandbox$ cat tt.c | od -c -t x1
0000000   /   /       s   o   m   e       e   n   g   l   i   s   h    
         2f  2f  20  73  6f  6d  65  20  65  6e  67  6c  69  73  68  20
0000020 322 273 320 251 326 320 316 304 327 242 312 315
         d2  bb  d0  a9  d6  d0  ce  c4  d7  a2  ca  cd
0000034
~/sandbox$ ./convert_comment_style_cpp2c.sh tt.c
~/sandbox$ cat tt.c | od -c -t x1
0000000   /   *           s   o   m   e       e   n   g   l   i   s   h
         2f  2a  20  20  73  6f  6d  65  20  65  6e  67  6c  69  73  68
0000020     322 273 320 251       *   / 326 320 316 304 327 242 312 315
         20  d2  bb  d0  a9  20  2a  2f  d6  d0  ce  c4  d7  a2  ca  cd
0000040
~/sandbox$ 

~/sandbox$ cat tt.c | od -c -t x1
0000000   /   /       I   n   W   i   n   d   o   w   :     250 250   ?
         2f  2f  20  49  6e  57  69  6e  64  6f  77  3a  20  a8  a8  3f
0000020   1   ?
         31  3f
0000022
~/sandbox$ ./convert_comment_style_cpp2c.sh tt.c
~/sandbox$ cat tt.c | od -c -t x1
0000000   /   *           I   n   W   i   n   d   o   w   :           *
         2f  2a  20  20  49  6e  57  69  6e  64  6f  77  3a  20  20  2a
0000020   / 250 250   ?   1   ?
         2f  a8  a8  3f  31  3f

