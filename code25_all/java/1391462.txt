public class FileSystemManager {

    private ReadWriteLock readWriteLock = new ReentrantReadWriteLock();

    public byte[] read(String path) {
        readWriteLock.readLock().lock();
        try {
            ...
        } finally {
            readWriteLock.readLock().unlock();
        }
    }
    public void write(String path, byte[] data) {
        readWriteLock.writeLock().lock();
        try {
            ...
        } finally {
            readWriteLock.writeLock().unlock();
        }
    }
}

