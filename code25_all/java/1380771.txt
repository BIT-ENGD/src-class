 public static void exportSchema() {
        new SchemaExport(hbConfig).create(true, true);
    }


public static void exportSchemaXXX() {

// sessionFactory and hbConfig defined in the class

        Session sess = sessionFactory.openSession();

        sess.doWork(new Work() {

            public void execute(java.sql.Connection conn) throws SQLException {
                System.err.println("work");
                try {
                    Class dialect = Class.forName(hbConfig.getProperty("hibernate.dialect"));
                    String[] lines = hbConfig.generateSchemaCreationScript((Dialect) dialect.newInstance());

                    for (String s : lines) {
                        System.err.println(s);
                        Statement stm = conn.createStatement();
                        stm.execute(s);
                    }
                } catch (Exception ex) {
                    System.err.println("Error: " + ex);
                }

            }
        });

        sess.flush();
        sess.close();
    }

