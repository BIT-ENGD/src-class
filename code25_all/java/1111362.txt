public class MyData {
  // has composite key (id1, id2) 

  // ... //

  @ManyToMany
  @Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)
  @JoinTable(name = "MyData_foo", 
    joinColumns = {
      @JoinColumn(name = "a_id1"), 
      @JoinColumn(name = "a_id2") 
    }, 
    inverseJoinColumns = {
      @JoinColumn(name = "b_id1"),
      @JoinColumn(name = "b_id2") })
  )
  private Set<MyData> mySet = new HashSet<MyData>();

  // ... //
}


CREATE TABLE `MyData_foo` (
  `b_id2` bigint(20) NOT NULL default '0',
  `b_id1` bigint(20) NOT NULL default '0',
  `a_id2` bigint(20) NOT NULL default '0',
  `a_id1` bigint(20) NOT NULL default '0',
  PRIMARY KEY  (`a_id1`,`a_id2`,`b_id1`,`b_id2`),
  KEY `FKCD44188BB2B7A1BE` (`b_id1`,`b_id2`),
  KEY `FKCD44188B7997E326` (`a_id1`,`a_id2`),
  CONSTRAINT `FKCD44188B7997E326` FOREIGN KEY (`a_id1`, `a_id2`) REFERENCES `MyData`  (`b_id2`, `b_id1`),
  CONSTRAINT `FKCD44188BB2B7A1BE` FOREIGN KEY (`b_id1`, `b_id2`) REFERENCES `MyData`  (`a_id2`, `a_id1`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

