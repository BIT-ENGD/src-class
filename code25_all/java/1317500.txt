


public interface ISlaveServer {

    public  String getId();

    public  String getName();
}

@Remote
public interface IMasterServer {

    public String getId();

    public void addSlave(ISlaveServer slaveServer);

    public  void removeSlave(ISlaveServer slaveServer);

}

@Stateless
@RemoteBinding(jndiBinding = "MasterServer")
public class MasterServer implements IMasterServer, Serializable {

    UUID id = UUID.randomUUID().toString();

    public String getId() { return id.toString(); }

    public void addSlave(ISlaveServer slaveServer) { ... }

    public void removeSlave(ISlaveServer slaveServer) { ... }

}



public interface ISlaveServer {

    public  String getId();

    public  String getName();
}

@Remote
public interface IMasterServer {

    public String getId();

    public void addSlave(ISlaveServer slaveServer);

    public  void removeSlave(ISlaveServer slaveServer);

}

@Stateless
@RemoteBinding(jndiBinding = "MasterServer")
public class MasterServer implements IMasterServer, Serializable {

    UUID id = UUID.randomUUID().toString();

    public String getId() { return id.toString(); }

    public void addSlave(ISlaveServer slaveServer) { ... }

    public void removeSlave(ISlaveServer slaveServer) { ... }

}





public static class SlaveServer implements ISlaveServer, Serializable {


    UUID id = UUID.randomUUID().toString();

    public String getId() { return id.toString(); }

    public String getName() { return "SlaveServer"; }

}



public static class SlaveServer implements ISlaveServer, Serializable {


    UUID id = UUID.randomUUID().toString();

    public String getId() { return id.toString(); }

    public String getName() { return "SlaveServer"; }

}





    Properties properties = new Properties();
    properties.put("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory");
    properties.put("java.naming.factory.url.pkgs", "org.jboss.naming.client");
    properties.put("java.naming.provider.url", "jnp://localhost:1099");

    try {
        Context ctx = new InitialContext(properties);
        IMasterServer masterServer = (IMasterServer) ctx.lookup("MasterServer");
        String masterId = masterServer.getId();
        masterServer.addVideoServer(new SlaveServer());
    }
    catch(NamingException e) {
        e.printStackTrace();
    }



    Properties properties = new Properties();
    properties.put("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory");
    properties.put("java.naming.factory.url.pkgs", "org.jboss.naming.client");
    properties.put("java.naming.provider.url", "jnp://localhost:1099");

    try {
        Context ctx = new InitialContext(properties);
        IMasterServer masterServer = (IMasterServer) ctx.lookup("MasterServer");
        String masterId = masterServer.getId();
        masterServer.addVideoServer(new SlaveServer());
    }
    catch(NamingException e) {
        e.printStackTrace();
    }





masterServer.addVideoServer(new SlaveServer());



masterServer.addVideoServer(new SlaveServer());


