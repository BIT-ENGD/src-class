//inner class inside Lock
private static class Sync extends AbstractQueuedSynchronizer {
    public Sync(){
        setState(-1);
    }

    public boolean tryAcquire(int ignore) {
        if (getState() == 1) return false;

        Thread first = getFirstQueuedThread();
        if (first != null &&
            first != Thread.currentThread()) {
            setState(0);
            return false;
        }
        return compareAndSetState(0, 1);

