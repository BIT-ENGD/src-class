 for (int i = 0; i < NUM_RETRIES; i++) {
     pm.currentTransaction().begin();

     <all my code will be here>

     try {
         pm.currentTransaction().commit();
         break;

     } catch (JDOCanRetryException ex) {
         if (i == (NUM_RETRIES - 1)) { 
             throw ex;
         }
     }
 }

