public class SearchRule implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = true)
    @Column(name = "ID")
    private Integer id;
    @Basic(optional = false)
    @Column(name = "Name", unique = true)
    private String name;
    @Basic(optional = false)
    @Column(name = "Threshold")
    private int threshold;
    @Basic(optional = false)
    @Column(name = "LastTouched", insertable = false, updatable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date lastTouched;
    @Column(name = "TouchedBy")
    private String touchedBy;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "searchRule", fetch = FetchType.LAZY)
    private Collection<FieldRule> fieldRuleCollection;
    @JoinColumn(name = "IndexTemplateId", referencedColumnName = "ID")
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private IndexTemplate indexTemplateId;

public class FieldRule implements Serializable {
    private static final long serialVersionUID = 1L;
    @EmbeddedId
    protected FieldRulePK fieldRulePK;
    @Basic(optional = false)
    @Column(name = "RuleValue")
    private String ruleValue;
    @JoinColumns({@JoinColumn(name = "IndexTemplateId", referencedColumnName = "IndexTemplateId", insertable = false, updatable = false), @JoinColumn(name = "FieldNumber", referencedColumnName = "FieldNumber", insertable = false, updatable = false)})
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private Field field;
    @JoinColumn(name = "SearchRuleId", referencedColumnName = "ID", insertable = false, updatable = false)
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private SearchRule searchRule;

@Embeddable
public class FieldRulePK implements Serializable {
    @Basic(optional = false)
    @Column(name = "IndexTemplateId")
    private Integer indexTemplateId;
    @Basic(optional = false)
    @Column(name = "FieldNumber")
    private Integer fieldNumber;
    @Basic(optional = false)
    @Column(name = "SearchRuleId")
    private Integer searchRuleId;

