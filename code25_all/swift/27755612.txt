    var receivers: [String] = []

        @IBAction func doneTapped(sender: AnyObject) {

            for receiver in receivers{

                var textMessage = PFObject(className:"textMessage")
                textMessage["Receiver"] = receiver
                textMessage["Message"] = messageOutl.text
                textMessage.saveInBackgroundWithBlock {

                    (success: Bool!, error: NSError!) -> Void in

                    if (success != nil) {

                        self.errorOccurred = true

                        NSLog("Object created with id: \(textMessage.objectId)")

                    } else {
                        NSLog("%@", error)
                    }
                }
            }
            let appDel: AppDelegate = UIApplication.sharedApplication().delegate as AppDelegate
            let contxt: NSManagedObjectContext = appDel.managedObjectContext!
            let en = NSEntityDescription.entityForName("MainTable", inManagedObjectContext: contxt)

            var newMessage = SecondModel(entity: en!, insertIntoManagedObjectContext: contxt)

            for rec in receivers{
                newMessage.receiver = rec
                newMessage.date = NSDate()
                newMessage.messageType = typeOfMessage
                contxt.save(nil)
            }
}

let en: AnyObject! = NSEntityDescription.insertNewObjectForEntityForName("MainTable", inManagedObjectContext: contxt)

var newMessage = SecondModel(entity: en! as NSEntityDescription, insertIntoManagedObjectContext: contxt)

