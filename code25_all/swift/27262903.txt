func pauseGame(){

    initResumeButton()
    pause.removeFromParent()

    gamePaused = true
    self.paused = true
}

func resumeGame(){
    resume.removeFromParent()
    initPauseButton()

    gamePaused = false
    self.paused = false
}

func registerAppTransitionObservers(){
    NSNotificationCenter.defaultCenter().addObserver(self, selector: "applicationWillResignActive", name: UIApplicationWillResignActiveNotification, object: nil)
    NSNotificationCenter.defaultCenter().addObserver(self, selector: "applicationDidEnterBackground", name: UIApplicationDidEnterBackgroundNotification, object: nil)
    NSNotificationCenter.defaultCenter().addObserver(self, selector: "applicationWillEnterForeground", name: UIApplicationWillEnterForegroundNotification, object: nil)
}

func applicationWillResignActive(){

    if !gamePaused && state != .GameStarting{
        pauseGame()
    }

}

func applicationDidEnterBackground(){
    self.view?.paused = true
}

func applicationWillEnterForeground(){
    self.view?.paused = false  
    if gamePaused{
        self.paused = true
   }
}

