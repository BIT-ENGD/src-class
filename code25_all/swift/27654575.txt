@IBAction func lotsOfConnects(sender: NSButton) {
    for i in 0..<10_000 {
        var readStream: NSInputStream?
        var writeStream: NSOutputStream?

        NSStream.getStreamsToHostWithName("irc.twitch.tv", port: 6667, inputStream: &readStream, outputStream: &writeStream)

        // Leaks with of without these two lines
        readStream = nil
        writeStream = nil
    }
}

@IBAction func j(sender: NSButton) {
    for i in 0..<10_000 {
        var readStream:  Unmanaged<CFReadStream>?
        var writeStream: Unmanaged<CFWriteStream>?

        CFStreamCreatePairWithSocketToHost(nil, "irc.twitch.tv", 6667, &readStream, &writeStream)

        var inputStream = readStream!.takeRetainedValue()
        var outputStream = writeStream!.takeRetainedValue()

        readStream = nil
        writeStream = nil
    }
}

