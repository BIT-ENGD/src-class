- (void)webViewDidFinishLoad:(UIWebView *)webView {
// Auto fill the username and password text fields, assuming the HTML has
// <input type="text" name="username"> and
// <input type="text" name="password">
NSString *savedUsername = [[NSUserDefaults standardUserDefaults] objectForKey:@"USERNAME"];
NSString *savedPassword = [[NSUserDefaults standardUserDefaults] objectForKey:@"PASSWORD"];
if (savedUsername.length != 0 && savedPassword.length != 0) {
    // Create js strings
    NSString *loadUsernameJS = [NSString stringWithFormat:@"var inputFields = document.querySelectorAll(\"input[name='username']\"); \
                                for (var i = inputFields.length >>> 0; i--;) { inputFields[i].value = '%@';}", savedUsername];
    NSString *loadPasswordJS = [NSString stringWithFormat:@"var inputFields = document.querySelectorAll(\"input[name='password']\"); \
                                for (var i = inputFields.length >>> 0; i--;) { inputFields[i].value = '%@';}", savedPassword];
    // Runs the JS
    [self.webview stringByEvaluatingJavaScriptFromString: loadUsernameJS];
    [self.webview stringByEvaluatingJavaScriptFromString: loadPasswordJS];
}

func webViewDidFinishLoad(_ : UIWebView){


    let savedUsername = NSUserDefaults.standardUserDefaults().stringForKey("USERNAME")
    let savedPassword = NSUserDefaults.standardUserDefaults().stringForKey("PASSWORD")

    if savedUsername == nil || savedPassword == nil {return}

    if ( countElements(savedUsername!) != 0 && countElements(savedPassword!) != 0) {
        let loadUsernameJS = "var inputFields = document.querySelectorAll(\"input[name='username']\"); \\ for (var i = inputFields.length >>> 0; i--;) { inputFields[i].value = \'\(savedUsername)\';}"
        let loadPasswordJS = "var inputFields = document.querySelectorAll(\"input[type='password']\"); \\ for (var i = inputFields.length >>> 0; i--;) { inputFields[i].value = \'\(savedPassword)\';}"
        self.webView.stringByEvaluatingJavaScriptFromString(loadUsernameJS)
        self.webView.stringByEvaluatingJavaScriptFromString(loadPasswordJS)
    }
}

