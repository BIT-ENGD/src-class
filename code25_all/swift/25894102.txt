let fileManager = NSFileManager.defaultManager()
if !fileManager.isReadableFileAtPath(photo.imagePath) {
    println("can't read")
}
let data = NSData(contentsOfURL: NSURL(fileURLWithPath: photo.imagePath))
var image : UIImage = UIImage(data: data)

func savePNGImage(image: UIImage, imageName: String) -> (String){
    let paths = NSSearchPathForDirectoriesInDomains(NSSearchPathDirectory.DocumentDirectory, NSSearchPathDomainMask.UserDomainMask, true)
    let documentsDirectory :String = paths[0] as String
    let path = documentsDirectory.stringByAppendingPathComponent("\(imageName).png")
    let data = UIImagePNGRepresentation(image)
    data.writeToFile(path, atomically: true)
    println("Saved in: \(path)")

    return path
}

let fileManager = NSFileManager.defaultManager()
let exists = NSFileManager.defaultManager().fileExistsAtPath(photo.imagePath)
println("-")
println("Current path: \(photo.imagePath)")
let paths = NSSearchPathForDirectoriesInDomains(NSSearchPathDirectory.DocumentDirectory,NSSearchPathDomainMask.UserDomainMask, true)
let documentsDirectory :String = paths[0] as String
println("Contents of Documents dir: \(fileManager.contentsOfDirectoryAtPath(documentsDirectory, error: nil))")
println("Exists? \(exists)")
if !fileManager.isReadableFileAtPath(photo.imagePath) {
    println("can't read")
}
println(photo.imageName)
println(photo.text)
println(photo.imagePath)

-
Current path: /Users/giacomomanzoli/Library/Developer/CoreSimulator/Devices/DB2556F4-69C5-4051-97AB-5F46C32D8C1E/data/Containers/Data/Application/4FF0A409-F0AA-4FDB-AF69-8D33576D9470/Documents/sdasdasdasd.png
Contents of Documents dir: Optional([SampleCoreData.sqlite, SampleCoreData.sqlite-shm, SampleCoreData.sqlite-wal, sdasdasdasd.m4a, sdasdasdasd.png, test.m4a, test.png, test2.m4a, test2.png])
Exists? false
can't read
sdasdasdasd
sdasdasdasd
/Users/giacomomanzoli/Library/Developer/CoreSimulator/Devices/DB2556F4-69C5-4051-97AB-5F46C32D8C1E/data/Containers/Data/Application/4FF0A409-F0AA-4FDB-AF69-8D33576D9470/Documents/sdasdasdasd.png
-
Current path: /Users/giacomomanzoli/Library/Developer/CoreSimulator/Devices/DB2556F4-69C5-4051-97AB-5F46C32D8C1E/data/Containers/Data/Application/01DA29C8-F3A8-452F-AEC9-43DAE354607D/Documents/test.png
Contents of Documents dir: Optional([SampleCoreData.sqlite, SampleCoreData.sqlite-shm, SampleCoreData.sqlite-wal, sdasdasdasd.m4a, sdasdasdasd.png, test.m4a, test.png, test2.m4a, test2.png])
Exists? false
can't read
test
test
/Users/giacomomanzoli/Library/Developer/CoreSimulator/Devices/DB2556F4-69C5-4051-97AB-5F46C32D8C1E/data/Containers/Data/Application/01DA29C8-F3A8-452F-AEC9-43DAE354607D/Documents/test.png
-
Current path: /Users/giacomomanzoli/Library/Developer/CoreSimulator/Devices/DB2556F4-69C5-4051-97AB-5F46C32D8C1E/data/Containers/Data/Application/6F720075-27FC-4211-8521-CBB05E1CE523/Documents/test2.png
Contents of Documents dir: Optional([SampleCoreData.sqlite, SampleCoreData.sqlite-shm, SampleCoreData.sqlite-wal, sdasdasdasd.m4a, sdasdasdasd.png, test.m4a, test.png, test2.m4a, test2.png])
Exists? false
can't read
test2
test2
/Users/giacomomanzoli/Library/Developer/CoreSimulator/Devices/DB2556F4-69C5-4051-97AB-5F46C32D8C1E/data/Containers/Data/Application/6F720075-27FC-4211-8521-CBB05E1CE523/Documents/test2.png

NSFileManager.defaultManager().createFileAtPath(path, contents: data, attributes: nil)
