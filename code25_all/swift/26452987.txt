var authenticationViewController: UIViewController?
var lastError: NSError?
var gameCenterEnabled: Bool

func authenticateLocalPlayer () {
  let localPlayer = GKLocalPlayer.localPlayer()
  localPlayer.authenticateHandler = {(viewController, error) in
    self.lastError = error

    if viewController != nil {
      self.authenticationViewController = viewController
      NSNotificationCenter.defaultCenter().postNotificationName(PresentAuthenticationViewController,
      object: self)
    } else if localPlayer.authenticated {
      self.gameCenterEnabled = true
    } else {
      self.gameCenterEnabled = false
    }
  }
}

func showAuthenticationViewController() {
  let game = Game.sharedInstance
    if let authenticationViewController =
    game.authenticationViewController {
    self.presentViewController(authenticationViewController, animated: true, completion: nil)
  }
}

