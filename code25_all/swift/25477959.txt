UIView.animateWithDuration
UIViewAnimationOptions
.Repeat
var buttonSelected = false
.Repeat
nil
buttonSelected
.setNeedsDisplay()
//Turn steam elements into Shape Layers then into Views
        colorRed.setFill()
        shapePath.fill()
        //Turn steam shapes into shape layers
        var steam1 = CAShapeLayer()
        var steam2 = CAShapeLayer()
        steam1.path = shape2Path.CGPath
        steam2.path = shape3Path.CGPath
        steam1.fillColor = transparent.CGColor
        steam2.fillColor = transparent.CGColor


        //Create the views for the steam
        var steam1View = UIView()
        var steam2View = UIView()
        self.addSubview(steam1View)
        self.addSubview(steam2View)
        steam1View.layer.addSublayer(steam1)
        steam2View.layer.addSublayer(steam2)

        func shouldRepeat()->UIViewAnimationOptions{
            if repeatSteam == true {
                return .Repeat
            }
            else {
                return nil
            }

        }
            //Set initial properties for steam layers & views
            steam1.fillColor = colorRed.CGColor
            steam2.fillColor = colorRed.CGColor
            steam1View.alpha = 1.0
            steam2View.alpha = 1.0
            steam1View.transform = CGAffineTransformMakeTranslation(0.0, 20)
            steam2View.transform = CGAffineTransformMakeTranslation(0.0, 30)
            //Animate Steam 1
            UIView.animateWithDuration(1.5, delay: 0.0, options:shouldRepeat(), animations: {
                steam1View.transform = CGAffineTransformMakeTranslation(0.0, -10)
                steam1View.alpha = 0.0
                }, completion: nil)
            //Animate Steam 2
            UIView.animateWithDuration(1.9, delay: 0.0, options:shouldRepeat(), animations: {
                steam2View.transform = CGAffineTransformMakeTranslation(5, -10)
                steam2View.alpha = 0.0
                }, completion: nil)


            //Check the buttonSelected state and stop the steam animations if false
            if self.buttonSelected == false {
            //Make smoke transparent
            steam1.fillColor = transparent.CGColor
            steam2.fillColor = transparent.CGColor
            steam1.setNeedsDisplay()
            steam2.setNeedsDisplay()
            println("Smoke should dissapear")
            steam1.hidden = true
            steam2.hidden = true
            self.layer.removeAllAnimations()
            self.layer.setNeedsDisplay()
            //steam2View.layer.removeAllAnimations()
            //Fill cup with green
            colorGreen.setFill()
            shapePath.fill()
        }

