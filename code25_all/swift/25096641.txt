func test() {

    class Test {

        var array = ["foo", "bar"]

        func swap1() {       // PRODUCES STRANGE RESULT
            array.insert(array.removeAtIndex(0), atIndex:1)
            print("---swap1---", xs:array)
        }

        func swap2() {       // PRODUCES EXPECTED RESULT
            let item = array.removeAtIndex(0)
            array.insert(item, atIndex:1)
            print("---swap2---", xs:array)
        }

        func swap3() {       // PRODUCES EXPECTED RESULT
            var array = ["foo", "bar"]
            array.insert(array.removeAtIndex(0), atIndex:1)
            print("---swap3---", xs:array)
        }

        func print(fn: String, xs: [String]) {
            println(fn)
            for x in xs { println(x) }
        }
    }

    Test().swap1()
    Test().swap2()
    Test().swap3()
}

---swap1---
foo
foo
bar
---swap2---
bar
foo
---swap3---
bar
foo

