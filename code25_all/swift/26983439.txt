SKPaymentTransactionObserver
paymentQueue:updatedTransactions
func paymentQueue(queue: SKPaymentQueue!, updatedTransactions transactions: [AnyObject]!) {
    for transaction in transactions as [SKPaymentTransaction] {
        switch transaction.transactionState {
            case SKPaymentTransactionState.Purchasing:
                println("purchasing")

            case SKPaymentTransactionState.Purchased:
                println("payment done")
                SKPaymentQueue.defaultQueue().finishTransaction(transaction)

            case SKPaymentTransactionState.Failed:
                println("payment failed")
                SKPaymentQueue.defaultQueue().finishTransaction(transaction)

            default:
                println("nop \(transaction.transactionState)")
        }
    }
}

