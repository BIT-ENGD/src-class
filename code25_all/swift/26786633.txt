import Foundation
import UIKit

class BatteryState {

    var device: UIDevice

    init() {
        self.device = UIDevice.currentDevice()
        println("Device Initialized")
    }

    func isPluggedIn(value: Bool) {
        let sharedDefaults = NSUserDefaults(suiteName: "group.WidgetExtension")

        let batteryState = self.device.batteryState

        if (batteryState == UIDeviceBatteryState.Charging || batteryState == UIDeviceBatteryState.Full){
            let isPluggedIn = true
            println("Plugged In")
            sharedDefaults?.setObject("Plugged In", forKey: "stringKey")
        }

        else {
            let isPluggedIn = false
            println("Not Plugged In")
            sharedDefaults?.setObject("Not Plugged In", forKey: "stringKey")
        }
        sharedDefaults?.synchronize()
    }
}

