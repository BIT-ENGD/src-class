func generate() -> GeneratorOf<ValueType> {
    if let values = self.data.values
    {
        var index : Int = 0
        return GeneratorOf<ValueType> {
            return (index < values.count) ? values[index++] : nil
        }
    }
    //how to improve these lines (or wrap it into the code above?) This feels like repetition.
    return GeneratorOf<ValueType> { 
        return nil
    }
}

