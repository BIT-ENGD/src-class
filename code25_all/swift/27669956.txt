import UIKit


class SearchResultsController: UITableViewController , UISearchResultsUpdating{

let sectionsTableIdentifier = "section identifier"
var products = [product]()
var filteredProducts = [product]()



override func viewDidLoad() {
    super.viewDidLoad()
    tableView.registerClass(UITableViewCell.self,
        forCellReuseIdentifier: sectionsTableIdentifier)
}


// MARK: - Table view data source
override func tableView(tableView: UITableView,
    numberOfRowsInSection section: Int) -> Int {
    return filteredProducts.count
}
override func tableView(tableView: UITableView,
    cellForRowAtIndexPath indexPath: NSIndexPath)
    -> UITableViewCell {
    let cell = tableView.dequeueReusableCellWithIdentifier(
    sectionsTableIdentifier) as UITableViewCell
    cell.textLabel!.text = filteredProducts[indexPath.row].name
    return cell }




// MARK: - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
 override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {
    if segue.identifier == "detailView"{
        let index = self.tableView?.indexPathForSelectedRow()
        var destinationViewController : infoViewController = segue.destinationViewController as infoViewController

        destinationViewController.Title  = filteredProducts[index!.row].title
        destinationViewController.eam  = filteredProducts[index!.row].energy
        destinationViewController.fam  = filteredProducts[index!.row].fat
        destinationViewController.pam  = filteredProducts[index!.row].protein
        destinationViewController.cam  = filteredProducts[index!.row].carbohydrates
        destinationViewController.imgName  = filteredProducts[index!.row].imgName

    }

}

func updateSearchResultsForSearchController(
    searchController: UISearchController) {
let searchString = searchController.searchBar.text
filteredProducts.removeAll()
        for prod in products{
            var name = prod.name.lowercaseString
            if name.rangeOfString(searchString) != nil {
                filteredProducts.append(prod)
            }
        }
 tableView.reloadData()
}}    

