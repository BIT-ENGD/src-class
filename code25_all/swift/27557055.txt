sleep (time)
test1
import UIKit
import Darwin
import CoreData

class RegisterEmail: UIViewController {

var test1: Bool?
var userID: String!

override func viewDidLoad() {
    super.viewDidLoad()
}

override func didReceiveMemoryWarning() {
    super.didReceiveMemoryWarning()
    // Dispose of any resources that can be recreated.
}

override func shouldPerformSegueWithIdentifier(identifier: String!, sender: AnyObject!) -> Bool {
    if identifier == "passEmail" {


        var appDel:AppDelegate = (UIApplication.sharedApplication().delegate as AppDelegate)

        var context:NSManagedObjectContext = appDel.managedObjectContext!

        var request = NSFetchRequest(entityName: "Users")

        request.returnsObjectsAsFaults = false

        var results: NSArray = context.executeFetchRequest(request, error: nil)!

        if(results.count > 0)
        {
            var res = results [0] as NSManagedObject

            userID = res.valueForKey("userID") as String

        }

        var query = PFUser.query()
        query.getObjectInBackgroundWithId(userID) {
            (User: PFObject!, error: NSError!) -> Void in
            if error == nil {
                //NSLog("%@", User)


                var checkEmail = User["emailVerified"] as Bool

                println(checkEmail)

                var appDel:AppDelegate = (UIApplication.sharedApplication().delegate as AppDelegate)

                var context:NSManagedObjectContext = appDel.managedObjectContext!         

                var newEmail = NSEntityDescription.insertNewObjectForEntityForName("Email", inManagedObjectContext: context) as NSManagedObject

                newEmail.setValue(checkEmail, forKey: "emailStatus")

                context.save(nil)

            } else {
                NSLog("%@", error)
            }


        }


        var appDel1:AppDelegate = (UIApplication.sharedApplication().delegate as AppDelegate)

        var context1:NSManagedObjectContext = appDel1.managedObjectContext!

        var request1 = NSFetchRequest(entityName: "Email")

        request1.returnsObjectsAsFaults = false

        var results1: NSArray = context1.executeFetchRequest(request1, error: nil)!

        if(results1.count > 0)
        {
            var res1 = results1 [0] as NSManagedObject

            test1 = res1.valueForKey("emailVerified") as Bool
        }

        else
        {
            println("No results")
        }

        println (test1) //NIL VALUE


        if (test1 == false) {

            let alert = UIAlertView()
            alert.title = "Error"
            alert.message = "The email you have provided has not been verified."
            alert.addButtonWithTitle("Dismiss")
            alert.show()

            return false
        }

        else {

            return true
        }
    }

    // by default, transition
    return true
}
}

