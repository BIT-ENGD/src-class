func finishContentEditingWithCompletionHandler(completionHandler: ((PHContentEditingOutput!) -> Void)!) {
  dispatch_async(dispatch_get_global_queue(CLong(DISPATCH_QUEUE_PRIORITY_DEFAULT), 0)) {
    let output = PHContentEditingOutput(contentEditingInput: self.input)
    output.adjustmentData = PHAdjustmentData(formatIdentifier:"virtualgs.retrocam", formatVersion:"1.0", data:nil)

    let jpegData = UIImageJPEGRepresentation(self.filterImage!, 1.0)
    jpegData.writeToURL(output.renderedContentURL, atomically: true)
    completionHandler?(output)
  }
}

