    var completionHandler: FBSessionStateHandler = {

        session, status, error in

        NSLog("token not cached");

        if error {

            // Login failed for some reason, so we notify the delegate.
            self.delegate.didFailOpenningSession?(self, withError: ErrorUtility.error(
                code: .FailedOpenningSession,
                withFacebookError: error
            ));

            // Don't proceed on errors
            return;
        }

        // Session is now open, we should notify the delegate
        self.delegate.didOpenSession?(self);
    };

    NSLog("here");

    // Open the session, prompting the user if necessary. This might send the application to the background
    if FBSession.openActiveSessionWithReadPermissions(["public_profile"], allowLoginUI: true, completionHandler: completionHandler) {

        NSLog("Token cached");

        // If we end up here, the session token must exist, so we now have an open session
        self.delegate.didOpenSession?(self);
    }

    here
    token not cached
    here

