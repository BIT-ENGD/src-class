var documentString: String {
    didSet {
        if self.delegate != nil {
            self.delegate?.documentContentDidChange()
        } else {
            println("no")
        }
    }
}

class ViewController: NSViewController, DocumentDelegate {

    @IBOutlet var codeView: NSTextView!
    var code: Document = Document()

    override func viewDidLoad() {
        super.viewDidLoad()
        self.code.delegate = self
        self.updateUI()                            
    }

    func documentContentDidChange() {
        self.updateUI()
    }

    func updateUI() {
        self.codeView.string = self.code.documentString
    }
}

println("no1")
self.code.delegate = self
