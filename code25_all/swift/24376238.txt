class FooClass {
    var success:AnyObject! -> Void
    var failure:NSError! -> Void

    init() {
        self.success = ({ object in })
        self.failure = ({ error in })
    }

    func request(success:(AnyObject! -> Void), failure:(NSError! -> Void)) {
        self.success = success
        self.failure = failure
    }
}

extension FooClass: NSURLConnectionDelegate, NSURLConnectionDataDelegate {
    func connection(connection: NSURLConnection!, didFailWithError error:NSError!) {
        println("Connection error: \(error)")
        self.failure(error)
    }
}

