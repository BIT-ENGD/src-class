var point = tapGesture.locationInView(self)
var position = closestPositionToPoint(point)
let range = tokenizer.rangeEnclosingPosition(position, withGranularity: .Word, inDirection: 1)
let word = textInRange(range)
println(word!)

var point = tapGesture.locationInView(self)
var position = closestPositionToPoint(point)
let range = tokenizer.rangeEnclosingPosition(position, withGranularity: .Word, inDirection: 1)

if range != nil {
  let location = offsetFromPosition(beginningOfDocument, toPosition: range!.start)
  let length = offsetFromPosition(range!.start, toPosition: range!.end)

  let attrRange = NSMakeRange(location, length)

  let attrText = attributedText.attributedSubstringFromRange(attrRange)


  let word = attributedText.attributedSubstringFromRange(attrRange)

  let isHashtag: AnyObject? = word.attribute("Hashtag", atIndex: 0, longestEffectiveRange: nil, inRange: NSMakeRange(0, word.length))
  let isAtMention: AnyObject? = word.attribute("Mention", atIndex: 0, longestEffectiveRange: nil, inRange: NSMakeRange(0, word.length))
  if isHashtag != nil {
    println("#\(word.string)")
  } else if isAtMention != nil {
    println("@\(word.string)")
  }
}

rangeEnclosingPosition
