 func writeValueBack(value: String) {
  self.label.text = value
}

println(self.label.text)

func writeValueBack(value: String) {
    dispatch_async(dispatch_get_main_queue(), { () -> Void in
        self.label.text = value
    })
}

protocol writeValueBackDelegate {
func writeValueBack(value: String)
}

//
//  ViewController.swift
//  DelegateTesting
//
//  Created by Alex Catchpole on 30/11/2014.
//  Copyright (c) 2014 Alex Catchpole. All rights reserved.
//

import UIKit

class ViewController: UIViewController, writeValueBackDelegate {
@IBOutlet weak var label: UILabel!
@IBOutlet weak var textField: UITextField!


override func viewDidLoad() {
    super.viewDidLoad()
}

override func didReceiveMemoryWarning() {
    super.didReceiveMemoryWarning()
    // Dispose of any resources that can be recreated.
}

override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {
    if segue.identifier == "MainSegue" {
        var vc = segue.destinationViewController as SecondViewController
        vc.labelText = textField.text
        vc.delegate = self
    }
}

func writeValueBack(value: String) {
    dispatch_async(dispatch_get_main_queue(), { () -> Void in
        self.label.text = value
    })
}


@IBAction func button(sender: AnyObject) {
    self.label.text = textField.text
}

@IBAction func segue(sender: AnyObject) {
    performSegueWithIdentifier("MainSegue", sender: self)

}

//
//  SecondViewController.swift
//  DelegateTesting
//
//  Created by Alex Catchpole on 30/11/2014.
//  Copyright (c) 2014 Alex Catchpole. All rights reserved.
//

import UIKit

class SecondViewController: UIViewController {
@IBOutlet weak var label: UILabel!
@IBOutlet weak var textField: UITextField!

var labelText: String!
var delegate: writeValueBackDelegate? = nil

override func viewDidLoad() {
    super.viewDidLoad()
    label.text = labelText

    // Do any additional setup after loading the view.
}

override func didReceiveMemoryWarning() {
    super.didReceiveMemoryWarning()
    // Dispose of any resources that can be recreated.
}
@IBAction func button(sender: AnyObject) {
    label.text = textField.text
}


@IBAction func segueBack(sender: AnyObject) {
    var editedText = label.text
    performSegueWithIdentifier("SecondSegue", sender: self)
    if (delegate != nil) {
        delegate?.writeValueBack(editedText)
        println("working")
    }
}
}

