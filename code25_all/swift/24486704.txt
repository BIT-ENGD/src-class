// View Controller

import UIKit

class ViewController: UIViewController,UIPopoverControllerDelegate {
    var popoverController : UIPopoverController? = nil
    @IBOutlet var bookName : UILabel
    var BookNameString : String?{
    didSet{
        configureView()
    }
    }

    func configureView() {
        // Update the user interface for the detail item.
        if let detail = self.BookNameString {
            if let label = bookName {
                label.text = detail
            }
        }
    }
    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
    }
    @IBAction func Click(sender : UIButton) {
        var tableView:TableViewController = TableViewController(style: UITableViewStyle.Plain)
        var popoverContent:UINavigationController = UINavigationController(rootViewController: tableView)
        self.popoverController = UIPopoverController(contentViewController: popoverContent)
        self.popoverController!.delegate = self
        self.popoverController!.presentPopoverFromRect(sender.frame, inView: self.view, permittedArrowDirections: UIPopoverArrowDirection.Any, animated: true)
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
}

// TableViewController

override func tableView(tableView: UITableView!, didSelectRowAtIndexPath indexPath: NSIndexPath!){

    var storyboard = UIStoryboard(name: "Main", bundle: nil)
    var details = storyboard.instantiateViewControllerWithIdentifier("ViewController") as ViewController


    var keyString = bookSectionKeys[indexPath.section]
    var bookValues = book.booksLetters[keyString]!
    var selectedBookString = bookValues[indexPath.row]
    var selectedBookValues = book.bookDictionary[selectedBookString]!

    details.BookNameString = selectedBookString


}

