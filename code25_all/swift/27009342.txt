// Top of FilterViewController
import UIKit
import CoreData

protocol FilterViewControllerDelegate: class {
    func filterViewController(filter: FilterViewController,
        didSelectPredicate predicate:NSPredicate?,
        sortDescriptor:NSSortDescriptor?)
}

// Predicates set here
// IBAction to trigger the segue
@IBAction func filter(sender: UIBarButtonItem) {

    delegate!.filterViewController(self,
        didSelectPredicate: selectedPredicate,
        sortDescriptor: selectedSortDescriptor)

    dismissViewControllerAnimated(true, completion:nil)
}


override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {

    if segue.identifier == "toDisplaySearchResults" {

        let navController = segue.destinationViewController as UINavigationController
        let filterVC = navController.topViewController as StretchSelectorViewController


        filterVC.coreDataStack = coreDataStack
        filterVC.delegate = self // **ERROR here
    }
}

