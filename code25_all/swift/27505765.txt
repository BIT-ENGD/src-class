class FacilitiesNewVC: UIViewController, RoomsDataProtocol {
    var data = NSMutableData()
    var roomsData = RoomsData()

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view.
        //Image Background

        roomsData.startConnection();
    }

    // Overriden Method (Not Called)
    func didFinishLoadingUrl(jsonResult:NSDictionary) -> Void{
        //This Method not getting called
        println("In View Controller")
    }
}

class RoomsData: NSObject, NSURLConnectionDelegate  {
    var data = NSMutableData()
    var callBack:RoomsDataProtocol?

    func startConnection(){
        let urlPath: String = "http://blue.genetechz.com/qadir/bed_room.php"
        var url: NSURL = NSURL(string: urlPath)!
        var request: NSURLRequest = NSURLRequest(URL: url)
        var connection: NSURLConnection = NSURLConnection(request: request, delegate: self, startImmediately: false)!

        println("startConnection");
        connection.start()
    }

    func connection(connection: NSURLConnection!, didReceiveData data: NSData!){
         self.data.appendData(data)
         println("connection");
    }

    func connectionDidFinishLoading(connection: NSURLConnection!) {
        println("connectionDidFinishLoading");

        var err: NSError
        var jsonResult: NSDictionary = NSJSONSerialization.JSONObjectWithData(data, options: NSJSONReadingOptions.MutableContainers, error: nil) as NSDictionary

        callBack?.didFinishLoadingUrl(jsonResult); // Call the Overriden Method in FacilitiesNewVC

        println("RoomsData")
    }
}

protocol RoomsDataProtocol {
    func didFinishLoadingUrl(jsonData:NSDictionary)
}

