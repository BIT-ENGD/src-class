class ViewModel {

let urlString = "https://s3.amazonaws.com/nxtapnxtap/clubsinfo.json"

var clubNames = [String]()
var smImg  = [UIImage]()
var lgImg = [String]()

func fetchItems(success: () -> ()) {
    let url = NSURL(string: urlString)
    let session = NSURLSession(configuration: NSURLSessionConfiguration.defaultSessionConfiguration())
    let task = session.dataTaskWithURL(url!) { (data, response, error) in
        var jsonError: NSError?
    let json = NSJSONSerialization.JSONObjectWithData(data, options: nil, error: &jsonError) as NSDictionary // Error here --> fatal error: unexpectedly found nil while unwrapping an Optional value

        if let unwrappedError = jsonError {
            println("jsonError: \(unwrappedError)")
        } else {
            self.clubNames = json.valueForKeyPath("entry.name.label") as [String]
            self.smImg = json.valueForKeyPath("entry.smimg.label") as [UIImage]
            self.lgImg = json.valueForKeyPath("entry.lgimg.label") as [String]
            success()
        }
    }
    task.resume()
}

