diff(log(myvar))
myvar
0
diff()
Inf
diff()
0
0
diff(log(c(0,1,2,3,4)))

0 0.6931472 0.4054651 0.2876821

0
Inf
> v = diff(log(c(1, 0, 0, 2, 3)))
> v 
[1]      -Inf       NaN       Inf 0.4054651
> is.infinite(v) 
[1]  TRUE FALSE  TRUE FALSE

v[is.nan(v)] = 0
