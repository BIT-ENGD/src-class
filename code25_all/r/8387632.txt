mtcars$hp
mtcars$am
data
mtcars
hp
am
mean
f <- function(x, data=NULL) {
    if (!missing(data)) {
        with(data, mean(x))
    } else {
        mean(x)
    }
}

> f(mtcars$hp)
[1] 146.69

with
> f(hp, mtcars)
Error in with(d, mean(x)) : object 'hp' not found

> with(mtcars, mean(hp))
[1] 146.69

substitute
deparse
