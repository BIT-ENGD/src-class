library(quantmod)
library(tseries)
library(timeDate)

symbols <- read.csv("sp500.csv", header = F, stringsAsFactors = F)
nrStocks <- length(symbols[,1])

z <- zoo()
for (i in 1:nrStocks) {
  cat("Downloading ", i, " out of ", nrStocks , "\n")
  x <- get.hist.quote(instrument = symbols[i,], start = dateStart,
    quote = "AdjClose", retclass = "zoo", quiet = T)
  z <- merge(z, x)
}

Error in download.file(url, destfile, method = method, quiet = quiet) : 
  cannot open URL 'http://chart.yahoo.com/table.csv?s=MFE&a=0&b=01&c=2008&d=8&e=12&f=2011&g=d&q=q&y=0&z=MFE&x=.csv'
In addition: There were 50 or more warnings (use warnings() to see the first 50)

In merge.zoo(z, x) : Index vectors are of different classes: numeric Date

