d = data.frame(sex=c("m","f","m","m","f","f"), age=c(30,20,15,50,10,40), weight=c(130,120,115,150,90,180))
ddply(d, .(sex), function(df) data.frame(age_mu = mean(df$age)))

ddply(d, .(sex), age_mu = mean(age))

ddply(d, .(sex), transform, age_mu = mean(age))

