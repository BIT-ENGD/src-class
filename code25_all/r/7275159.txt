xc <- split(x, ind)
yc <- split(y, ind)
for (i in 1:length(yc)) {
    plot(xc[[i]], yc[[i]])
    abline(lsfit(xc[[i]], yc[[i]]))
}

for(i in 1:length(yc)) { ...
1:0
if(length(yc)) for(i in 1:length(yc)) { ...
