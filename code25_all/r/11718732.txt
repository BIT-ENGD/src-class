id<-c(1,2,3,4)
x<-c(0,2,1,0)
A<-c(1,3,4,3)
df<-data.frame(id,x,A)

value
value
id
value <- df$A + as.numeric(df$x > 0)*(1/df$x)

[1] 1 3.5 5.0 3

 [1] NaN 3.5 5.0 NaN  

