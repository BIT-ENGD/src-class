y <- new.env()
with(y, x <- 1)
f <- function(env,z) {
    with(env, x+z)
}
f(y,z=1)

Error in eval(expr, envir, enclos) : object 'z' not found

