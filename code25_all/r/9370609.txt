test.R
#!/usr/bin/env Rscript
while(length(line <- readLines('stdin', n=1, warn=FALSE)) > 0) {
  write(line, stderr())
  # process line
}

input
aaaaaa
bbbbbb
cccccc
dddddd
eeeeee
ffffff

cat input | test.R

aaaaaa

