@echo on
setlocal enableextensions enabledelayedexpansion

PUSHD "F:\Solutions\GND\Documents\Design\html\ValTest"
For %%X in (*.html) do 
(
    "C:\Program Files\HTMLValidator100\cmdlineprocessor"  -outputfile output.txt   -r1 %%X

    SET HTML_VAL_ERROR=!ERRORLEVEL!
    echo !HTML_VAL_ERROR!

    type output.txt >> result.txt
    IF !HTML_VAL_ERROR! GEQ 1 
    (
        SET HTML_VAL_ERROR = 1 
        GOTO :EOF
    )
)

POPD
EndLocal
:EOF

 EXIT !HTML_VAL_ERROR!

