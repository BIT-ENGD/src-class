 $(document).everyTime("3s", function() {
      $.get('uploadProgressServlet.jsp', {queue : 'parse'}, function(data){           
            <!-- Do something -->
      }
 });

var lock = false;
var processing = false;
//$('#continue').click(function(){

    $('#dialog').dialog({
        modal : true,
        closeOnEscape : false,
        open: function() {

            $('#queueDiv').hide();
            $('#progressDiv').hide();
            $(".ui-dialog-titlebar-close").hide();

            //Poll place in the queue every seconds
            $(document).everyTime("1s", function() {
                if(!lock) {
                    lock = true;
                    if(!processing) {
                        $.get('uploadProgressServlet.jsp', {queue : 'parse'}, function(data){
                            $('#queueDiv').show();
                            $('#queuePlace').replaceWith(data);
                            if(data <= 0) {
                                processing = true;
                                $('#queueDiv').hide();
                                $('#progressDiv').show();
                                $('#progressBar').progressbar({
                                    value: 0
                                });
                            }
                        });
                    }
                    else {
                        $.get('uploadProgressServlet.jsp', {process : 'parse'}, function(data){
                            $('#progressBar').progressbar({
                                value: parseInt(data == -1 ? 0 : data)
                            });
                        });
                    }
                    lock = false;
                }
            });
        }});
    });

