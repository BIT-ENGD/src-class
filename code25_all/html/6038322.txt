<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
    <mx:VideoDisplay id="va" source="http://imgproc.apmath.spbu.ru:4773/robot669394444.flv?action=read" autoPlay="true"  metadataReceived="doHust()" left="10" right="10" top="10" bottom="38"/>
    <mx:TextArea bottom="10"  text="" height="20" right="10" left="10" id="ta"/>
    <mx:Script>
        <![CDATA[
    public function doHust():void
        {
        ta.text = va.totalTime.toString() + " " + va.source.toString() + " " + va.playheadTime.toString() + " Build By Cloud Forever team in 2011 for testing Bada 1.2 (Samsung Wave II) flash capabileties in browser. Build for FP 9.0.124";  
        } 
            ]]>
    </mx:Script>
</mx:Application>

    import flash.display.Sprite;
    import flash.events.NetStatusEvent;
    import flash.events.SecurityErrorEvent;
    import flash.media.Video;
    import flash.net.NetConnection;
    import flash.net.NetStream;
    import flash.events.Event;

    var videoURL:String = "http://imgproc.apmath.spbu.ru:4773/robot669394444.flv?action=read";
    var connection:NetConnection;
    var stream:NetStream;
    var video:Video = new Video();        

    function main() {
        connection = new NetConnection();
        connection.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
        connection.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
        connection.connect(null);
    }

    function netStatusHandler(event:NetStatusEvent):void {
        switch (event.info.code) {
            case "NetConnection.Connect.Success":
                connectStream();
                break;
            case "NetStream.Play.StreamNotFound":
                trace("Stream not found: " + videoURL);
                break;
        }
    }

    function securityErrorHandler(event:SecurityErrorEvent):void {
        trace("securityErrorHandler: " + event);
    }

    function connectStream():void {
        var stream:NetStream = new NetStream(connection);
        stream.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
        stream.client = {};
        stream.client.onMetaData = l_onMetaData;
        stream.client.onCuePoint = l_onCuePoint;
        video.attachNetStream(stream);
        stream.play(videoURL);
        addChild(video);
    }

    function l_onMetaData(info:Object):void {
        trace("metadata: duration=" + info.duration + " width=" + info.width + " height=" + info.height + " framerate=" + info.framerate);
        video.width = info.width;
        video.height = info.height;
    }

    function l_onCuePoint(info:Object):void {
        trace("cuepoint: time=" + info.time + " name=" + info.name + " type=" + info.type);
    }

main();

WideoWid.contentPath = "http://imgproc.apmath.spbu.ru:4773/robot669394444.flv?action=read";
WideoWid.play();

