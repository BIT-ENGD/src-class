- (IBAction)toggleFavorite {
    DataManager *data = [DataManager sharedDataManager];
    NSMutableSet *favorites = data.favorites;

    if (thisEvent.isFavorite == YES) {
        NSLog(@"Toggling off");
        thisEvent.isFavorite = NO;
        [favorites removeObject:thisEvent.guid];
        [favoriteIcon setImage:[UIImage imageNamed:@"notFavorite.png"] forState:UIControlStateNormal];
    }
    else {
        NSLog(@"Toggling on, adding %@", thisEvent.guid);
        thisEvent.isFavorite = YES;
        [favorites addObject:thisEvent.guid];
        [favoriteIcon setImage:[UIImage imageNamed:@"isFavorite.png"] forState:UIControlStateNormal];
    }
    NSLog(@"favorites array now contains %d members", [favorites count]);
}

2010-05-13 08:24:32.946 MyApp[924:207] Toggling on, adding 05db685f65e2
2010-05-13 08:24:32.947 MyApp[924:207] favorites array now contains 0 members
2010-05-13 08:24:33.666 MyApp[924:207] Toggling off
2010-05-13 08:24:33.666 MyApp[924:207] favorites array now contains 0 members
2010-05-13 08:24:34.060 MyApp[924:207] Toggling on, adding 05db685f65e2
2010-05-13 08:24:34.061 MyApp[924:207] favorites array now contains 0 members
2010-05-13 08:24:34.296 MyApp[924:207] Toggling off
2010-05-13 08:24:34.297 MyApp[924:207] favorites array now contains 0 members

#import <Foundation/Foundation.h>

@interface DataManager : NSObject {
    NSMutableArray *eventList;
    NSMutableSet *favorites;
}

@property (nonatomic, retain) NSMutableArray *eventList;
@property (nonatomic, retain) NSMutableSet *favorites;

+(DataManager*)sharedDataManager;

@end

#import "DataManager.h"

static DataManager *singletonDataManager = nil;

@implementation DataManager

@synthesize eventList;
@synthesize favorites;

+(DataManager*)sharedDataManager {
    @synchronized(self) {
        if (!singletonDataManager) {
            singletonDataManager = [[DataManager alloc] init];
        }
    }
    return singletonDataManager;
}

- (DataManager*)init {
    if (self = [super init]) {
        eventList = [[NSMutableArray alloc] init];
        favorites = [[NSMutableSet alloc] init];
    }
    return self;
}

#import "DataManager.h"

static DataManager *singletonDataManager = nil;

@implementation DataManager

@synthesize eventList;
@synthesize favorites;

+(DataManager*)sharedDataManager {
    @synchronized(self) {
        if (!singletonDataManager) {
            singletonDataManager = [[DataManager alloc] init];
        }
    }
    return singletonDataManager;
}

- (DataManager*)init {
    if (self = [super init]) {
        eventList = [[NSMutableArray alloc] init];
        favorites = [[NSMutableSet alloc] init];
    }
    return self;
}


#pragma mark -
#pragma mark Data management functions

- (void)addToFavorites:(NSString *)guid
{
    [self.favorites addObject:guid];
    NSLog(@"Item added--we now have %d faves.", [favorites count]);
}

- (void)removeFromFavorites:(NSString *)guid
{
    [favorites removeObject:guid];
    NSLog(!"Item removed--we now have %d faves.", [self.favorites count]);
}


@end

[[DataManager sharedManager] addToFavorites:Event.guid]
2010-05-13 13:25:52.396 EverWondr[8895:207] Toggling on, adding 05db685f65e2
2010-05-13 13:25:52.397 EverWondr[8895:207] Item added--we now have 0 faves.
2010-05-13 13:25:52.398 EverWondr[8895:207] favorites array now contains 0 members
2010-05-13 13:25:53.578 EverWondr[8895:207] Toggling off
2010-05-13 13:25:53.579 EverWondr[8895:207] favorites array now contains 0 members

