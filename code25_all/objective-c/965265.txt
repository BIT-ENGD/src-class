+ (BOOL)isSelectorExcludedFromWebScript:(SEL)aSelector
{
// For security, you must explicitly allow a selector to be called from JavaScript.

if (aSelector == @selector(showMessage:)) {
    return NO; // i.e. showMessage: is NOT _excluded_ from scripting, so it can be called.
}

return YES; // disallow everything else
}

- (void)showMessage:(NSString *)message
{
    // This method is called from the JavaScript "onClick" handler of the INPUT element 
    // in the HTML. This shows you how to have HTML form elements call Cocoa methods.

  DOMDocument *myDOMDocument = [[webView mainFrame] DOMDocument];     // 3
  DOMElement *contentTitle = [myDOMDocument getElementById:@"TexTest"];   // DOM
  message = [[contentTitle firstChild] nodeValue];                                            // lines

  NSRunAlertPanel(@"Message from JavaScript", message, nil, nil, nil);
}

<body> 
  <h1 id="contentTitle">Some kind of title</h1>
  <div id="main_content"> 
    <p>Some content</p> 
    <p>Some more content</p> 
  </div> 
  <div>
    <input id="TexTest" value=" " type="text">
  </div> 
  <div>
    <input id="message_button" value="Show Message" onclick="window.AppController.showMessage_('Hello there...');" type="button">
  </div>
</body>

