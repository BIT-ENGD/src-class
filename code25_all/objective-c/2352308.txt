#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>


@interface Preferences : NSObject {
 NSString *username;

}

-(void)loadPreferences;

@property(nonatomic,retain) NSString *username;

@end

#import "Preferences.h"
@implementation Preferenes

@synthesize username;

-(void)loadPreferences{
     username=@"MyUser";
}

-(void) dealloc {
 [username release];
}
@end

#import <UIKit/UIKit.h>

@interface MainDelegate : NSObject <UIApplicationDelegate> {

   ...

  Preferences *prefs;
}

@property(retain,nonatomic) Preferences *prefs;

#import "MainDelegate.h"
#import "Preferences.h";

@implementation MainDelegate

@synthesize prefs;

- (void)applicationDidFinishLaunching:(UIApplication *)application {    
     prefs=[[Preferences alloc] init];
     NSLog(@"Username: %@",prefs.username); // THIS WORKS 
}

MainDelegate *delegate = (MainDelegate*) [[UIApplication sharedApplication] delegate];
Preferences *prefs=delegate.prefs;
// This works...

NSLog(@"The Username is: %@",prefs.username);
// CRASH

