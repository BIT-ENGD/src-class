
@interface LectureModel : NSMutableDictionary
{
}

-(NSString*)title;
-(NSDate*)begin;

...

@end

setValue:forKey:

+ (NSArray*)findBySQL:(NSString*)sql intoModelClass:(Class)modelClass
{
  NSMutableArray* models = [[[NSMutableArray alloc] init] autorelease];

  sqlite3* db = sqlite3_open(...);

  sqlite3_stmt* result = NULL;
  sqlite3_prepare_v2(db, [sql UTF8String], -1, &result, NULL);

  while(sqlite3_step(result) == SQLITE_ROW)
  {
    id modelInstance = [[modelClass alloc] init];

    for (int i = 0; i < sqlite3_column_count(result); ++i)
    {
      NSString* key = [NSString stringWithUTF8String:sqlite3_column_name(result, i)];
      NSString* value = [NSString stringWithUTF8String:(const char*)sqlite3_column_text(result, i)];

      if([modelInstance respondsToSelector:@selector(setValue:forKey:)])
        [modelInstance setValue:value forKey:key];
    }

    [models addObject:modelInstance]; 
  }
  sqlite3_finalize(result);
  sqlite3_close(db);

  return models;
}

respondsToSelector:
[modelInstance setValue:value forKey:key]
