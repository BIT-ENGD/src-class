#import "BabyNameViewController.h"

@implementation BabyNameViewController


NSDictionary *dictionary;
NSString *name;

int nameCount = 0;
int RecordIndex = 0;


- (void)ShowNextname;
{
    NSString *path = [[NSBundle mainBundle] bundlePath];
    NSString *finalPath = [path stringByAppendingPathComponent:@"Dictionary.plist"];
    NSArray* plistArray = [NSArray arrayWithContentsOfFile:finalPath];

    // Generate a random number between 0 and (the number of records-1) - used as a random index!

    RecordIndex=arc4random()%[plistArray count];


    // Select and display currently selected record from the array.
    dictionary = [plistArray objectAtIndex:RecordIndex];
    name = [dictionary objectForKey:@"name"];

    [nameLabelOutlet setText: [NSString stringWithFormat: @"Random Baby Name is: %@", name]];

}   

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

// Initial App entry point - startup code..


// Open the dictionary to count the number of names and store it for later use.
NSString *path = [[NSBundle mainBundle] bundlePath];
NSString *finalPath = [path stringByAppendingPathComponent:@"Dictionary.plist"];
NSArray* plistArray = [NSArray arrayWithContentsOfFile:finalPath];
nameCount = [plistArray count];

// Generate random name from database   
[self ShowNextname];

// Start up the nameUpdate timer.
[NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(nameUpdate) userInfo:nil repeats:YES];

-(void) nameUpdate {
    [self ShowNextname];
}

