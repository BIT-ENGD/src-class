//
//  Rate.h
//  Currency Converter
//
//  Created by Matthew Spence on 08/06/2010.
//  Copyright 2010 __MyCompanyName__. All rights reserved.
//

#import <Cocoa/Cocoa.h>


@interface Rate : NSObject {
NSString* code;
NSString* description;
float rate;
}
- (id)init;
- (id)initTest;
- (id)initWithCode:(NSString*)code description:(NSString*)description  rate:(float)rate;
@property(retain) NSString* code;
@property(retain) NSString* description;
@property(readwrite) float rate;
@end

//
//  Rate.m
//  Currency Converter
//
//  Created by Matthew Spence on 08/06/2010.
//  Copyright 2010 __MyCompanyName__. All rights reserved.
//

#import "Rate.h"


@implementation Rate
@synthesize code;
@synthesize description;
@synthesize rate;
- (id)init {
return self;
}

- (id)initTest {
return self;
}

- (id)initWithCode:(NSString*)codeA description:(NSString*)descriptionA  rate:(float)rateA {
self.code = codeA;
self.description = descriptionA;
self.rate = rateA;
[self init];
return self;
}
@end

//
//  ExchangeRates.m
//  Currency Converter
//
//  Created by Matthew Spence on 02/06/2010.
//  Copyright 2010 __MyCompanyName__. All rights reserved.
//

#import "ExchangeRates.h"
#import "SynthesizeSingleton.h"
#import "Rate.h"
#import "NSString+CVS.h"


@implementation ExchangeRates
@synthesize matrix;
synthesize_singleton(ExchangeRates);
- (id)init {

self = [super init];
self.matrix = [NSMapTable init];
    if (self) {
    NSError *error = nil;
    NSString *matrixString = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://rss.timegenie.com/forex.txt"] encoding:NSUTF8StringEncoding error:&error];
    NSArray *matrixArray = [matrixString csvRows];
    for(NSArray *rateArray in matrixArray) {
        Rate *rate = [Rate initWithCode:[rateArray objectAtIndex:0] description:[rateArray objectAtIndex:1] rate:[rateArray objectAtIndex:2]];
        [self.matrix setObject:rate forKey:[rateArray objectAtIndex:0]] ;
        NSLog(@"my ns string = %@", [rateArray objectAtIndex:0]);
    }
    }

    return self;
}
@end

Rate *rate = [Rate initWithCode...

'Rate' may not respond to '+initWithCode:description:rate:'

