(*usbInterfaceInterface)->WritePipeTO()
*(usbInterfaceInterface))->ReadPipeAsyncTO()
USBDoneProc()
StartScan()
WaitForScan()

StartScan()
WritePipeTO
ReadPipeAsyncTO
WaitForScan()
while (deviceActive) {
    EventRecord event;
    GetNextEvent(0,&event);
    if (gDataPtr != saveDataPtr) { // more data up the timeout    
        timeoutTicks = TickCount() + 60 * 60;
        saveDataPtr = gDataPtr;
    }
    if (TickCount() > timeoutTicks) {
        deviceActive = false;
    }
}

USBDoneProc
GetNextEvent()
USBDoneProc
USBDoneProc
thanks.

