@implementation JM_UIScrollView

- (BOOL)touchesShouldBegin:(NSSet *)touches withEvent:(UIEvent *)event inContentView:(UIView *)view
{
    NSSet *allTouches = [event allTouches];
    NSLog(@"Checking for touches: %d", [allTouches count]);

    if ([allTouches count] == 1) {
        return YES;
    }

    return NO;  
}

@end

@implementation JM_UIImageView
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSSet *allTouches = [event allTouches];

    if ([allTouches count] == 0)
        return;

    UITouch *firstTouch = [[allTouches allObjects] objectAtIndex: 0];

    CGPoint touchLoc = [firstTouch locationInView: [self superview]];

    touchOffset= CGPointMake(touchLoc.x-self.center.x,touchLoc.y-self.center.y);
    NSLog(@"Currently at: %3.3f x %3.3f", touchLoc.x, touchLoc.y);

}


- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event { 
    NSSet *allTouches = [event allTouches];

    if ([allTouches count] == 0)
        return;

    UITouch *firstTouch = [[allTouches allObjects] objectAtIndex: 0];
    CGPoint touchLoc = [firstTouch locationInView: [self superview]];

    if ([allTouches count] == 1)
    {           
        if ([firstTouch view] == self)
        {

            touchLoc.x -= touchOffset.x;
            touchLoc.y -= touchOffset.y;

            NSLog(@"Moved to: %3.3f x %3.3f", touchLoc.x, touchLoc.y);
            self.center = touchLoc;
        }       
    }       
}

@end

scrollView = [[JM_UIScrollView alloc] initWithFrame: [[UIScreen mainScreen] bounds]];   
scrollView.delegate = self;
scrollView.bouncesZoom = YES;
scrollView.scrollEnabled = NO;
scrollView.backgroundColor = [UIColor redColor];

scrollView.clipsToBounds = YES;     

UIImage *image = [UIImage imageNamed:@"berg.jpg"];
imageView = [[JM_UIImageView alloc] initWithFrame: CGRectMake(0, 0, 140, 230)];
imageView.image = image;
imageView.center = CGPointMake(200,300);
[imageView setUserInteractionEnabled: YES];

[scrollView addSubview: imageView];

scrollView.contentSize = CGSizeMake(140,230);

scrollView.minimumZoomScale = 0.2;
scrollView.maximumZoomScale = 1.1;

[window addSubview: scrollView];
// Override point for customization after application launch
[window makeKeyAndVisible];

