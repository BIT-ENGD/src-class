@implementation AppController

-(IBAction)openTheOpenPanel:(id)sender
{
    NSOpenPanel *openThePanel = [NSOpenPanel openPanel];
    [openThePanel setAllowsMultipleSelection:YES];

    if([openThePanel runModal] == NSOKButton)
    {
        NSArray *allTheFiles = [openThePanel filenames];    

        int theNumberOfFiles = [allTheFiles count];

        int i;

        NSMutableDictionary * theDict;
        theDict = [[NSMutableDictionary alloc] init];

        for (i=0; i < theNumberOfFiles; i++) {
            NSString *thisFile = [allTheFiles objectAtIndex:i];
            NSString *theFileNum = [NSString stringWithFormat:@"%i", i];

            [theDict setObject:thisFile forKey:theFileNum]; 
        }

        [theDict writeToFile:@"/tmp/test_file.txt" atomically:YES];

        [theDict release];
    }
}

@end

