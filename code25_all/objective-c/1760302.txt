@implementation AddEventViewController
@synthesize backgroundColor, nameField, dateField, datePicker, eventName, eventDate;

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.view.backgroundColor = self.backgroundColor;   
}

- (void)viewDidLoad 
{
    [super viewDidLoad];
    dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle]; 
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];


    CGSize size = self.view.bounds.size;
    CGRect frame = CGRectMake(0, size.height - 216, 320, 216);
    datePicker = [[UIDatePicker alloc] initWithFrame: frame];
    datePicker.datePickerMode = UIDatePickerModeDate;
    datePicker.hidden = YES;
    datePicker.date = [NSDate date];
    [datePicker addTarget:self
                   action:@selector(changeDateInLabel:)
         forControlEvents:UIControlEventValueChanged];

    [self.view addSubview: datePicker];
}
- (void)didReceiveMemoryWarning 
{
    [super didReceiveMemoryWarning];
}

-(IBAction)doneButton
{
    if ((nameField.text != nil))
    {
        self.eventName = nameField.text;
        self.eventDate = datePicker.date;
        [[NSNotificationCenter defaultCenter]postNotificationName:@"EventAddDone" object:nil];
    }
    else
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Enter Event Name" message:nil delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil];
        [alertView show];
        [alertView release];
    }   
}

-(IBAction)cancelButton
{
    [[NSNotificationCenter defaultCenter]postNotificationName:@"EventAddCancel" object:nil];

}
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
}

- (void)changeDateInLabel:(id)sender
{
    dateField.text = [dateFormatter stringFromDate:[datePicker date]];
}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
{
    if(textField == dateField)
    {
        dateField.placeholder = @" ";
        dateField.text = [dateFormatter stringFromDate:[datePicker date]];
        datePicker.hidden = NO; 
        [nameField resignFirstResponder];
        return NO;
    }
    return YES;
}

- (void)dealloc 
{
    self.backgroundColor = nil;
    self.nameField = nil;
    self.dateField = nil;
    self.datePicker = nil;
    self.eventName = nil;
    self.eventDate = nil;
    [dateFormatter release];
    [super dealloc];
}
@end

NSTimeInterval age = [enteredDate timeIntervalSinceNow];
//do some math on the age variable to get number of days since the event occurred. 

