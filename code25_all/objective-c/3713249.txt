
-(void)drawRect:(CGRect)rect{
    CGContextBeginPath(context);
    CGContextSetLineWidth(context, 10.0);
    float glowWidth = 10.0;
    float colorValues[] = {0.4,0.4,0.4,1.0};
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGColorRef glowColor = CGColorCreate(colorspace, colorValues);
    CGContextSetShadowWithColor(context, CGSizeMake(0.0, 0.0), glowWidth, glowColor);
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetStrokeColorWithColor(context,[UIColor blackColor].CGColor);
    GContextMoveToPoint(context, snake.tail_x,snake.tail_y);
    for (int i = 0; i < [snake.bends count]; i++) {
        NSData *bend_dir_value = [snake.bend_direction objectAtIndex:i];
        Direction bend_dir = * (Direction *)[bend_dir_value bytes];
        NSData *bend_value = [snake.bends objectAtIndex:i];
        CGPoint bend_point = * (CGPoint * )[bend_value bytes];
        if (bend_dir == kEastIn || bend_dir == kWestIn || bend_dir == kNorthIn || bend_dir == kSouthIn) {
                   CGContextMoveToPoint(context, bend_point.x, bend_point.y);
        }
        else {
                   CGContextAddLineToPoint(context, bend_point.x, bend_point.y);
        }
    }
CGContextAddLineToPoint(context, snake.head_x, snake.head_y);
}

