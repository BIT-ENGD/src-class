if ([window isVisible]) {
   [NSApp activateIgnoringOtherApps:YES];
   [window orderOut:nil]; 
   return;
} 
[NSApp activateIgnoringOtherApps:YES];
[window makeKeyAndOrderFront:nil];
return;

