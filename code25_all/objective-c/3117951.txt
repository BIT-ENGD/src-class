
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {


//nonvalid
if (signbit(newLocation.horizontalAccuracy))
    return;

//0.0 is no valid location here
if ((abs(newLocation.coordinate.latitude) < 1.0e-05) || (abs(newLocation.coordinate.longitude) < 1.0e-05))
    return;

if (newLocation.horizontalAccuracy > DBL_MAX)
    return;


@synchronized(self)
{
    currentCoordinate.latitude = newLocation.coordinate.latitude;
    currentCoordinate.longitude = newLocation.coordinate.longitude;
}



//nonvalid
if (signbit(newLocation.horizontalAccuracy))
    return;

//0.0 is no valid location here
if ((abs(newLocation.coordinate.latitude) < 1.0e-05) || (abs(newLocation.coordinate.longitude) < 1.0e-05))
    return;

if (newLocation.horizontalAccuracy > DBL_MAX)
    return;


@synchronized(self)
{
    currentCoordinate.latitude = newLocation.coordinate.latitude;
    currentCoordinate.longitude = newLocation.coordinate.longitude;
}

}

