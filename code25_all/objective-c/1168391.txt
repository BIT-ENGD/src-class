FILE *file = fopen([gpsFilePath UTF8String], "r");
char c[1024];

while(fgets(c, 1024, file)!=NULL)
{
    NSString *cString = [[NSString alloc] initWithCString:c
                                                 encoding:NSMacOSRomanStringEncoding];

    NSArray *split = [cString componentsSeparatedByString:@","];
    if ([split count] != 3)
    {
        continue; //this should only happen on the first line
    }

    gpx = [gpx stringByAppendingString:[NSString stringWithFormat:@"      <trkpt lat=\"%@\" lon=\"%@\"></trkpt>\n\n", [split objectAtIndex:0], [split objectAtIndex:1]]];
 }

