- (void) awakeFromNib
{
    ld = [[LayerToDisplay alloc] init];
    ld.frame = self.frame;
    [self.layer addSublayer:ld];
    [ld setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextBeginPath(context);
    CGContextSetRGBStrokeColor(context, 255/255.0, 0/255.0, 0/255.0, 1);
    CGContextSetLineWidth(context, 1);

    CGContextMoveToPoint(context, 0, 0);
    CGContextAddLineToPoint(context, 320, 460);
    CGContextAddLineToPoint(context, 0, 460);
    CGContextAddLineToPoint(context, 320, 0);

    CGContextClosePath(context);
    CGContextStrokePath(context);
}

- (void)drawInContext:(CGContextRef)context
{
    CGContextBeginPath(context);

    CGContextSetRGBStrokeColor(context, 0/255.0, 255/255.0, 0/255.0, 1);
    CGContextSetLineWidth(context, 1);

    CGFloat dashes[]={3,6};
    CGContextSetLineDash(context, 0, dashes, 3);

    CGContextMoveToPoint(context, 0, 0);
    CGContextAddLineToPoint(context, 320, 460);
    CGContextAddLineToPoint(context, 0, 460);
    CGContextAddLineToPoint(context, 320, 0);

    CGContextClosePath(context);
    CGContextStrokePath(context);
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    ViewToDisplay *vd = [[ViewToDisplay alloc] init];
    // doesn't seem to matter
    //[vd setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
    vd.frame = [UIScreen mainScreen].applicationFrame;
    // call manually so that the layer gets created
    [vd awakeFromNib]; 
    [window addSubview:vd]; 

    //[window addSubview:viewController.view];
    [window makeKeyAndVisible];

    return YES;
}

