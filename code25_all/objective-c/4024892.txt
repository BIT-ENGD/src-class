<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    ...
    <key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLName</key>
            <string>My test URL</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>mytesturl</string>
            </array>
        </dict>
    </array>
     ...
</dict>
</plist>

#import <Cocoa/Cocoa.h>
#include <stdio.h>

@interface Test : NSObject
{
}
- (void)test;
- (void)handleEvent:(NSAppleEventDescriptor *)event withReplyEvent:(NSAppleEventDescriptor *)replyEvent; 
@end

@implementation Test
- (void)test
{
    NSLog(@"Started..."); 
    char c; 
    scanf("%c", &c); 
}

- (void)handleEvent:(NSAppleEventDescriptor *)event withReplyEvent:(NSAppleEventDescriptor *)replyEvent
{
    NSURL *url = [NSURL URLWithString:[[event paramDescriptorForKeyword:keyDirectObject] stringValue]];
    NSLog(@"url = %@", url); 
}
@end

int main(int argc, char *argv[])
{
    Test *app=[[Test alloc] init];
    [[NSAppleEventManager sharedAppleEventManager] setEventHandler:app andSelector:@selector(handleEvent:withReplyEvent:) forEventClass:kInternetEventClass andEventID:kAEGetURL];

    [app test];

    return 0;   
}

