WITH
SELECT
FROM
reservation
reservation_detail
reservation_id
reservation_detail
quantity
ticket_type
ticket_type
CREATE TABLE 
    tmp
SELECT 
    t.reservation_id, 
    t.ticket_type, 
    COALESCE(rd.quantity,0) AS qty
FROM (
    SELECT *
    FROM 
        (ticket_type tt, reservation r)
    ) t
LEFT JOIN 
    reservation_detail rd 
    ON 
        t.reservation_id = rd.reservation_id 
    AND 
        t.ticket_type = rd.ticket_type;

reservation_id
ticket_type
qty
+----------------+-------------+------+
| reservation_id | ticket_type | qty  |
+----------------+-------------+------+
|              1 | ADULT       |    2 | 
|              1 | CHILD       |    2 | 
|              1 | INFANT      |    0 | 
|              2 | ADULT       |    1 | 
|              2 | CHILD       |    0 | 
|              2 | INFANT      |    0 | 
|              3 | ADULT       |    1 | 
|              3 | CHILD       |    0 | 
|              3 | INFANT      |    0 | 
+----------------+-------------+------+

SELECT 
    t1.reservation_id, 
    t1.qty AS num_adults, 
    t2.qty AS num_children, 
    t3.qty AS num_infants
FROM 
    tmp t1
LEFT JOIN 
    tmp t2 
    ON 
        t1.reservation_id = t2.reservation_id
LEFT JOIN 
    tmp t3 
    ON 
        t2.reservation_id = t3.reservation_id
WHERE 
    t1.ticket_type = 'ADULT'
AND 
    t2.ticket_type = 'CHILD'
AND 
    t3.ticket_type = 'INFANT';

+----------------+------------+--------------+-------------+
| reservation_id | num_adults | num_children | num_infants |
+----------------+------------+--------------+-------------+
|              1 |          2 |            2 |           0 | 
|              2 |          1 |            0 |           0 | 
|              3 |          1 |            0 |           0 | 
+----------------+------------+--------------+-------------+

