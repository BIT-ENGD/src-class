SQL Server 2005
        INSERT INTO Tags.tblSubjectTopic
            (SubjectId, TopicId)
            VALUES(@SubjectId, @@IDENTITY)
      COMMIT TRAN
END TRY

BEGIN CATCH
        DECLARE @Error VARCHAR(1000)
        SET @Error= 'ERROR NO : '+ERROR_NUMBER() + ', LINE NO : '+ ERROR_LINE() + ', ERROR MESSAGE : '+ERROR_MESSAGE()
        PRINT @Error
        ROLLBACK TRAN
END CATCH

        INSERT INTO Tags.tblSubjectTopic
            (SubjectId, TopicId)
            VALUES(@SubjectId, @@IDENTITY)
   COMMIT TRAN
END TRY

BEGIN CATCH
        DECLARE @Error VARCHAR(1000)
        SET @Error= 'ERROR NO : '+ERROR_NUMBER() + ', LINE NO : '+ ERROR_LINE() + ', ERROR MESSAGE : '+ERROR_MESSAGE()
        PRINT @Error
        ROLLBACK TRAN
END CATCH

Begin TRAN
Rollback
Commit
Rollback
Rollback
Begin Tran
