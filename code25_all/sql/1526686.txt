<cfparam name="URL.Category" default="1">

<cfquery name="rs_category" datasource="Database">
SELECT DISTINCT category
FROM tblcategory 
</cfquery>

<cfquery name="rs_subcategory" datasource="Database">
<cfif category eq 1>
SELECT *
FROM tblcategory
<cfelse>
SELECT *
FROM tblcategory
WHERE Category = <cfqueryparam value="#URL.Category#" cfsqltype="cf_sql_clob" maxlength="50"> 
</cfif>
</cfquery>


<body>

 <cfoutput query="rs_category"><a href="dynamic.cfm?category=#rs_category.category#">#rs_category.category#</a><br />
</cfoutput> 


<br />
<cfoutput query="rs_subcategory">#rs_subcategory.Subcategory#<br />
</cfoutput>
<br />


</body>
</html>

