CREATE TABLE `listman_list` (
    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
    `title` varchar(100) NOT NULL,
    `description` varchar(1000) NOT NULL,
    `id_counter` integer UNSIGNED NOT NULL
)

CREATE TABLE `listman_listitem` (
    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
    `number` integer UNSIGNED NOT NULL,
    `title` varchar(100) NOT NULL,
    `description` varchar(10000) NOT NULL,
    `list_id` integer NOT NULL,
)

listitem
CREATE TRIGGER set_listitem_number
BEFORE INSERT ON listman_listitem
FOR EACH ROW
    SET NEW.number = (SELECT DISTINCT id_counter FROM listman_list id=NEW.list_id);


CREATE TRIGGER inc_listcounter
AFTER INSERT ON listman_listitem 
FOR EACH ROW
    UPDATE listman_list SET id_counter = id_counter+1 WHERE id=NEW.list_id;

