WITH a AS (SELECT   theid, thename, thetimestamp FROM mytable)
SELECT   thename, TRUNC (thetimestamp, 'HH24'), COUNT (theid) FROM   a
group by thename,trunc(thetimestamp,'HH24') ORDER BY COUNT (theid) desc)

for each hour, top X counts

SELECT thename, hour, cnt
FROM
( SELECT thename, hour, cnt,
         rank() over (partition by hours order by cnt desc) rnk
  FROM
  ( SELECT   thename, TRUNC (thetimestamp, 'HH24') hour, COUNT (theid) cnt 
    FROM mytable
    group by thename,trunc(thetimestamp,'HH24')
  )
)
WHERE rnk <= :X

