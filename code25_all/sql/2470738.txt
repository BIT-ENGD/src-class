create proc doStuff
@amount int
as
begin try
begin tran
...
if something begin  select 'not_good' rollback return end
if someelse begin  select 'some_other_thing' rollback return end
--do the stuff
...
commit 
end try
begin catch 
if @@trancount > 0 rollback
select 'error'
end catch

