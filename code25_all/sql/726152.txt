Create table #tmp
(
    Atype varchar(10),
    Btype varchar(10)
)

insert into #tmp values ('a','x')
insert into #tmp values ('b','x')
insert into #tmp values ('a','y')
insert into #tmp values ('a','y')
insert into #tmp values ('b','z')
insert into #tmp values ('b','y')

select atype, btype,count(*) as count
from #tmp
group by atype, btype
order by atype

drop table #tmp

atype btype count
-----------------
a     x     1
a     y     2
b     x     1
b     y     1
b     z     1

atype|x| y| z
-------------
a    |1| 2| 0
b    |1| 1| 1

