create table foo (
  corp_id int not null,
  tdate date not null,
  sec_id int unsigned not null,
  amount int unsigned not null,
  primary key (corp_id, sec_id, tdate)
);

select corp_id, tdate, sum(amount) from foo group by corp_id, tdate;

