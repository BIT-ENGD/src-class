Old table is tbl_contract. PK: contract_pk, FK: contract_parent_id, contract_name
New table is contract. PK: ID, FK contract_parent_id, name

ALTER TABLE contract ADD contract_pk INT NULL
INSERT INTO contract ( [name], contract_pk )
    SELECT contract_name, contract_pk FROM dbo.tbl_contract
UPDATE contract SET contract_parent_id = 
    (SELECT c.id FROM contract as c WHERE c.contract_pk = 
         (SELECT contract_parent FROM tbl_contract 
          WHERE contract_pk = contract.contract_pk)
     )
ALTER TABLE contract DROP COLUMN contract_pk

