def query(request):
    from django.db import connection
    cursor = connection.cursor()
    cursor.execute("SELECT product_style_id ,sum(price) As total_p ,sum(cast( amount as int )) AS total_a FROM jewelry_productorder  group by product_style_id ORDER BY total_p DESC LIMIT 5 " )
    output = cursor.fetchall()
    variables = RequestContext (request, {'output':output,})
    return render_to_response('top5.html', variables)

def query(request):
    m = request.GET['month']
    y = request.GET['year']
    d = str(y+'-'+m)
    from django.db import connection
    cursor = connection.cursor()
    cursor.execute("SELECT product_style_id ,sum(price) As total_p ,sum(cast( amount as int )) AS total_a FROM jewelry_productorder WHERE due_date LIKE %s group by product_style_id ORDER BY total_p DESC LIMIT 5 " ,[d])
    output = cursor.fetchall()
    variables = RequestContext (request, {'output':output,})
    return render_to_response('top5.html', variables)

