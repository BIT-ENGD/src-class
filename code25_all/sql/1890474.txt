CREATE PROCEDURE dbo.ApprovePost
      …
IF @@ERROR > 0
 BEGIN
     RAISERROR(‘Approval of post failed’, 16, 1)
     ROLLBACK TRANSACTION ApprovePost
     RETURN 99
 END

COMMIT TRANSACTION ApprovePost

