insert into tbl(key) values select max(key)+1 from tbl

SELECT -> LOCK table -> INSERT

LOCK table -> SELECT -> INSERT

