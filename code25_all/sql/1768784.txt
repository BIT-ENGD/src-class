if not request.method == 'POST' or not request.POST.get('openid'):
    raise RedirectException(next, _('Invalid POST data'))
if not UserAssociation.objects.filter(user=request.user).count() > 1 and not request.user.email:
    raise RedirectException(next, _("You must have at least one OpenID if you don't have email!"))
try:
    ua = UserAssociation.objects.get(openid_url=request.POST['openid'], user=request.user)
    ua.delete()
except UserAssociation.DoesNotExist:
    pass

