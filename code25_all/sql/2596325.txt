SELECT a.unit_id, 
    (SELECT count(*) FROM o_leases WHERE unit_id = a.unit_id AND archived = 0) as lease_count, 
    (SELECT count(*) FROM o_leases WHERE unit_id = a.unit_id AND archived = 1) as lease_archive_count

FROM p_unit a, properties b, portfolio c 

WHERE a.property_id = b.properties_id 
AND b.portfolio_id = c.portfolio_id 
AND a.archived = 0 

