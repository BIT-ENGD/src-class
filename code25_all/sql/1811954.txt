    select  1       as  tag,
        null    as  parent,

        null    as  [Categories!1],

        null    as  [Category!2!ID],
        null    as  [Category!2!Name],
        null    as  [Product!3!ID],
        null    as  [Product!3!Name],
        null    as  [Product!3!Price]

union all

select  2       as  tag,
        1       as  parent,

        null,
        CategoryID,
        CategoryName,
        NULL,
        NULL,
        NULL

from    dbo.Categories

union all

select  3       as  tag,
        2       as  parent,

        null,
        null,
        null,
        ProductID,
        ProductName,
        UnitPrice

from    dbo.Products
where   CategoryID=CategoryID

for xml explicit

