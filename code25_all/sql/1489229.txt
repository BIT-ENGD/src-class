has_useful_state(param)
SETOF RECORD
CREATE OR REPLACE FUNCTION set_of_useful_things(param TEXT, OUT has_useful_state) RETURNS SETOF RECORD AS $_$
BEGIN
    SELECT some_key, COUNT(has_useful_state(some_key)) FROM ....

has_useful_state
SELECT some_key, COUNT( $1 (some_key)) FROM ....

