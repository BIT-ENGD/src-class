Product < ActiveRecord::Base
 has_many :reviews

Review < ActiveRecord::Base
  belongs_to :product
  # integer value

named_scope :best_reviews, 
 :select => "*, AVG(reviews.value) score", 
 :joins => "INNER JOIN (SELECT * FROM reviews GROUP BY reviews.product_id) reviews ON reviews.product_id = products.id", 
 :group => "reviews.product_id", 
 :order => "score desc"

