<nav id="subNav">
    {% assign pages = site.pages | sort:"weight"  %}
    <ul class="secondLevel">
        {% for p in pages %}
        <li>
            <a {% if p.url == page.url %}class="active"{% endif %} href="{{ p.path }}">
                {{ p.title }}
            </a>
        </li>
        {% endfor %}
    </ul>
</nav>

gulp.task('markdown', function() {
return gulp.src('src/fileadmin/layout/compass/scss/media_all/*.md')
.pipe(markdown({
    gfm: true, 
    tables: true,
    breaks: true, 
    pedantic: true, 
    sanitize: false, 
    smartLists: true,
    smartypants: true 
}))

.pipe(insert.transform(function(content,file){
        var ext = path.extname(file.path),
            base = path.basename(file.path, ext); // https://nodejs.org/api/util.html | http://stackoverflow.com/questions/31612192/get-file-basename-in-gulp-replacer-task
        var comment = '---\nlayout: default\ntitle: ' + base.charAt(0).toUpperCase() + base.substr(1) + '\n---\n\n';// http://phpjs.org/functions/ucfirst/ | http://www.w3schools.com/jsref/jsref_touppercase.asp
        return comment + content;
}))
.pipe(gulp.dest(destDir));

