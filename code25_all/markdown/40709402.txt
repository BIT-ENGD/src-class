respond_to :html, :json, :js
def update
    @note = Note.find(params[:id])
    @note.update_attributes(params[:note].permit(:note))
    respond_with @project
end

def markdown(text)
    [...]
    markdown.render(text).html_safe
end

<%= best_in_place note, :note, :as => :textarea, :url => project_note_path(id: note.id, project_id: @project.id), display_as: markdown(note.note) %>

undefined method `<p>markup note test content</p>
' for #<Note:0xb2edef0>

display_with
helper_options
