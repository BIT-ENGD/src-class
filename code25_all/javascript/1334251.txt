package pt.classes{
    import flash.display.MovieClip
    import flash.display.LoaderInfo
    import flash.external.*
    import flash.events.Event
    import flash.events.ProgressEvent
    import flash.events.IOErrorEvent
    import flash.events.HTTPStatusEvent
    import pt.utils.myTrace
    import pt.testTrace
    import pt.classes.Episode

    public class Main extends MovieClip{
        include "../testTrace.as";//this is a trace() implementation that redirects traces to the firebug console
        public function Main(){
            trace ("constructor for "+ this);
            var l_this:Main = this;
            loaderInfo.addEventListener(Event.COMPLETE, loaderComplete);
            loaderInfo.addEventListener(Event.INIT, function(_e:Event){trace("init for "+ l_this)});
            loaderInfo.addEventListener(Event.OPEN, function(_e:Event){trace("open for "+ l_this)});
            loaderInfo.addEventListener(ProgressEvent.PROGRESS, function(_e:ProgressEvent){trace("Progress for "+ l_this)});
            loaderInfo.addEventListener(IOErrorEvent.IO_ERROR, function(_e:IOErrorEvent){trace("IOError for "+ l_this)});
            loaderInfo.addEventListener(HTTPStatusEvent.HTTP_STATUS, function(_e:HTTPStatusEvent){trace("HTTPStatus for "+ l_this)});
            ExternalInterface.addCallback("trace", this.trace);
        }
        private var m_params:Object;
        /*! loaderComplete
         * called when the stage has finished loading
         * @param _e : an Event
         */
        private function loaderComplete (_e:Event){
            m_params = new Object;
            for (var i:String in loaderInfo.parameters){
                m_params[i] = loaderInfo.parameters[i];
            }
            trace("loader complete for " + this);
        }
    }
}

mySwiff = new Swiff("files/main.swf",{
  width:  200,
  height: 150,
  params: {
      wmode: 'opaque',
  },
  vars: {
      myVariableString: 'hello'
  },
  callBacks: {
    load: function() {
      alert("Flash is loaded!");
      console.log("flash is loaded");
      this.trace('hello from flash');
    },
    error: function(){console.log("error!")},
    start: function(){console.log("start!")}
  }
});
console.log(mySwiff);
window.addEvent('domready', function() {
  console.log('dom is ready');
  //document.newElement(mySwiff);/*
  var myCont;
  if (myCont = $('swiffcontainer')){
    mySwiff.inject(myCont,'top');
  };
  //console.log(myCont, mySwiff);
});

      start = Swiff.CallBacks.Swiff_1251294375102.start

      myVariableString = hello

      error = Swiff.CallBacks.Swiff_1251294375102.error

      load = Swiff.CallBacks.Swiff_1251294375102.load

