function checkAvailable(thisForm) {

    var xmlhttp = httpRequest();
    var isValid = true;
    var un = document.getElementById('u_username').value;
    var email = document.getElementById('u_email').value;

    xmlhttp.onreadystatechange = function(isValid) {
        if (xmlhttp.readyState == 4) {
                //I WANT TO ACCESS THIS isValid VARIABLE FROM MAIN FUNCTION checkAvailable
                isValid = filterData(xmlhttp.responseText, thisForm);
        }
    }

    xmlhttp.open("GET","profile_fetch_reg_info.php?do=available&un="+un+"&email="+email+"",true);
    xmlhttp.send(null);

    return isValid;
}

function validateRegForm(thisForm) {

    var isValid = true;
    var warningIcon = "";//for later in case we want to use an icon next to warning msg

    checkAvailable(thisForm, function(isValid) { });        

    if(isValid == false)
        window.scroll(0,0);

    alert(isValid);

    return false;//isValidForm;
}


function checkAvailable(thisForm, resultFunction) {

        var xmlhttp = httpRequest();
        var un = document.getElementById('u_username').value;
        var email = document.getElementById('u_email').value;

        xmlhttp.onreadystatechange = function(isValid) {
            if(xmlhttp.readyState == 4) {
               isValid = filterData(xmlhttp.responseText, thisForm);
               resultFunction(isValid);
            }
        }
            xmlhttp.open("GET","profile_fetch_reg_info.php?do=available&un="+un+"&email="+email+"",true);
    xmlhttp.send(null);
}

