$('#btnPopulate').click(function() {
if ($('#list_length').val() != '') {
    var length = $('#list_length').val();
    var row='';
    for (var i=0; i <= length; i++) {
        row="<tr><td>"+i+"</td><td><input name='data[CompanyRanking]["+i+
         "][company_id]' id='CompanyRanking"+i+
         "CompanyId' value='1'></td><input type='hidden' name='data[CompanyRanking]["+i+
         "][ranking]' id='CompanyRanking"+i+"Ranking' value='"+i+"'></tr>";
        $('#ranking_table').append(row);
        $("CompanyRanking"+i+"CompanyId").autocomplete({ 
            serviceUrl:'/backend/companies/search',
            minChars:2, 
            delimiter: null, // regex or character
            maxHeight:400,
            width:300,
            deferRequestBy: 50, //miliseconds
            // callback function:
            onSelect: function(value, data){ 
                alert('You selected: ' + value + ', ' + data); 
                                $('#CompanyRanking'+i+'CompanyId').val(data);
                alert('val: '+
                             $('#CompanyRanking'+i+
                             'CompanyId').val() + 'object?: '+
                             $('#CompanyRanking'+i+'CompanyId'));
               }
        });
            };
    //$('#btnPopulate').ac;
    } else {
    alert('You must first specify how many companies are in the list.');
};
    return false;
});

