window.onbeforeunload=handler

<script type="text/javascript">   
   window.onbeforeunload=closeIt;
</script>

function closeIt()
{
  if (changes == "true" || files == "true")
  {
      return "Here you can append a custom message to the default dialog.";
  }
}

$(window).beforeunload(function() {
        confirm('new message: ' + this.href + ' !', this.href);
        return false;
    });

