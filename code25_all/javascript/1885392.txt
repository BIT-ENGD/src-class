(function ($, fullFlashMinSize) {
    var getWindowSize = function ()
    {
        return { 
            width: $(window).width(), 
            height: $(window).height() 
        };
    };  

    $.fn[fullFlashMinSize] = function ( minWidth, minHeight )
    {
        // clean up CSS of container
        this.css(
            {
                'width': '100',
                'height': '100%',
                'overflow': 'hidden',
                'background-color':'#0f0'
            }
        );

        // clean up html,body css
        $('html').css(
            {
                'width': '100%',
                'height': '100%',
                'overflow': 'auto'
            }
        );

        $('body').css(
            {
                'width': '100%',
                'height': '100%',
                'overflow': 'auto',
                'margin': '0px',
                'padding': '0px'
            }
        );

        var elem = this;
        var minSize = { width: minWidth, height: minHeight };

        var resizeFn = function()
        {
            var currSize = getWindowSize();

            if( currSize.width < minSize.width )
                elem.width( minSize.width );
            else
                elem.width( '100%' );

            if( currSize.height < minSize.height )
                elem.height( minSize.height );
            else
                elem.height( '100%' );

            //window.status  = ( currSize.width + ' : ' + currSize.height );
            if( $.browser.safari )
            {
                var widerThanBrowser = currSize.width < minSize.width && currSize.height > minSize.height;
                var tallerThanBrowser = currSize.width > minSize.width && currSize.height < minSize.height;

                if( widerThanBrowser )
                {
                    $('body').css( { 'overflow-x': 'auto', 'overflow-y': 'hidden' } );
                    elem.height( currSize.height - 12 );
                }
                else if( tallerThanBrowser )
                {
                    $('body').css( { 'overflow-x': 'hidden', 'overflow-y': 'auto' } );
                    elem.width( currSize.width - 12 );
                }
                else
                {
                    $('body').css( { 'overflow': 'auto' } );
                }
            }       
        };

        // initial call
        resizeFn();
        // on resize
        $(window).resize( resizeFn );
    };
}(jQuery, 'fullFlashMinSize'));

var elem = this;

(function ($, fullFlashMinSize) {
var getWindowSize = function ()
{
    return { 
        width: $(window).width(), 
        height: $(window).height() 
    };
};  


$.fn[fullFlashMinSize] = function ( minWidth, minHeight )
{
    // clean up CSS of container
    this.css(
        {
            'width': '100',
            'height': '100',
            'overflow': 'hidden'
        }
    );

    // clean up html,body css
    $('html').css(
        {
            'width': '100%',
            'height': '100%',
            'overflow': 'auto'
        }
    );

    $('body').css(
        {
            'width': '100%',
            'height': '100%',
            'overflow': 'auto',
            'margin': '0px',
            'padding': '0px'
        }
    );

    var elemRef = '#' + $( this ).attr( 'id' );

    var minSize = { width: minWidth, height: minHeight };

    var resizeFn = function()
    {
        var elem = $(elemRef)[0];
        var currSize = getWindowSize();

        if( currSize.width < minSize.width )
            $(elem).width( minSize.width );
        else
            $(elem).width( '100%' );

        if( currSize.height < minSize.height )
            $(elem).height( minSize.height );
        else
            $(elem).height( '100%' );

        if( $.browser.safari )
        {
            var widerThanBrowser = currSize.width < minSize.width && currSize.height > minSize.height;
            var tallerThanBrowser = currSize.width > minSize.width && currSize.height < minSize.height;

            if( widerThanBrowser )
            {
                $('body').css( { 'overflow-x': 'auto', 'overflow-y': 'hidden' } );
                elem.height( currSize.height - 12 );
            }
            else if( tallerThanBrowser )
            {
                $('body').css( { 'overflow-x': 'hidden', 'overflow-y': 'auto' } );
                elem.width( currSize.width - 12 );
            }
            else
            {
                $('body').css( { 'overflow-x': 'auto', 'overflow-y': 'auto' } );
            }
        }       
    };

    // initial call
    resizeFn();
    // on resize
    $(window).resize( resizeFn );
};

