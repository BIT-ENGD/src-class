str.replace(/(<[^>]+\bon\w+\s*=\s*["']?)/gi,"$1return;"); // untested

<a onclick="doSomethingBad()" ...

<a onclick="return;doSomethingBad()" ...

str.replace(/(<[>+])(script)/gi,toHTMLEntitiesFunc);

<a href="javascript: ..."

