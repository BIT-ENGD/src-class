function twoDecPlaces(theValue) {
var nm = new Number( Math.round( theValue * 100 ) ) /100 ;
 var parts = nm.toString().split( '.' );
 var ord = new Number( parts[ 0 ] );
 var dec = ( parts[ 1 ] ) ? parts[ 1 ] : '';
 if( dec ){
  dec = dec.toString().substring( 0, 2 );
  ord += '.' + dec;
 }

 return( ord );

}

function fourDecPlaces(theValue) {
num = theValue;
result = num.toFixed(4); 

 return( result );

}

function isNumber(val)
{
 if (isNaN(val))
 {
  return false;
 }
 if (val==0)
 {
  return false;
 }
 else
 {
  return true;
 } 
}


function doCalc()
{
 if (isNumber(document.getElementById("num_shares").value))
 {
  var dividend_rate = document.getElementById('dividend_rate');
  var currency = document.getElementById('currency').value;
  var dividendValue = dividend_rate.options[dividend_rate.selectedIndex].value;
  var num_shares = document.getElementById('num_shares');

  num_shares = parseInt(num_shares.value);

  var totalDividend = dividendValue * num_shares;
  var valuePaid = document.getElementById('valuePaid');
  var divpershare = document.getElementById('divpershare');

  divpersharevalue = fourDecPlaces(dividendValue/1000);
  divpersharevalue = divpersharevalue + "&nbsp;" + currency;

  totalDividend = twoDecPlaces(totalDividend/100);
  totalDividend = totalDividend + "&nbsp;" + currency;

     valuePaid.style.display="";
  divpershare.style.display="";
  valuePaid.innerHTML = "<td>The total dividend paid was:</td><td align='right'>"+totalDividend+"</td>";
  divpershare.innerHTML = "<td>The dividend per share was:</td><td align='right'>"+divpersharevalue+"</td>";
 }
else
 {
  alert("Invalid entry in dividend box");
  document.getElementById("num_shares").value="";
  document.getElementById('valuePaid').innerHTML=""; 
 }
}

