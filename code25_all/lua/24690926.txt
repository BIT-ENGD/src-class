function fn1()
  print(foo)
end

local foo = "Hello, world"
fn1()         -- Prints nil

foo
fn(foo)
function fn1()
  fn2()
end

function fn2()
  print(foo)
end

local foo = "Hello, world"
fn1(foo)         -- Also prints nil

foo
foo
fn1
fn2
foo
