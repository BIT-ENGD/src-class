<form action="/form_validate" method="POST">
<label for="username">Username</label>
<input id="username" name="username" size="16" type="text"/>
<label for="password">Password</label>
<input name="password" size="16" type="password"/>
</form>

 upstream web_svr 
  {
    least_conn;
    server 127.0.0.1:8080;
  }


  server
  {
    listen       80;
    server_name  testSvr;

    location / 
    {
      root /var/html;
      index index.html;
    }

    location /form_validate/
    {
      set_form_input $username username;
      set_form_input $password password;

      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Authorization "Basic $digest";
      proxy_redirect off;

      log_by_lua '
        ngx.header.content_type = ("text/plain")
        ngx.log(ngx.ERR,"username: (",ngx.var.username,")")
        ngx.log(ngx.ERR,"password: (",ngx.var.password,")")
      ';
      proxy_pass http://web_svr/;
    }
  }

