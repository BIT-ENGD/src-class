print("11\n")
wifi.setmode(wifi.STATION)
print("22\n")
wifi.sta.config("WDTS03","Walker14!")
print("33\n")
elWiFi =(wifi.sta.getip())
if elWiFi ~= nil then
    print(wifi.sta.getip())
end
print("44\n")
if srv~=nil then
    print("444\n")
    srv:close()
    print("555 \n")
end

print("Create server \n")
srv=net.createServer(net.TCP) 
print("1\n")
if srv ~= nil then
    print("srv !=nil \n")
    srv:listen(6969,function(conn) 
    print("listening \n")
        if conn ~= nil then
        print("incoming\n")

        conn:on("receive",function(conn,numbers) 
        print("2\n")
        print(#numbers)
        print("chekcing for nil \n")
        if numbers ~= nil then 
            print("3\n")
            p = string.find(numbers, "x=")
            print("4\n")
            q = string.find(numbers, "&y")
            print("5\n")
            if p ~= nill then
                print("6\n")
                if q ~=  nil then
                    print("7\n")
                    x = (string.sub(numbers,p+2, q-1))
                    print("x=" .. x)
                end
            end --p ~= nill
            print("8\n")
            p = string.find(numbers, "y=")
            print("9\n")
            q = string.find(numbers, "&z")
            print("10\n")
            if p ~= nill then
                print("11\n")
                if q ~=  nil then
                 print("12\n")
                    y = (string.sub(numbers,p+2, q-1))
                    print("y=" .. y)
                end
            end --p ~= nill
            print("13\n")
            p = string.find(numbers, "z=")
            print("14\n")
            q = string.find(numbers, " H")
            print("15\n")
            if p ~= nill then
                print("16\n")
                if q ~=  nil then
                    print("17\n")
                    z = (string.sub(numbers,p+2, q-1))
                    print("z=" .. z)
                end
            end-- p ~= nill
            print("18\n")

        end --numbers ~= nil
        print("54\n")

        --conn:send("test\n")

        end)
        print("55 \n")
        end
        print("66 \n")
    end)
    print("77\n")

end
print("666\n")`

11

22

33

44

Create server 

1

srv !=nil 

77

666

> listening 

incoming

55 

66 

listening 

incoming

55 

66 

listening 

incoming

55 

66 

listening 

incoming

55 

66 

2

338
chekcing for nil 

3

4

5

6

7

x=0.1722259521484375
8

9

10

11

12

y=-0.7733306884765625
13

14

15

16

17

z=-0.5716094970703125
18

54

2

337
chekcing for nil 

3

4

5

6

7

.
.--repeats a few times 
.

y=-0.005340576171875
13

14

15

16

17

z=-0.9838409423828125
18

54

PANIC: unprotected error in call to Lua API (attempt to call a nil value)
�l� �=+���T2n���

NodeMCU 0.9.6 build 20150704  powered by Lua 5.1.4
11

22`

