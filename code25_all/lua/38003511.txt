local events = {}

function registerEvent (event)
    table.insert(events, event)
end

function unregisterEvent (event)
    table.remove(events, event)
end

function processEvents ()
    for _, event in pairs(events) do
        for _, condition in pairs(event.conditions) do
            if condition() then
                event.triggered = true;
            else
                event.triggered = false;
                break
            end
        end

        if event.triggered then
            event.callback()
        end
    end
end

registerEvent
{
    conditions = {
        function () return Keyboard.Shift == true end
    },
    callback = function () text = "triggered" end
}

registerEvent
{
    conditions = {
        function () return Keyboard.Shift == false end
    },
    callback = function () text = "not triggered" end
}

function OnUpdate(deltaTime)
    processEvents()
end

