function ServerBackup(todo)
local write, read;
if todo=="write" then
    write = true;
else
    read = true;
end
if (write) then
    local source = io.open(Root().."Mods/Infinity/System/Read/backup.lua", "w");
    System.Log(TeamInstantAction:GetTeamScore(2).." for 2, and for 1: "..TeamInstantAction:GetTeamScore(1))
    System.LogAlways("[System] Backing up serverdata to file 'backup.lua'");
    source:write("--[[ The server is dependent on this file; editing it will lead to serious problems.If there is a problem with this file, please re-write it by accessing the backup system ingame.--]]");
    source:write("Backup = {};Backup.Time = '"..os.date("%H:%M").."';Backup.Date = '"..os.date("%d/%m/%Y").."';");
    source:write(XFormat("TeamInstantAction:SetTeamScore(2, %d);TeamInstantAction:SetTeamScore(1, %d);TeamInstantAction:UpdateScores();",TeamInstantAction:GetTeamScore(2), TeamInstantAction:GetTeamScore(1) ));
    source:close();
    for i,player in pairs(g_gameRules.game:GetPlayers() or {}) do
        if (IsModerator(player)) then
            CMPlayer(player, "[!backup] Completed server backup.");
        end
    end
end
--local source = io.open(Root().."Mods/Infinity/System/Read/backup.lua", "r"); Can the file be open here and by the Lua scriptloader too?
if (read) then
    System.LogAlways("[System] Restoring serverdata from file 'backup.lua'");
    --source:close();
    Backup = {};
    Script.LoadScript(Root().."Mods/Infinity/System/Read/backup.lua");
    if not Backup or #Backup < 1 then
        System.LogAlways("[System] Error restoring serverdata from file 'backup.lua'");
    end
end
end

