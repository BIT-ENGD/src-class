    static int copy(lua_State *L)
{
    char ch;
    FILE *source, *target;
    const char * source_file = lua_tostring(L, 1);
    const char * target_file = lua_tostring(L, 2);
    source = fopen(source_file, "r");
    if( source == NULL )
    {
        lua_pushnumber(L, 1);
    }
    target = fopen(target_file, "w");
    if( target == NULL )
    {
        fclose(source);
        lua_pushnumber(L, 1);
    }
    while( ( ch = fgetc(source) ) != EOF )
        fputc(ch, target);
        fclose(source);
        fclose(target);
    return 1;
}

os.execute("cp file1 file2")

