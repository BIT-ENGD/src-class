-- Will randomly drop water stream at random locations and with random colors 

--Delcare class variables 
local physics = (require"physics")
physics.start() 
local w = display.contentWidth
local h = display.contentHeight 
local particleSystem = physics.newParticleSystem({  
    filename = "particle.png",
    colorMixingStrength = 0.1,
    radius = 3,
    imageRadius = 6
})


--function to start the water stream
local function start()

end 

--fucntion to end the water stream 

local function stop() 

end 

--a function to create particle paramerters 
-- flag to determine if the particle parameter should have random colors
-- WILL have RANDOM location 
local function createParticleParameter(flag, x, y, color)
    local param = {
        flags = flags, 
        x = x, 
        y = y, 
        color = color, 
        radius = 10, 
        linearVelocityX = 0,
        linearVelocityY = 10, 
        lifetime = 10 
    }
    return param
end 

local function onTimer()
        local parmas = createParticleParameter("water",  math.random(0, display.contentWidth), 0, {0, 1, 0})
        particleSystem:createGroup(params)
end 

timer.performWithDelay( 1000, onTimer, 0 )

---------------------------
Corona Runtime Error
---------------------------
attempt to index a nil value
stack traceback:
    [C]: in function 'createGroup'
    main.lua:47: in function '_listener'
    ?: in function <?:167>
    ?: in function <?:221>

-- Will randomly drop water stream at random locations and with random colors 
--Delcare class variables 
local physics = (require"physics")
physics.start() 
local w = display.contentWidth
local h = display.contentHeight 
local particleSystem = physics.newParticleSystem({  
    filename = "particle.png",
    colorMixingStrength = 0.1,
    radius = 3,
    imageRadius = 6
})


--function to start the water stream
local function start()

end 

--fucntion to end the water stream 

local function stop() 

end 

--a function to create particle paramerters 
-- flag to determine if the particle parameter should have random colors
-- WILL have RANDOM location 
local function createParticleParameter(flag, x, y, color)
    local param = {
        flags = flags, 
        x = x, 
        y = y, 
        color = color, 
        radius = 10, 
        linearVelocityX = 0,
        linearVelocityY = 10, 
        lifetime = 10 
    }
    return param
end 

local function onTimer()
        local parmas = createParticleParameter("water",  math.random(0, display.contentWidth), 0, { 0,1,0})
        particleSystem:createGroup({
        flags = "water", 
        x = math.random(0, display.contentWidth), 
        y = 0, 
        color = {0, 1,0 }, 
        radius = 10, 
        linearVelocityX = 0,
        linearVelocityY = 10, 
        lifetime = 10 
    })
end 

timer.performWithDelay( 1000, onTimer, 0 )

