-- Connect to router
wifi.sta.config("ssid","password")
wifi.sta.connect()

-- Code for waiting for connection

-- Create server
srv = net.createServer(net.TCP) 
srv:listen(80,function(conn)    
conn:on("receive",function(conn,payload) 
    for line in string.gmatch(payload,'[^\r\n]+') do
        s = string.find(line, "GET /&")
        -- If query is there, control robot
        if s ~= nil then
            -- Do stuff with query
            break;
        -- If no query, serve webpage
        else
            file.open("index.html", "r")
            while true do
                s = file.read(1460)
                if s == nil then
                    break
                end
                conn:send(s)
            end
            file.close()
        end
        break
    end
    conn:on("sent", function(conn) conn:close() end)
end)
end)

wifi.setmode(wifi.STATIONAP)
cfg={}
cfg.ssid="custom_ssid"
cfg.pwd="custom_password"
wifi.ap.config(cfg)

