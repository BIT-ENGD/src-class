--table to hold dynamically created rectangles
local rects={}
--used as index for table
local numRect=0

local function removeRect( obj )
    local rectid = obj.id

    obj:removeSelf( )
    rects[rectid] = nil
end

--function for spawning rectangles
local function spawnRect()
    numRect = numRect + 1
    rects[numRect] = display.newRect( display.contentWidth/2, 100, 100, 100)
    rects[numRect]:setFillColor( 1,1,1 )
    rects[numRect].id = numRect

    transition.to( rects[numRect], {time = 9000, y = display.contentHeight + 100,
            onComplete = function()
                removeRect(rects[numRect])
            end

    } )
end

timer.performWithDelay( 1000, spawnRect, -1 )

