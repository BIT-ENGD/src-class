function M.draw()
  for k, item in pairs(M.buttons.current) do
    love.graphics.setColor(M.buttons.bkg_color)
    love.graphics.rectangle("fill", item.pos_x, item.pos_y, M.buttons.size_x, M.buttons.size_y)
    love.graphics.setColor(M.buttons.txt_color)
    --TODO: center text on button
    love.graphics.print(item.text, item.pos_x+10, item.pos_y+10)
  end
end

function M.mousereleased(x, y, button)
  if button == 'l' and M.buttons.buttonPressedFlag and M.mouseCollide(x,y,M.buttons.buttonPressed) then
    M.buttons.buttonPressed.fun()
  end
  M.buttons.buttonPressedFlag = false
end

M.formButton( M.buttons.main,
              "options",
              GLOBAL_SETTINGS.resolution_x/2-M.buttons.size_x,
              GLOBAL_SETTINGS.resolution_y/7*5-M.buttons.size_y,
              M.buttons.size_x,
              M.buttons.size_y,
              "Options",
              function() M.buttons.current = M.buttons.main.options end )

function M.formButton(menu, buttonName, pos_x, pos_y, size_x, size_y, text, fun)
  menu[buttonName].pos_x = pos_x
  menu[buttonName].pos_y = pos_y
  menu[buttonName].size_x = size_x
  menu[buttonName].size_y = size_y
  menu[buttonName].text = text
  menu[buttonName].fun = fun
end

local M = {buttons = { main = { campaign =    { newgame =  {},
                                                continue = {},
                                                load =     {},
                                                back =     {} },
                                freeplay =    { newgame =  {},
                                                continue = {},
                                                load =     {},
                                                custom =   {},
                                                back =     {} },
                                multiplayer = { lan =      { newgame = {},
                                                             load =    {},
                                                             back =    {}, },
                                                hotseat =  { newgame = {},
                                                             load =    {},
                                                             back =    {}, },
                                                network =  { newgame = {}, 
                                                             load =    {},
                                                             back =    {} } },
                                options =    {  audio =    {},
                                                display =  {},
                                                gameplay = {},
                                                language = {} },
                                exitgame =   {} } } }

