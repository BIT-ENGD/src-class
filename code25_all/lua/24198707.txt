local spriteInAir = false
local yspeed = 0
local oldypos = 0
local holding = false

local bJump = display.newImage("Images/jumpbutton.png")
bJump.x = 445
bJump.y = 265
bJump.xScale = 0.78
bJump.yScale = 0.78

function checkSpeed()
yspeed = sprite.y - oldypos
oldypos = sprite.y
if yspeed == 0 then
spriteInAir = false
else
spriteInAir = true
end
end
Runtime:addEventListener( "enterFrame", checkSpeed )

local function hold()
    if holding and spriteInAir == false then
      sprite:applyForce( 0, -8, sprite.x, sprite.y )
      sprite:setLinearVelocity(0, -350)
      spriteInAir = true
      return true
    end
end
local function jumping( event )
    if event.phase == "began" then
        display.getCurrentStage():setFocus( event.target )
        event.target.isFocus = true
        event.target.alpha = 0.6
        Runtime:addEventListener( "enterFrame", hold )
        holding = true
    elseif event.target.isFocus then
        if event.phase == "moved" then
        elseif event.phase == "ended" then
            holding = false
            event.target.alpha = 1
            Runtime:removeEventListener( "enterFrame", hold )
            display.getCurrentStage():setFocus( nil )
            event.target.isFocus = false
            spriteInAir = false
            return true
        end
    end
    return true
end
bJump:addEventListener("touch",jumping)

