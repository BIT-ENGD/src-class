require("mod_binary_reader")
require("mod_w3strings")

local in_file = assert(arg[1], "\n\nno input\n")
local out_dir = arg[2] or "."
local debug = arg[3] or false

local r = BinaryReader
r:open(in_file)

assert(_VERSION == "Lua 5.3")

BinaryReader = {
    f_handle = nil,`
    f_size = 0
}

function BinaryReader:open(fullpath)
    self.f_handle = assert(io.open(fullpath, "rb"))
    self.f_size = self.f_handle:seek("end")
    assert(-1 ~= self.f_size, "your Lua doesn't support files larger than 2 Gb")
    self.f_handle:seek("set")
end

a:\vid_inwork\work\lua.exe inspect_w3speech.lua a:\vid_inwork\work a:\vid_inwork\work\out

a:\vid_inwork\work\lua.exe: a:\vid_inwork\work\mod_binary_reader.lua:9: a:\vid_inwork\work: Permission Denied
stack traceback:
[C]: in function 'assert'
a:\vid_inwork\work\mod_binary_reader.lua:9: in method 'open'
inspect_w3speech.lua:9: in maind chunk
[C]: in ?

