function draw()
   love.graphics.circle("fill", 100, 100, 50)  -- Draw circle
   love.graphics.setColor(255, 255, 255, 255)
   love.graphics.setCanvas()
   love.graphics.draw(canvas, 0, 0, 0, 2)  -- 200% zoom
   love.graphics.setCanvas(canvas)
   love.graphics.present()  -- Refresh screen
end

love.window.setMode(500, 500)
canvas = love.graphics.newCanvas(1000, 1000)  -- Create canvas
love.graphics.setCanvas(canvas)
draw()  -- Draw circle
love.timer.sleep(1)

love.window.setMode(800, 800)  -- Resize window
love.graphics.setCanvas(canvas)
draw()  -- Redraw circle

love.timer.sleep(2)
love.window.close()
print("Should crash when you quit this by pressing key")
os.execute("pause")
love.event.push("quit")

function draw()
   love.graphics.circle("fill", 100, 100, 50)  -- Draw circle
   love.graphics.setColor(255, 255, 255, 255)
   love.graphics.setCanvas()
   love.graphics.draw(canvas, 0, 0, 0, 2)  -- 200% zoom
   love.graphics.setCanvas(canvas)
   love.graphics.present()  -- Refresh screen
end

love.window.setMode(500, 500)

canvas = love.graphics.newCanvas(1000, 1000)  -- Create canvas
love.graphics.setCanvas(canvas)
draw()  -- Draw circle
love.timer.sleep(1)

-- Window was resized once, before canvas creation --> no crash

love.window.close()
os.execute("pause")
love.event.push("quit")

