function _.spawn(params)
    local orb = display.newCircle( display.contentWidth/2, display.contentHeight/2, 40 ) -- creates the orb shape
    orb.orbTable = params.orbTable --assign the internal table
    orb.index = #orb.orbTable + 1 -- takes control of the index

    orb.orbTable[orb.index] = orb -- assign a orb to the internal table
    orb:setFillColor( unpack(params.color) ) -- change the color according to the rules above
    orb.x = params.x -- control the X position of the orb
    orb.y = params.y  --control the Y position of the orb
    orb.alpha = 1 -- borns with alpha = 0
    orb.value = params.value -- assign the internal value of the orb (1-10)

    --local orbText = display.newText( orb.value, orb.x+2, orb.y-5, "Aniron", 40 ) -- generates the value on the ball
    --orbText.orbTable = params.orbTable 
    --orbText.index = #orbText.orbTable + 1
    --orbText.orbTable[orbText.index] = orbText
    --orbText:setFillColor( 0,0,0 )
    --orbText.alpha = 1

    --The objects group
    orb.group = params.group or nil

    --If the function call has a parameter named group then insert it into the specified group
    orb.group:insert(orb)
    --orb.group:insert(orbText)

    --Insert the object into the table at the specified index
    orb.orbTable[orb.index] = orb
    return orb -- returns the orb to have control of it
end

function _.generateDeck()
    for i = 1, 40 do -- loop to generate the 40 orbs
        internalValue = internalValue + 1 -- counter to assigns the right values
        if (internalValue > 10) then -- if the internal value is more than 10 starts again (only 1-10)
            internalValue = 1 
        end
        if (i >= 1 and i <= 10) then -- assign RED color to the first 10 orbs
            completeDeck[i] = _.spawn({color = {196/255,138/255,105/255}, group = orbsGroup, x =  100, y = display.contentHeight / 2, value = internalValue, orbTable = completeDeck})
        elseif (i >= 11 and i <= 20) then -- assigns YELLOW color to the next 10 orbs
            completeDeck[i] = _.spawn({color = {229/255,214/255,142/255}, group = orbsGroup, x =  100, y = display.contentHeight / 2, value = internalValue, orbTable = completeDeck})
        elseif (i >= 11 and i <= 30) then -- assigns BLUE color to the next 10 orbs
            completeDeck[i] = _.spawn({color = {157/255,195/255,212/255}, group = orbsGroup, x =  100, y = display.contentHeight / 2, value = internalValue, orbTable = completeDeck})
        elseif (i >= 11 and i <= 40) then -- assigns GREEN color to the next 10 balls
            completeDeck[i] = _.spawn({color = {175/255,181/255,68/255}, group = orbsGroup, x =  100, y = display.contentHeight / 2, value = internalValue, orbTable = completeDeck})
        end
    end
end

for i = 1, #completeDeck do
    print("Complete Deck Value ("..i.."): "..completeDeck[i].value)
end

newText (orbText)
displayGroup
displayGroup
