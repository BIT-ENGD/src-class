local ffi = require "ffi"
local ffi_C = ffi.C
local ffi_new = ffi.new

ffi.cdef[[
    typedef long long time_t;
    typedef struct timespec {
        time_t  tv_sec;
        long    tv_nsec;
        ...;
    };
    typedef struct stat {
        struct timespec st_mtim;
        ...;
    };

    int lstat(const char *path, struct stat *buf);
]]

buf = ffi_new("struct stat *")

function checkfile (filename, buf)
    ffi_C.lstat(filename, buf)
end

