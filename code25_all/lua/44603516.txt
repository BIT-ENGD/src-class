objImage --stores details about each image like name, iso, aperture etc.
tblMetadata --table that has all the image names and associated data.
tblImages --table to hold the image objects (objImage)

for each line in tblMetadata
  objImage.name = blahblah
  objImage.iso = blahblah
  etc...
  table.insert(tblImages, objImage)
  objImage = nil 
end

objImage = nil
function extractExif(tblOutput)
    local tblImages = {}
    local blnFlag = false
    local intCount = 0
    local Image = {}  --pseudo object to hold metadata for each image

    for k,v in pairs(tblOutput) do  --iterate through each value in the table
        if string.find(v, "^=.+") then
            --test if new image other than the first one
            if blnFlag == true then
            --add Image to tblImages and then clear Image object
            table.insert(tblImages, Image)
            Image = nil
            blnFlag = false
            end

            i, j = string.find(v, "/")  -- **** MAC ONLY. Back slash for Windows *****
            Image.filePath = string.sub(v, i)   --returns the file path
            --Image.name = string.match(v, "([^/]+)$")  --return the file name
            blnFlag = true

        elseif string.find(v, "ISO") ~= nil then
            Image.iso = string.match(v, "%a+:(.+)") --get text (i.e value) to right of colon
        elseif string.find(v, "Film") ~= nil then
            Image.filmSim = string.match(v, "%a+:(.+)")
        elseif string.find(v, "Setting") ~= nil then
            Image.drMode = string.match(v, "%a+:(.+)")
        elseif (string.find(v, "Auto") ~= nil) or (string.find(v, "Development") ~= nil) then  -- corresponds to "Auto Dynamic Range" and "Development Dynamic Range" in fuji exif
            Image.dr = string.match(v, "%a+:(.+)")
        else

        end
    end
end

