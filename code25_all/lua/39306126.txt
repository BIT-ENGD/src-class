override_name_char = "<"
function tag_name_from_client(c)
  if string.match(c.name, "Mozilla Firefox") then
    return "Firefox"
  end

  if string.match(c.name, "Sublime Text") then
    return "Sublime"
  end

  if string.match(c.name, "/bin/bash") then
    return "Shell"
  end

  return ""
end


function tag_name_from_tag(tag)
   if tag.name:match(override_name_char) then
      return tag.name
   end
   for _, c in pairs(tag:clients()) do
     return "  "..tostring(awful.tag.getidx(tag)).." "..tag_name_from_client(c)
   end
   return tostring(awful.tag.getidx(tag))
end

function refresh_tag_name()
  for s = 1, screen.count() do
      for _,tag in pairs(awful.tag.gettags(s)) do
         tag.name = tag_name_from_tag(tag)
      end
  end
end

client.connect_signal("tagged", refresh_tag_name)
client.connect_signal("untagged", refresh_tag_name)

--tag_timer = timer({timeout = 0.5})
--tag_timer:connect_signal("timeout", function()
   --refresh_tag_name()
--end)
--tag_timer:start()

