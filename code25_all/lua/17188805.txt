Attempt to index local 'button' (a nil value)
ui.lua:130 Attempt to index local 'button' (a nil value)
stack traceback:
[C]:?

ui.lua:130 in function 'newButton'

-----------------------------------------------------------------------------------------
--
-- main.lua
--
-----------------------------------------------------------------------------------------
local ui = require("ui")
local background = display.newImage("background.jpg")
local gear = display.newImage("gear.png")
local gear2 = display.newImage("gear.png")

gear.x = display.stageWidth / 2 + 26
gear.y = display.stageHeight / 2 - 50
gear2.x = display.stageWidth * .63
gear2.y = display.stageHeight * .60

local rotateAmount = 1

local function animate( event )
    gear.rotation = gear.rotation + rotateAmount
    gear2.rotation = gear2.rotation - rotateAmount
end

Runtime:addEventListener( "enterFrame", animate )

local buttonHandler = function( event )
    if event.phase == "release" then
        if event.id == "stop" then
            rotateAmount = 0
        elseif event.id == "+1" then
            rotateAmount = rotateAmount + 1
        elseif event.id == "-1" then
            rotateAmount = rotateAmount - 1
        elseif event.id == "reverse" then
            rotateAmount = rotateAmount * -1
        end
    end
end

local button1 = ui.newButton{
    default = "button.png",
    over = "buttonOver.png",
    onEvent = buttonHandler,
    text = "Stop",
    id = "stop",
    size = 12,
    emboss = true
}

