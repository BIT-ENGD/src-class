local DataStore = game:GetService("DataStoreService"):GetDataStore("GeneralStats")


game.Players.PlayerAdded:connect(function(player)

    local stats = Instance.new("IntValue", player)
    stats.Name = "leaderstats"

    local points = Instance.new("IntValue", stats)
    points.Name = "Points"

    local credits = Instance.new("IntValue", stats)
    credits.Name = "Credits"    

    local key = "player-"..player.userId

    local savedValues = DataStore:GetAsync(key)

    if savedValues then
        --Save format: (points, credits)
        points.Value = savedValues[1]
        credits.Value = savedValues[2]
    else
        local ValuesToSave = {points.Value, credits.Value}
        DataStore:SetAsync(key, ValuesToSave)
    end


end)

local DataStore = game:GetService("DataStoreService"):GetDataStore("GeneralStats")

game.Players.PlayerRemoving:connect(function(player)

    local key = "player-"..player.userId    

    --Save key: {points, credits}
    local valuesToSave = {player.leaderstats.Points.Values, player.leaderstats.Credits.Values}
    DataStore:SetAsync(key, valuesToSave)

end)

RLua
Roblox Lua
