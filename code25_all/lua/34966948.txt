testrock.lua
module('testrock')
function add(a, b)
    return a+b
end

testrock-scm-1.rockspec
package = "testrock"
version = "scm-1"

source = ...
description = ...
dependencies = ...

build = {
   type = "builtin",
   modules = {
       testrock = "testrock.lua"
   }
}

luarocks make
testrock
require 'testrock'
foo.lua
function testrock.sub(a, b)
    return a - b
end

testrock.lua
require('foo')

luarocks make
make
/home/<username>/torch/install/share/lua/5.1/testrock.lua:7: attempt to call global 'require' (a nil value)
require('foo')
