function eq_event(op1, op2)
    if op1 == op2 then
        return true
    end
    local h = getequalhandler(op1, op2)
    if h then
        return not not h(op1, op2)
    else
        return false
    end
end

not not
!!
