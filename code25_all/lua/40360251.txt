Microsoft.Web.RedisSessionStateProvider
static int inuse = 0;   /* Recursive calls detection. */

/* By using Lua debug hooks it is possible to trigger a recursive call
 * to luaRedisGenericCommand(), which normally should never happen.
 * To make this function reentrant is futile and makes it slower, but
 * we should at least detect such a misuse, and abort. */
if (inuse) {
    char *recursion_warning =
        "luaRedisGenericCommand() recursive call detected. "
        "Are you doing funny stuff with Lua debug hooks?";
    redisLog(REDIS_WARNING,"%s",recursion_warning);
    luaPushError(lua,recursion_warning);
    return 1;
}
inuse++;

