local composer = require( "composer")
local scene = composer.newScene()

local rects={}
local rectsNum = 0
local rectsCount = 0

local rectsTimer

local sceneGroup

local function rectTransComplete( obj )
    print("rectTransComplete .. called")

    rectsCount = rectsCount + 1

    if rectsCount == 3 then
        composer.removeScene("scene2")
    end
end

local function spawnRect( )
    print("inside spawnrects")
    rectsNum = rectsNum + 1
        rects[rectsNum] = display.newRect( display.contentWidth/2, 100, 100, 100)
        rects[rectsNum]:setFillColor( 1,1,1 )
        rects[rectsNum].id = numRect

        rects[rectsNum].transition = transition.to( rects[rectsNum], {time = 9000, y = display.contentHeight + 100,
                onComplete = rectTransComplete

        } )

    sceneGroup:insert( rects[rectsNum] )
end

function  scene:create( event )
    sceneGroup = self.view
end

function scene:show(event)
    print("inside create")
    if event.phase == "did" then
            rectsTimer = timer.performWithDelay( 1000, spawnRect, -1 )
        end
end

function scene:hide( event )
    -- body
end

function scene:destroy( event )
    timer.cancel( rectsTimer )
    print("scene Destroyed")
end

scene:addEventListener( "create", scene )
scene:addEventListener( "show", scene )
scene:addEventListener( "hide", scene )
scene:addEventListener( "destroy", scene )

return scene

