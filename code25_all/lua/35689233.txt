AGGREGATE filter2.check_teamId('123', 0, 1456499994597) ON analytics.tracking 
WHERE teamId = '123'

var statement = {
    aggregationUDF: {module: 'filter2', funcname: 'check_teamId', 
    arg:['123', 0, 1456499994597]}
};

var query = client.query('analytics', 'tracking', statement);
var stream = query.execute();

{ code: 100,
  message: 'UDF: Execution Error 1',
  func: 'as_query_aggregate',
  file: 'src/main/aerospike/aerospike_query.c',
  line: 903 }

local function map_profile(record)
  return map {interaction=record.interaction, 
              teamId=record.teamId, datetime=record.datetime, 
              timestamp=record.timestamp, version=record.version, 
              interactions=record.interactions}
end
function check_teamId(stream, teamId, startDate, endDate)
  local function filter_teamId(record)
    return record.teamId == teamId and 
           record.timestamp >= startDate and record.timestamp <= endDate
  end
  return stream : filter(filter_teamId) : map(map_profile)
end

