function object:move(velx, vely, subpixel)
    subpixel = subpixel or true;
    velx = velx or self.velx or 0;
    vely = vely or self.vely or 0;
    if (velx == 0 and vely == 0) then return end;

    local modx, mody = 0, 0;

    if (velx ~= 0) then 
        modx = (velx%(sign(velx)*256));
    end

    if (vely ~= 0) then
        mody = (vely%(sign(vely)*256));
    end

    velx = velx - modx;
    vely = vely - mody;

    if (subpixel) then
        if (self.subx) then
            self.subx = self.subx + modx;
        end
        if (self.suby) then
            self.suby = self.suby + mody;
        end

        if (self.subx >= 256 or self.subx <= -256) then
            velx = velx + (sign(self.subx)*256);
            self.subx = self.subx % (sign(self.subx)*256);
        end
        if (self.suby >= 256 or self.suby <= -256) then
            vely = vely + (sign(self.suby)*256);
            self.suby = self.suby % (sign(self.suby)*256);
        end
    end

    local movex = velx/256;
    local movey = vely/256;

    self:setPosition(self.x+movex, self.y+movey);

    return modx, mody;
end

