local wave = 1
local zombies = wave

local rectGroup = display.newGroup()

local rect = display.newRect(rectGroup,display.contentCenterX+90,display.contentCenterY,50,400)

local function moveup()
zombies=zombies-1
rectGroup.y=rectGroup.y+5
end


local needToup = false

local function handleEnterFrame( event )
    if ( needToup == true ) then
        moveup()
    end
end
Runtime:addEventListener( "enterFrame", handleEnterFrame )

local function handleupButton( event )
    if ( event.phase == "began" ) then
        -- Fire the weapon
        needToup = true
    elseif ( event.phase == "ended" and needToup == true ) then
        -- Stop firing the weapon
        needToup = false
    end
    return true
end

local circleup = display.newCircle(display.contentCenterX,display.contentCenterY,40)
circleup:addEventListener("touch",handleupButton)


local waveText = display.newText(wave, display.contentCenterX, 100, native.systemFontBold, 25)
local waveTitle = display.newText("Wave:", waveText.x, waveText.y-20, native.systemFontBold, 25)
local zombiesText = display.newText(zombies, display.contentCenterX, 175, native.systemFontBold, 25)
local zombiesTitle = display.newText("Zombies:", zombiesText.x, zombiesText.y-20, native.systemFontBold, 20)



function zombiesText.enterFrame( self )
   self.text = tostring(zombies)
end
Runtime:addEventListener("enterFrame", zombiesText )

function zombiesText.finalize( self )
   Runtime:removeEventListener( "enterFrame", self )
end
zombiesText:addEventListener("finalize")

function waveText.enterFrame( self )
   self.text = tostring(wave)
end
Runtime:addEventListener("enterFrame", waveText )

function waveText.finalize( self )
   Runtime:removeEventListener( "enterFrame", self )
end
waveText:addEventListener("finalize")



local function gameLoop()
if zombies==0 then
wave=wave+1
zombies=wave
end
if wave>1 then
print("On wave"..tostring(wave))
display.newRect(rectGroup,display.contentCenterX+90,-rectGroup[rectGroup.numChildren].y+70,50,400)
Runtime:removeEventListener("enterFrame", gameLoop)
Runtime:addEventListener("enterFrame", gameLoop)
end
end
Runtime:addEventListener("enterFrame", gameLoop)

