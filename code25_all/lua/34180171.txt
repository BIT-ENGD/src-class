local function map_profile(record)
 return map {name=record.name, password=record.password}
end
function check_password(stream,password)
 local function filter_password(record)
   return record.password == password
 end
 return stream : filter(filter_password) : map(map_profile)
end

