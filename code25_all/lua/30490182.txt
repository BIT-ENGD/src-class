utf8.charpattern
string.gmatch
-- Taken from http://www.lua.org/manual/5.3/manual.html#pdf-utf8.charpattern
local utf8charpattern = "[\0-\x7F\xC2-\xF4][\x80-\xBF]*"

-- Correctly shows `14´ in both cases (see below)
print( string.len(utf8charpattern) )

local function print_characters( s )
    local i = 1

    for c in s:gmatch( utf8charpattern ) do
        io.stdout:write( "#" , i , "\t" , c , "\n" )

        i = i + 1
    end
end

print_characters( "cántico" )

luatex
luajittex
\0
string.match
\0
%z
\0
\001
