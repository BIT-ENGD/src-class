str = " for xxxx in (yyyy) do @ for xxxx in pairs(yyyy) do"
for cap in string.gmatch(str, "(for(.-)in(.*)do)") do
Print (cap)
end

xxxx
yyyy
for xxxx in (yyyy)
for xxxx in pairs(yyyy) do
