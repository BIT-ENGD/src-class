coroutine
s=0

function calc(x,n)
    print(x,n)
    for a=x,n,1 do
        for b=a+1,n-1,1 do
            if is_coprime(a,b,false) then
                c=math.sqrt((a^2)+(b^2))
                if c<=b or c>n then break; end
                if is_coprime(a,b,c) then
                    s=s+1
                    break
                end
            end
        end
    end
end

function main(n)
    local t=0
    for i=1,n,n*.1 do
        co=coroutine.create(calc)
        coroutine.resume(co,i,n)
    end
    for _,v in ipairs(s) do
        t=t+1
    end
    return t
end

