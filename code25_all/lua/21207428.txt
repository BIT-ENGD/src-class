 --Include sqlite
 require "sqlite3"
 --Open data.db.  If the file doesn't exist it will be created
 local path = system.pathForFile("library.sql", system.ResourceDirectory)
 db = sqlite3.open( path )   

 --Handle the applicationExit event to close the db
 local function onSystemEvent( event )
    if( event.type == "applicationExit" ) then              
        db:close()
    end
end


--print the sqlite version to the terminal
print( "version " .. sqlite3.version() )

--print all the table contents
for row in db:nrows("SELECT * FROM book") do
 local text = row.bookName
 local t = display.newText(text, 20, 30 * row.id, null, 16)
 t:setTextColor(255,0,255)
end

--setup the system listener to catch applicationExit
Runtime:addEventListener( "system", onSystemEvent )

