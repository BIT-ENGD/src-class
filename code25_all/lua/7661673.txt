if request:sub(1,4) == "POST" then
    print ("GOT DATA UPLOAD")

    request,err = client:receive()
    local state = 0
    local lastdummy = ""

    while state ~= 3 and not err do
            request,err = client:receive()

        -- data between bounderies
        if state == 2 then 
            if request == "\r" then print ("----OK"); end

            print (request)

        end

            if state == 0 and request:sub(1,13) == "Content-Type:" then
            a,b = string.find (request, "boundary=")
            if a > 0 then
                lastdummy = (string.sub(request,b+1))   
                state = 1
            end
        elseif state == 1 then
            if request == "--"..lastdummy then
                print ("startttt")
                state = 2
            end
        elseif state == 2 then
            if request == "--"..lastdummy then
                print ("ENNNNND")
                state = 3
            end     
        end

    end
    state = 0
    print ("done")
end

