local events = setmetatable({}, {__mode="k"})

function registerEvent(reference, callback)
  events[reference] = callback
end

events
function launchEvents()
  for reference,callback in pairs(events)
    callback(reference)
  end
end

events
launchEvents
events
function launchEvents()
  collectgarbage()
  for reference,callback in pairs(events)
    callback(reference)
  end
end

launchEvents
