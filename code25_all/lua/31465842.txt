socket.http
local config = {
    token = "oauth token from github"
}

local http, ltn12 = require("socket.http"), require("ltn12")
local payload = '{"title": "Test", "body": "Test body", "labels": ["bug"]}'
local response, status, headers, line = http.request("https://api.github.com/repos/<username>/<repository>/issues?access_token=" .. config.token, payload)

local response = {}
local _, status, headers, line = http.request{
    url = "https://api.github.com/repos/<username>/<repository>/issues",
    sink = ltn12.sink.table(response),
    method = "POST",
    headers = {
        ["Authorization"] = "token " .. config.token,
        ["Content-Length"] = payload:len()
    },
    source = ltn12.source.string(payload)
}

print(status)
connection refused
curl -H "Authorization: token <oauth token from github>" https://api.github.com/repos/<username>/<repository>/issues -XPOST -d '{"title": "Test", "body": "{"title": "Test", "body": "Test body", "labels": ["bug"]}'

