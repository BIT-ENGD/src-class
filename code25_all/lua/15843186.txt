...
local self, x, y = ...

self, type, ...
local self, type, ... = ...

text = "return function(self, type, ...)" + text + " end";
luaL_loadbufferx(L, text, text.length(), filename, "t");
lua_call(L, 0, 1);

