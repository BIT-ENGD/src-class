function tempFunc()
local currentDate = os.date("*t");
local startSource = fibaro:getSourceTrigger()
local sliderValue = fibaro:getGlobalValue("MorningTime")

local minutes = ((sliderValue - 50) x 120)

if (( fibaro:getGlobalValue("MorningScene") == "On"  and  
     ((currentDate.wday == 2 or 
     currentDate.wday == 3 or 
     currentDate.wday == 4 or 
     currentDate.wday == 5 or 
     currentDate.wday == 6) and 
     string.format("%02d", currentDate.hour) .. ":" .. string.format("%02d", currentDate.min) == "08:05") ))
     then
     fibaro:call(5, "setArmed", "1");
  end
 setTimeout(tempFunc, 60*1000)
end

if (sourceTrigger["type"] == "autostart") then
  tempFunc()
 else

 local currentDate = os.date("*t");
 local startSource = fibaro:getSourceTrigger()
 if
  (fibaro:getGlobalValue("MorningScene") == "On" and 
  (currentDate.wday == 2 or 
   currentDate.wday == 3 or 
   currentDate.wday == 4 or 
   currentDate.wday == 5 or 
   currentDate.wday == 6))
  then
    fibaro:call(5, "setArmed", "1")
 end

end

