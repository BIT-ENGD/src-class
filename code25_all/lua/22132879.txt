--ball collides with balloon
function ballCollision(e)
    if (e.other.name == 'balloon') then
       --ball collision codes
    end

    if(target.text == '0') then
        alert('win')
    end
end

function checkGameover()
    print( "Check game over" )
    for i = 1, cannonBalls.numChildren do
         print( i )
         if(tonumber(ballRemain.text) <= 0) then
             gameFun()
         end
    end
end

function gameFun()
    balloonText.isVisible = false
    balloonTextt.isVisible = false
    balloonTexttt.isVisible = false
    questionText.isVisible = false
    askUser = display.newText('Is the cannon hard to use?', display.contentCenterX, display.contentWidth / 4, native.systemFont, 20 ) 
    askUser:setFillColor(135, 75, 44)
    yesBtn = display.newImage("Yes.png",120,290)
    noBtn = display.newImage("No.png",190,290)
    yesBtn:addEventListener ('tap', ansQuestion)
    noBtn:addEventListener ('tap', ansQuestion)
end

function ansQuestion(event)
    if event.target==noBtn then
        answer = answer+0
    else
        answer = answer+1
    end
    print('send mail')
    sendMail()
    askUser.isVisible = false
    yesBtn.isVisible = false
    noBtn.isVisible = false
    yesBtn:removeEventListener ('tap', ansQuestion)
    noBtn:removeEventListener ('tap', ansQuestion)
    alert('lose')

end

function alert(state)
    gameListeners('rmv')

    local alert
    if(state == 'win') then
        alert = display.newImage('win.png')     
    else
        alert = display.newImage('lose.png')
    end
    askUser.isVisible = false
    yesBtn.isVisible = false
    noBtn.isVisible = false
    print("time from start: ", (system.getTimer()-gameTime))
    alert.anchorX = 0.5
    alert.anchorX = 0.5
    alert.x = display.contentCenterX
    alert.y = display.contentCenterY
    transition.from(alert, {time = 3000, xScale = 0.3, yScale = 0.3})

    local score = display.newText(score.text, 300, -30, native.systemFontBold, 20)
    score:setFillColor(135, 75, 44)
end

