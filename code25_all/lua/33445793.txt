myString = "print('i,j in myString before setting', i, j);\
            i = 'fi'; j ='fj'\
            print('i,j in myString after setting', i,j)"
j = 1
print('j initial value', j)

function run(i)
    i = 'i'
    print('i initial value', i)
    f = loadstring(myString)
    if not f then
        print('load failed')
    else
        print('=== load ok, now execute')
        f()
        print('=== end of execution')
    end
    print('i,j after f()', i,j)

    g = function()
        i = 'gi'; j = 'gj'
    end
    g()
    print('i,j after g()', i,j)
end

run(i)

j initial value   1
i initial value   i
=== load ok, now execute
i,j in myString before setting   nil   1
i,j in myString after setting fi fj
=== end of execution
i,j after f()  i  fj
i,j after g()  gi gj

