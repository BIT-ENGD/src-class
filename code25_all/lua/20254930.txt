--lua for game


--Loading the local variables

--creates the storyboard variable and calls the storyboard api
local storyboard = require ("storyboard")

--calls the mydata.lua module 
local myData = require( "mydata" )

--calls the sfx.lua where sounds are stored 
local sfx = require( "sfx" )
--calls the operations.lua
local operations = require("operations")
local content = require("content")
local playOrder
local wordGraphic
local currQuestion = 1
local homeButton


--tells storyboard to create a new scene
local scene = storyboard.newScene()

function scene:createScene(event)

    local gameScreen = self.view

        --creates a transparent background image centered on the display
    local gameBackground = display.newImage("images/graphics/jungle1.jpg")
        gameBackground.x = display.contentWidth/2
        gameBackground.y = display.contentHeight/2
        gameScreen:insert(gameBackground)

    homeButton = display.newImage("images/buttons/home.png")
        homeButton.alpha = .8
        homeButton.y = 70
        gameScreen:insert(homeButton)

    playOrder = operations.getRandomOrder(#content)

end


local function onHomeTouch(event)
        if event.phase == "began" then
        storyboard.gotoScene("start")
        end
    end 

    function scene:enterScene(event)
    homeButton:addEventListener("touch", onHomeTouch)   
    audio.play(sfx.Bkgd)

    --uses the operations.lua to get words in a random order from the content.lua



    --shows a random word from the content.lua table
    function showWord()
    local word = content[playOrder[currQuestion]].word
    print(word)

        wordGraphic = self.view
        wordGraphic:insert(word)

    wordGraphic.x = display.contentWidth/2
    wordGraphic.y = display.contentHeight/2
    end 
end



    --next question function which clears the screen and loads a new random word


    function scene:exitScene(event)
    homeButton:removeEventListener("touch", onHomeTouch)
    end




function scene:destroyScene(event)

end


--the actual event listeners that make the functions work
scene:addEventListener("createScene", scene)
scene:addEventListener("enterScene", scene)
scene:addEventListener("exitScene", scene)
scene:addEventListener("destroyScene", scene)



return scene

--operations.lua
module(..., package.seeall)


--function to get a random piece of data
function getRandomOrder(amount)
    local order ={}
    local i
    local temp
    local temp1
    for n = 1,amount do
        order[n] = n
    end
    for i=0,9 do
        for temp = 1,amount do
            n = math.random(1, amount)
            temp1 = order[temp]
            order[temp] = order[n]
            order[n] = temp1
        end
    end
    return order
end 

--content.lua
return {
    {
        id = "after",
        word = "after"
    },

    {
        id = "again",
        word = "again"
    },

    {
        id = "an",
        word = "an"
    },

    {
        id = "any",
        word = "any"
    },

    {
        id = "ask",
        word = "ask"
    },

    {
        id = "as",
        word = "as"
    },

    {
        id = "by",
        word = "by"
    }
}

