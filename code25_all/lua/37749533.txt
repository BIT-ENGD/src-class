wifi.setmode(wifi.STATION)
wifi.sta.config("SSID","PWD")
function loop() 
    if wifi.sta.status() == 5 then
        -- Stop the loop
        tmr.stop(0)
    else
        print("Connecting...")
    end
end
tmr.alarm(0, 100, 1, function() loop() end)
print(wifi.sta.getip())

outpin_led = 1
inpin_button = 3

gpio.mode(outpin_led,gpio.OUTPUT)
gpio.mode(inpin_button,gpio.INPUT)
light_on = false

function light()
    if not light_on then
        -- turn the light on
        gpio.write(outpin_led,gpio.HIGH)
        light_on = true
        http.get("https://google.com", function(clt, data)
            print(data)
        end)
    else
        -- turn the light off
        gpio.write(outpin_led,gpio.LOW)
        light_on = false
    end
end

gpio.trig(inpin_button,"down",light)

http.get
> PANIC: unprotected error in call to Lua API (stdin:6: attempt to index global 'http' (a nil value))
http
http://nodemcu-build.com/
