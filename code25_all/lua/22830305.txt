                 .

 digits = session:playAndGetDigits(1, 3, 3, 3000, "#", "/var/sipxdata/mediaserver/data/ivrscript/sampleLua/prompts/coral.wav", "/var/sipxdata/mediaserver/data/ivrscript/sampleLua/prompts/coral.wav", "\\d+"); 
    if (digits == "1")  then

        repeat

             digits = session:playAndGetDigits(1, 3, 3, 3000, "#", "/var/sipxdata/mediaserver/data/ivrscript/sampleLua/prompts/SPG_greet_long.wav","/var/sipxdata/mediaserver/data/ivrscript/sampleLua/prompts/SPG_greet_long.wav", "\\d+");
            if (digits == "1")  then
               language = "de"
               session:execute("set","transfer_ringback=$${us-ring}");
               session:execute("bridge","sofia/coraltele.com/819@192.168.22.1");
               session:hangup();


            elseif (digits == "2")  then
                language = "de"
                session:execute("set","transfer_ringback=$${us-ring}");
                session:execute("bridge","sofia/coraltele.com/826@192.168.22.1");
                session:hangup();

            elseif (digits == "9") then
                i = i + 1

            elseif (digits == "0") then

                goto chandu


            else
                language = "de"
                session:execute("set","transfer_ringback=$${us-ring}");
                session:execute("bridge","sofia/coraltele.com/898@192.168.22.1");
                session:hangup();

            end
                   until i == 3


    elseif(digits == "0") then

        j = j + 1

    else
        language = "de"
        session:execute("set","transfer_ringback=$${us-ring}");
        session:execute("bridge","sofia/coraltele.com/898@192.168.1.240");
        session:hangup();
    end
until j == 2

 language = "de"
 session:execute("set","transfer_ringback=$${us-ring}");
 session:execute("bridge","sofia/coraltele.com/898@192.168.1.240");
 session:hangup();  

