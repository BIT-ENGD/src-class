local my_dictionary = {a = 123; b = 321; c = 456; d = 654};

local function each(list)
    if #list > 0 then
        local function my_itr(lst, ind)
            return next(lst, ind);
        end
        return my_itr, List, 0;
    end
    return function() end, nil, nil;
end

local mytable = {a = 123; b = 321; 3, 2, 1, c = "bca"};
for i,v in each(mytable) do
    print(i,v);
end

>a 123
>b 321
>1 3
>2 2
>3 1
>c bca

