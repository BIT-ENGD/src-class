sqlite3
require "sqlite3"

--create path
local path = system.pathForFile("expenses.sqlite", system.DocumentsDirectory )
file = io.open( path, "r" )
if( file == nil )then           
    -- Doesn't Already Exist, So Copy it In From Resource Directory                          
    pathSource = system.pathForFile( "expenses.sqlite", system.ResourceDirectory )  
    fileSource = io.open( pathSource, "r" ) 
    contentsSource = fileSource:read( "*a" )                                  
    --Write Destination File in Documents Directory                                  
    pathDest = system.pathForFile( "expenses.sqlite", system.DocumentsDirectory )                 
    fileDest = io.open( pathDest, "w" )                 
    fileDest:write( contentsSource )                 
     -- Done                      
    io.close( fileSource )        
    io.close( fileDest )         
end
db = sqlite3.open( path )

--setup the table if it doesn't exist
local tableSetup = [[CREATE TABLE IF NOT EXISTS expenses (id INTEGER PRIMARY KEY, amount, description, year, month, day);]]
db:exec(tableSetup)
local tableFill = [[INSERT INTO expenses VALUES (NULL,']] .. 15 .. [[',']] .. "Groceries" .. [[',']] .. 2013 .. [[',']] .. 4 .. [[',']] .. 8 ..[[');]]
db:exec(tableFill)

for row in db:nrows("SELECT * FROM expenses") do
        print("hi")
        if row.year == dateTable[i].year and row.month == dateTable[i].month and row.day == dateTable[i].day then
            flag = dateTabel[i].day
        end
end

print("hi")
db:nrows("SELECT year, month, day FROM expenses")
