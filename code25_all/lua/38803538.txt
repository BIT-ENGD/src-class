require(dir.."/"..name)
~/x/main.lua
~/x/folder/file1.lua
~/x/folder/file2.lua
~/x/folder/file3.lua
~/x/folder/file4.lua
~/x/folder/file5.lua

local printTable = require "printTable"

-- scan dir and add the file contents (name ,function(if .lua), filepath from script) to a table
function appendDir(functiontable,dir)
  for filename in io.popen('dir "'..dir..'" -1'):lines() do
    print(filename)
    local path = dir.."/"..filename
    local name = filename:sub(1,filename:len()-4)
    print(name)
    local tempValue = false
    if filename:sub(filename:len()-3,filename:len()) == ".lua" then tempValue = require(dir.."/"..name) end
    functiontable[name]={["value"]=tempValue,["path"]=path}
    printTable(functiontable)
  end
  print("---")
  printTable(functiontable)
end

local table1 = {}
appendDir(table1,"./folder")

print("")
print("table1:")
printTable(table1)

for key,value in pairs(table1) do
  value.value()
end

function func()
  return "$string"
end

return func

~/x/folder/file1.lua   $string=string of file 1
~/x/folder/file2.lua   $string=string of file 2
~/x/folder/file3.lua   $string=string of file 3
~/x/folder/file4.lua   $string=string of file 4
~/x/folder/file5.lua   $string=string of file 5

~/x $ lua -v
Lua 5.1.5  Copyright (C) 1994-2012 Lua.org, PUC-Rio
~/x $dir folder -1
file1.lua
file2.lua
file3.lua
file4.lua
file5.lua
~/x $ lua main.lua
file1.lua
file1
[file1][value] ->       TYPE == function
[file1][path] ->        VALUE == ./folder/file1.lua
file2.lua
file2
[file1][value] ->       TYPE == function
[file1][path] ->        VALUE == ./folder/file1.lua
file3.lua
file3
[file3][value] ->       TYPE == function
[file3][path] ->        VALUE == ./folder/file3.lua
file4.lua
file4
[file3][value] ->       TYPE == function
[file3][path] ->        VALUE == ./folder/file3.lua
file5.lua
file5
[file4][value] ->       TYPE == function
[file4][path] ->        VALUE == ./folder/file4.lua
---
[file4][value] ->       TYPE == function
[file4][path] ->        VALUE == ./folder/file4.lua

table1:
[file4][value] ->       TYPE == function
[file4][path] ->        VALUE == ./folder/file4.lua

