local t = {}
    local composer = require("composer")
    t.drops = {}

    function t.fall(drops, group)
        for i = 1, #drops, 1 do
            local thisDrop = drops[i]
            function thisDrop:enterFrame()
                if aboutToBeDestroyed == true then
                    Runtime:removeEventListener("enterFrame", self)
                    return true
                end
                local randomY = math.random(32, 64)
                if self.x ~= nil then
                    self:translate(0, randomY)
                    if self.y > 2000 then
                        self:removeSelf()
                        Runtime:removeEventListener("enterFrame", self)
                        self = nil
                    end
                end
            end
            Runtime:addEventListener("enterFrame", drops[i])
            thisDrop = nil
        end
    end

    t.clean = function()
        for i = 1, #t.drops, 1 do
            if t.drops[i] ~= nil then
                table.remove(t.drops, i)
                t.drops[i] = nil
            end
        end
    end

    function t.start(group)
        local drops = {}
        local theGroup = group
        for i = 1, 20, 1 do
            local randomWidth = math.random(5, 30)
            local dropV = display.newRect(group, 1, 1, randomWidth, 30)
            local drop1 = display.newSnapshot(dropV.contentWidth , dropV.contentHeight * 3)
            drop1.canvas:insert(dropV)
            drop1.fill.effect = "filter.blurVertical"
            drop1.fill.effect.blurSize = 30
            drop1.fill.effect.sigma = 140
            drop1:invalidate("canvas")
            drop1:scale(0.75, 90)
            drop1:invalidate("canvas")
            drop1:scale(1, 1 / 60)
            drop1:invalidate("canvas")
            local drop = display.newSnapshot(drop1.contentWidth * 1.5, drop1.contentHeight)
            drop.canvas:insert(drop1)
            drop.fill.effect = "filter.blurHorizontal"
            drop.fill.effect.blurSize = 10
            drop:invalidate("canvas")
            drop.alpha = 0.375
            local randomY = math.random(-500, 500)
            drop.y = randomY
            drop.anchorY = 0
            drop.x = (i - 1) * 54
            drops[i] = drop
            table.insert(t.drops, drop)
            local dropV, drop1, drop = nil
        end
        composer.setVariable("drops", t.drops)
        t.fall(drops, group)
        drops = nil
        t.clean()
    end
return t

