-- ASCII value(hex) of keyboard keys.
#define KEY_UP      "\x41"
#define KEY_DOWN    "\x42"
#define KEY_RIGHT   "\x43"
#define KEY_LEFT    "\x44"

-- terminal object is defined and created

function terminal:receive()
    -- Set buffer and shorthand to self.port.read
    local read = function() return self.port:read() end
    local received = ""

    while true do
        -- Read Input
        local line = read()
        if ( not line ) then break end
        received = received .. line

        -- Search for the key.
        -- Don't search in line, due different baudrates might not
        -- Get the entire digit at once.
        if ( received:find( KEY_UP ) ) then
            return KEY_UP
        elseif ( received:find( KEY_DOWN ) ) then
            return KEY_DOWN
        ... and so on
        end
    end
end

