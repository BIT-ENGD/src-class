globalvar = {}

function buttonCallback(buttonId)
    ...accessing globalvar
end

device.RegisterButtonCallback("buttonCallback")

while true do
end

#require "socket"

globalvar = {}

function buttonCallback(buttonId)
    ...access globalvar
end

device.RegisterButtonCallback("buttonCallback")

while true do
    socket.select(nil, nil, 60)  -- wait 60 seconds
    ...access network
    ...access globalvar
end

