location /_auth {
    proxy_set_header  Accept-Encoding  "";
    proxy_pass http://127.0.0.1:8080/Welvi-rest;
}
location /server/ {
    content_by_lua "
        local res = ngx.location.capture('/_auth');
        ngx.print(res.status);
        if res.status ~= ngx.HTTP_OK then
            ngx.exit(ngx.HTTP_FORBIDDEN)
        end
    ";
}

