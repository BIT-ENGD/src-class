int luaopen_foo(lua_State*)
int luaopen_foo(lua_State* state) {
    lua_pushstring("foo");
    lua_pushnumber(10);
    lua_settable(state, LUA_REGISTRYINDEX);
}

require "foo"

foo
state
