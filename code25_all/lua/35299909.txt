local backgroundMusic
local backgroundMusicChannel

local function stopSound(event)
    audio.stop(event.channel)
    audio.dispose(event.handle)
    backgroundMusic = nil
end

function scene:create(event)
    backgroundMusic = audio.loadSound("music/intro.mp3")
    backgroundMusicChannel = audio.play(backgroundMusic, {loops = -1, fadein = 3000, onComplete = stopSound})
end

function scene:destroy(event)
    audio.fadeOut({channel = backgroundMusicChannel, time=2000})
end

function scene:destroy(event)
    audio.fadeOut({channel = backgroundMusicChannel, time=2000})
    audio.stop(backgroundMusicChannel)
end

