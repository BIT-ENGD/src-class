-- Save hostname into a temporary variable
local tempMetaValue = hostname

local count = 0
local byte_char = string.byte(".")
for i = 1, #tempMetaValue do
    if string.byte(tempMetaValue, i) == byte_char then
        count = count + 1
    end
end

local dotCount = count

-- If there was only one dot do nothing
if dotCount == 1 then
    return 0

-- Check whether there were more than one dot
elseif dotCount == 2 then
    -- Get the index of the first dot
    local beginIndex = string.find(tempMetaValue,".",1,true)
    -- Get the substring starting after the first dot
    local domainMeta = string.sub(tempMetaValue,beginIndex+1)
    -- Double check that the substring exists
    if domainMeta ~= nil then
        -- Populate the domain meta field
    end
-- If there are more than two dots..
elseif dotCount > 2 then
    -- Test to see if the hostname is actually an IP address
    if tempMetaValue:match("%d%d?%d?%.%d%d?%d?%.%d%d?%d?%.%d%d?%d?") then
        -- Skip the rest if an IP address was found
    end
    -- Get the index of the second to last dot
    local beginIndex = string.find(tempMetaValue,"\.[^\.]*\.[^\.]*$")
    -- Get the substring starting after the second to last dot
    local domainMeta = string.sub(tempMetaValue,beginIndex+1)
    -- Double check that the substring exists
    if domainMeta ~= nil then
        -- Populate the domain meta field
    end
end

