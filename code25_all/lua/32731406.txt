<Service>
<NewInstance ref="E961625723F5FDC8BD550077282E074C">
<Std>DiscoveredElement</Std>
<Key>E961625723F5FDC8BD550077282E074C</Key>
<Attributes>
<Attribute name="TARGET_TYPE" value="j2ee_application" />
<Attribute name="AppType" value="ear" />
<Attribute name="TARGET_GUID" value="E961625723F5FDC8BD550077282E074C" />
<Attribute name="TARGET_NAME"
value="/Farm_b2b4_sys20_b2b4_domain/b2b4_domain/WLS_B2B4a/worklistapp" />
</Attributes>
</NewInstance>
<NewInstance ref="FD8A116D5C8DD2332B024BCBD6A81BD8">
<Std>DiscoveredElement</Std>
<Key>FD8A116D5C8DD2332B024BCBD6A81BD8</Key>
<Attributes>
<Attribute name="TARGET_TYPE" value="composite" />
<Attribute name="SERVICE_TYPE" value="" />
<Attribute name="TARGET_NAME" value="LAB-DB-B-AIX-Grp" />
<Attribute name="TARGET_GUID" value="FD8A116D5C8DD2332B024BCBD6A81BD8" />
</Attributes>
</NewInstance>
</Service>

NewInstance
local file = io.open("sample.xml", "rb")   -- Open file for reading (binary data)
for instance in file:read("*a"):gmatch("<NewInstance ref=\"(.-)\">") do  -- Read whole file content and iterate through attribute matches

TARGET_TYPE = instance:gmatch('TARGET_TYPE.-value=\"(.-)\"')
TARGET_NAME = instance:gmatch('TARGET_NAME.-value=\"(.-)\"')
print("New Instance :", instance)
print("Target Type : ",TARGET_TYPE)
print("Target Name : ",TARGET_NAME)
end
file:close()

New Instance :  E961625723F5FDC8BD550077282E074C
Target Type :   function: 0050E9C0
Target Name :   function: 0050EA10
New Instance :  FD8A116D5C8DD2332B024BCBD6A81BD8
Target Type :   function: 0050EA60
Target Name :   function: 0050EAB0
Exit code: 0

local file = io.open("sample.xml", "rb")   -- Open file   for reading (binary data)
for instance in file:read("*a"):gmatch("<NewInstance ref=\"(.-)\">") do
TARGET_TYPE = instance:match('TARGET_TYPE.-value="(.-)"')
TARGET_NAME = instance:match('TARGET_NAME.-value="(.-)"')
print("New Instance :", instance)
print("Target Type : ",TARGET_TYPE)
print("Target Name : ",TARGET_NAME)
end
file:close()

lua -e "io.stdout:setvbuf 'no'" "prac.lua" 
New Instance :  E961625723F5FDC8BD550077282E074C
Target Type :   nil
Target Name :   nil
New Instance :  FD8A116D5C8DD2332B024BCBD6A81BD8
Target Type :   nil
Target Name :   nil
Exit code: 0

