w = print
function test()
   local function _ix( _ , k )
w( "              _ix \\ " , _ , k )
            local v = rawget( _G , k )
w( "              <-- " , k )
         return k
         end
  local _ = setmetatable( {} , { __index = _ix } )
  local function q( _ )    return _  end
        q = setfenv( q , _ )
return q
end

q = test()
w( "q( uno )" , q( uno ) )

---------- Capture Output ----------

q( uno )    nil

> Terminated with exit code 0.

