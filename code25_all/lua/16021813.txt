#{[-5]=1,[-1]=3}

t
n
t[n]
nil
t[n+1]
nil
n=-5
n=-1
t[1]
nil
n
nil
nil
nil
n=-5
n=-1
__len
t
  {10, 20, nil, 40}

4
3
a = setmetatable(
  {0},
  {
    __index = function(t,k)
      return k < 10 and k or nil 
    end
  }
)
i = 1
while a[i] do
  print(a[i])
  i = i+1
end
--[[ prints:
0
2
3
4
5
6
7
8
9
]]
print(#a)
-- prints: 1

__index
