local TimeServer = "http://www.timeapi.org/utc/now"

local TimeR = http.get(TimeServer).readAll() -- Pretend that this gives the string "2013-12-24T14:19:59+00:00"

local function TimeThread()
  local Last = 1
  local Ser = string.find(TimeR, "-")
  local Year = TimeR:sub(Last, Ser - 1)
  TimeR = TimeR:sub(Ser + 1)
  Ser = string.find(TimeR, "-")

  local Month = TimeR:sub(Last, Ser - 1)
  TimeR = TimeR:sub(Ser + 1)
  Ser = string.find(TimeR, "T")

  local Day = TimeR:sub(Last, Ser - 1)
  TimeR = TimeR:sub(Ser + 1)
  Ser = string.find(TimeR, ":")

  local Hour = TimeR:sub(Last, Ser - 1)
  TimeR = TimeR:sub(Ser + 1)
  Ser = string.find(TimeR, ":")

  local Minute = TimeR:sub(Last, Ser - 1)
  TimeR = TimeR:sub(Ser + 1)
  Ser = string.find(TimeR, "+")

  local Second = TimeR:sub(Last, Ser - 1)
  print(Year .. ", " .. Month .. ", " .. Day .. ", " .. Hour .. ", " .. Minute .. ", " .. Second)
end 

TimeThread()

