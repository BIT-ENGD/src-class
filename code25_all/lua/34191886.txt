function DoCustomLookup(wkItem,wkfId,wkevid,lookupTableID,scandate,lookuptext,lookupval,evtAlertText,newvalue,xtraFld1,xtraFld2,xtraFld3,xtraFld4,newStatus,newStatusDesc,errFlags) 
    local rslt = "Script error"  
    print (scandate)
    local scYY = scandate.sub(1,4)
    local scMM = scandate.sub(7,2)
    local scDD = scandate.sub(10,2)  
     print (scYY)
     print (scMM)
     print (scDD)
     local scandt = #scandate
     print (scandt)
    scYY,scMM, scDD = scandate.match("(%d+)%-(%d+)%-(%d+)%s.+")
...
end

2015-12-10 01:00:02


0
19
Workflow script error. Line :17: bad argument #2 to 'match' (string expected, got no value)

bool LuaScript::DoCustomLookup(int wkItem, int wkfId, int wkevid, const int lookupTableID, const std::string scantime,
    const std::string& lookuptext, const std::string& lookupval, const std::string evtAlertText, 
    std::string& newvalue,
    const std::string xtraFld1, const std::string xtraFld2, const std::string xtraFld3, const std::string xtraFld4,
    int& newStatus, std::string& newStatusDesc, AlertFlags& errFlags, std::string& errMsg)
{     
    errMsg = "";
    char **date**[50];
    sprintf(date, "%s", scantime.c_str());
    lua_getglobal(L, "DoCustomLookup");     // get function
    lua_pushinteger(L, wkItem);     // push parameter on call stack
    lua_pushinteger(L, wkfId);      // push parameter on call stack
    lua_pushinteger(L, wkevid);     // push parameter on call stack
    lua_pushinteger(L, lookupTableID);      // push parameter on call stack 
    lua_pushstring(L, **date**);    // push parameter on call stack 
    lua_pushstring(L, lookuptext.c_str());  // push parameter on call stack
    lua_pushstring(L, lookupval.c_str());   // push parameter on call stack
    lua_pushstring(L, evtAlertText.c_str());    // push parameter on call stack  
    lua_pushstring(L, newvalue.c_str());    // push parameter on call stack         
    lua_pushstring(L, xtraFld1.c_str());    // push parameter on call stack
    lua_pushstring(L, xtraFld2.c_str());    // push parameter on call stack
    lua_pushstring(L, xtraFld3.c_str());    // push parameter on call stack
    lua_pushstring(L, xtraFld4.c_str());    // push parameter on call stack
    lua_pushinteger(L, newStatus);      // push parameter on call stack
    lua_pushstring(L, newStatusDesc.c_str());   // push parameter on call stack
    lua_pushinteger(L, errFlags);       // push parameter on call stack

    int rslt = lua_pcall(L, 16, 1, 0);

