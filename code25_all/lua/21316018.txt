local mt = {}  
function mt:add(n)  
  return setmetatable({n = n}, {__index = mt})  
end

function mt:get() return self.n end

mt.math
mt.effect

mt.math:floor() return math.floor(self:get()) end
mt.effect:show(args) onMapShowEffect(self:get(), {x = x + (args[1] ~= nil or 0), ...) end
mt.effect:get() return getCurrentPos() end

Player = {}  
function Player:add(this)
  return setmetatable({this = this}, {__index = Player})
end

Player:get() return self.this end

function enterToGame(player1, player2)
  local p1 = Player:add(player1)
  local p2 = Player:add(player2)
  print(p1:get()) -- ID1
  print(p2:get()) -- ID2

Player.info = {
  id = function() return Player:get() end,
}
Player.pos = {
  get = function() return getPosition(Player:get()) end,
  set = function(args) setPosition(Player:get(), args) end,
}
Player.speed = {
  get = function() return getSpeed(Player:get()) end,
  set = function(value) setSpeed(value) end,
  improve = function(value) setSpeed(Player.speed.get() + value) end,
}

function enterToGame(player1, player2)
  local p1 = Player:add(player1)
  local p2 = Player:add(player2)
  print(p1:get()) -- ID1
  print(p2:get()) -- ID2
  print(p1.info.id()) -- ID2 instead of ID1
  print(p2.info.id()) -- ID2

