local fs = require "lfs"

local const = {}
for num = 1, 14 do
    const[num] = assert(
        dofile (const_path .. mkfilename(num)),
        "Failed to load constant configuration  ".. num ..".")
end




local function file_number()  --this is the function that causes me a headach
    local ci, co, num = ipairs(const)-- when I print num is 0 and ci,co are nil
    local vi, vo, _   = fs.dir(virt_path)--  what does _ mean here ? 
    local function vix(o)
        local file = vi(o)
        if file == nil then return nil end
        local number = file:match("^(%d+).lua$")
        if number == nil then return vix(o) end
        return tonumber(number)
    end
    local function iter(o, num)
        return ci(o.co, num) or vix(o.vo, num)---where is ci defined or impplemented 
    end
    return iter, {co=co, vo=vo}, num-- what 's the return value here ? 
end

