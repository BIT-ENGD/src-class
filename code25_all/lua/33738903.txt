function Class(superClass, constructor)
    local class = {};
    local metatable = {};

    if superClass then
        metatable.__index = superClass;
    end

    setmetatable(class, metatable);

    function metatable:__call(...)
        local instance = {};
        setmetatable(instance, { __index = class });

        if class.constructor then
            class.constructor(instance, ...);
        end

        return instance;
    end

    class.constructor = constructor;

    return class;
end

A = Class(nil, function(self, num)
    self.num = num;
end);

function A:__add(rhs)
    return A(self.num + rhs.num);
end

a = A(1);
b = A(2);

c = a + b;

