x
y
__add
Point = {}

function Point:new(x, y)
    local point = {}
    setmetatable(point, self)
    self.__index = self
    point.x = x or 0
    point.y = y or 0
    return point
end

Point.__add = function(a, b)
    return Point:new(a.x + b.x, a.y + b.y)
end

p = Point:new(2,2)
r1 = p + p
print(p.x, p.y) -- prints "4 4" as expected


ChildPoint = Point:new()
c = ChildPoint:new()

r2 = c + c -- Error: attempt to perform arithmetic on a table value (local 't1')
print(r.x, r.y)

__add
ChildPoint
ChildPoint
__index
__add
Point
