A = 5

file1 = include(File1.lua)
A = 1

print(A) -- 1
print(file1.A) -- 5

function include(scriptfile)
local env = setmetatable({}, {__index=_G})
assert(pcall(setfenv(assert(loadfile(scriptfile)), env)))
setmetatable(env, nil)
return env 
end

