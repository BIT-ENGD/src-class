local m = {
 {opt = "Solar Panels", cmd = "solarPanel"}
     -- There are many more options here.
}  

function doTheMenu()
 print("Welcome to Spyder's Factory")
 print("")
 print("What would you like to make?")
 local n = 1
 local l = #m - 1
 while true do             --This while loop may or may not be relevant to the question, it's the menu
 term.clear()              --this is ComputerCraft lua, the term function is defined
 term.setCursorPos(1,2)    --elsewhere in an API
  for i, j in pairs(m) do
   if i == n then
    if i < 10 then print(i, "  ["..j.opt.."]") else  print(i, " ["..j.opt.."]") end
     fsel = j.cmd          --set fsel to the function name I require in case of a break
     tsel = j.opt          --Ditto, tsel, human-friendly name
   else
    if i < 10 then print(i, "   "..j.opt) else  print(i, "  "..j.opt) end
   end
  end
  local a, b = os.pullEvent("key") 
  if b == 200 and n > 1 then n = n - 1 end
  if b == 208 and n <= l then n = n + 1 end 
  if b == 28 then break end
 end
 write("\nSure, how many "..tsel.."? ")
 qty = tonumber(read())
 req[fsel] = req[fsel] + qty
 str = fsel.."("..qty..")"
 print("Loading function '"..fsel.."("..qty..")'") --Returns "Loading function 'solarPanel(1)'"
 func = loadstring(str)
 print(func)      --Returns "function: 2cdfc5a7"
 print("Loading function")
 func()  --The error line, Returns "string:1: attempt to call nil"
 --tellUserWhatNeed()
 --makeItHappen()
end

doTheMenu()

string:1 attempt to call nil

