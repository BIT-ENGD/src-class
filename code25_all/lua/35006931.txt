He eats
the
bread

result = utils.editbox("What are you typing?")

result
string
print(result)
This is the result of three separate paragraphs.

As you can see, there is a line break between each paragraph.

So the result contains line breaks, or control characters.

for line in result:gmatch("[^%c]+%c?") do 
  Send(note_wrap(line))
end

note_wrap
function note_wrap(str, limit, indent, indent1)
  indent = indent or ""
  indent1 = indent1 or indent
  limit = limit or 79
  local here = 1-#indent1
  local last_color = ''
  return indent1..str:gsub("(%s+)()(%S+)()",
    function(sp, st, word, fi)
      local delta = 0
      local color_before_current_word = last_color
      word:gsub('()@([@%a])', 
        function(pos, c)
          if c == '@' then 
            delta = delta + 1 
          elseif c == 'x' then 
            delta = delta + 5
            last_color = word:sub(pos, pos+4)
          else                 
            delta = delta + 2 
            last_color = word:sub(pos, pos+1)
          end
        end)
      here = here + delta
      if fi-here > limit then
        here = st - #indent + delta
        return "\n"..indent..color_before_current_word..word
      end
    end)
end

He eats
the
bread

@rHe eats
@x123the
bread

Mary had a little lamb, little lamb, little lamb
Mary had a little lamb
It's fleece was white as snow

Mary had a little lamb, little lamb, little lamb

Mary had a little lamb

It's fleece was white as snow

Mary had a little
lamb, little lamb,
little lamb
Mary had a little
lamb
It's fleece was
white as snow

