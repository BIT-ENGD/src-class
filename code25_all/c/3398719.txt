struct request {
  int code;
  char *message;
};

void free_request(struct request *req) {
  if (req->message != NULL) {
      free(req->message);
  }
  free(req);
  req = NULL;
}

struct request *req;
req = malloc(sizeof(struct request));
req->message = "TEST";
free_request(req);

