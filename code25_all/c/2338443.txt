#include <stdio.h>
#include <windows.h>
char c[25];
void KeyEventProc(KEY_EVENT_RECORD);

void KeyEventProc(KEY_EVENT_RECORD ker){
    if(ker.bKeyDown) ; // do stuff
}

main(){
 HANDLE hStdin;
 DWORD cNumRead, fdwMode, fdwSaveOldMode, i;
 INPUT_RECORD irInBuf[128];
 hStdin = GetStdHandle(STD_INPUT_HANDLE);
 GetConsoleMode(hStdin, &fdwSaveOldMode);
 fdwMode = ENABLE_WINDOW_INPUT | ENABLE_MOUSE_INPUT;
 SetConsoleMode(hStdin, fdwMode);
 ReadConsoleInput(hStdin, irInBuf, 128, &cNumRead);
 for (i = 0; i < cNumRead; i++){
  switch(irInBuf[i].EventType){
   case KEY_EVENT:
    KeyEventProc(irInBuf[i].Event.KeyEvent);
    // do stuff
    break;
   default:
    // do stuff
    break;
  }
 }
 scanf("%s", &c);
 printf("%s", c);
}

