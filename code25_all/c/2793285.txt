static void foo(char *path) {
    char *bname;
    char *path2 = strdup(path);
    bname = basename(path2);

    bname = (char *)basename(path2);

char *basename(char *path);

Both dirname() and basename() return pointers to null-terminated strings.

