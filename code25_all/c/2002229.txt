#include <utmp.h>
#include <pwd.h>
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main(void)
{
    struct utmp *ptr;
    struct passwd *pwd;

    while(1)
    {

        while((ptr=getutent()) != NULL)
        {
            if(ptr->ut_type==USER_PROCESS)
            {
                pwd=getpwnam(ptr->ut_user);      
                printf("USERNAME = %s | ID = %d | GID = %d | ",p
tr->ut_user,pwd->pw_uid,pwd->pw_gid);
                printf("HomeDir = %s | HOST = %s\n",pwd->pw_dir,
ptr->ut_host);
            }
        }

        sleep(3);
        fflush(stdout);
    }

}

