bool folderexists( char * foldername )
{
if ( _access( foldername, 0 ) == 0 )
  { 
    struct stat status;
    stat( foldername, &status );

    if ( status.st_mode & S_IFDIR )
    {           
        //cout << "\nThe directory exists." << endl;
        return true;
    }
    else
    {
        //cout << "\nThe path you entered is a file." << endl;
        WriteToLog( "The path you entered is a file??????????????????", false );
        return false;
    }
}
else
{
    //cout << "\nPath doesn't exist." << endl;
    return false;
}
}//folderexists


void WriteToLog( char * text, bool star )
{
char time[ SMALL ], LogModel[ MEDIUM ], Day[ SMALL ], Month[ SMALL ];
FILE *logfile;

memset( time, 0, sizeof( time ) );
memset( Day, 0, sizeof( Day ) );
memset( Month, 0, sizeof( Month ) );

SYSTEMTIME lt;

GetLocalTime( &lt );

GetDayAndMonth( lt.wDayOfWeek , Day, lt.wMonth, Month );

sprintf( time, "[%s %s %d %02d:%02d:%02d]", Day, Month, lt.wDay, lt.wHour, lt.wMinute, lt.wSecond );

//printf("\nThe local time is: %02d:%02d\n", lt.wHour, lt.wMinute);

if ( !file_exists( LogFile ) )
{
    memset( LogModel, 0, sizeof( LogModel ) );
    strcpy( LogModel, LogFolder );
    strcat( LogModel, PCModel );

    if ( folderexists( LogFolder ) ) <== Here is where my App freeze!!!!!!!
    {
        if ( !folderexists( LogModel ) )
        {
            if ( !CreateDirectoryA( LogModel, NULL ) ) ShowError( "CreateDirectoryA .............................. Failed! ( creating LogModel folder ) ", true, true );
        }
    }
    else
    {
        printf( "\nLogFolder isn't reachable!" ); 
        exit(-1);
    }
}//file_exists

if ( ( logfile = fopen( LogFile, "a" ) ) == NULL ) 
{
    ShowError( "Failed to create Logfile!", false, true );
}
else 
{
    fputs( time, logfile );
    fputs( " - ", logfile );
    fputs( text, logfile );
    fputs( "\n", logfile );
    if ( star ) fputs( "**********************************************************************************************************************\n", logfile );

    fclose( logfile );

    //if ( star ) exit( -1 );
}
}//WriteToLog

