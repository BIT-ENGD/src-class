for(p=0;p+=(a&1)*b,a!=1;a>>=1,b<<=1);

