UART1_BUF[1] = (unsigned char)(lcl_ptr - (unsigned char *)&UART1_BUF[1]);

unsigned char UART1_BUF[128];

void apple_Build_SetFIDTokenValues(void)
/* apple_Build_SetFIDTokenValues - 
 * 
 * This function builds the apple protocol StartIDPS() command.
 */
{
 unsigned char * lcl_ptr;
 UART1_BUF[0] = BT_START_OF_PACKET;
 UART1_BUF[1] = 0x00;

 //BundleSeedIDPrefToken    
 lcl_ptr = apple_Build_BundleSeedIDPrefToken(&UART1_BUF[1]);

 UART1_BUF[1] = (unsigned char)(lcl_ptr - (unsigned char *)&UART1_BUF[1]);
*lcl_ptr = apple_checksum((unsigned char *)UART1_BUF, UART1_BUF[1]);
 UART1_BUF[UART1_BUF[1]] = *lcl_ptr;
}

unsigned char * apple_Build_BundleSeedIDPrefToken(unsigned char *buf_ptr)
{
    *(buf_ptr++) = 0x0D; //length of BundleSeedIDPrefToken minus this byte
    *(buf_ptr++) = BundleSeedIDPref_Token_FID_TYPE;
    *(buf_ptr++) = BundleSeedIDPref_Token_FID_SUBTYPE;
    //BundleSeedIDString
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    *(buf_ptr++) = '0';
    return (buf_ptr);
}

