pthread_attr_setdetachstate(&pthread_attributes, PTHREAD_CREATE_DETACHED);
pthread_create(&thread_id, &pthread_attributes, establish_connection,
               (void *) establish_connection_arguments);

pthread_create(&thread_id, &pthread_attributes, establish_connection,
               (void *) establish_connection_arguments);
pthread_detach(thread_id);

pthread_create(&thread_id, &pthread_attributes, establish_connection,
               (void *) establish_connection_arguments);

void *establish_connection(void *arguments) {
    pthread_detach(pthread_self());
    return NULL;
}

