#ifndef TEST
 int x;
#endif

#ifdef TEST
localx++;
#else
mystruct.x++; //<-compiler complains on this line when compiling
#endif

-DTEST
mystruct
x
typdef struct {

#ifndef TEST
int x;
#endif
int y;
} coords;

#include "data.h" 
static coords coord1;
int localx;

int main( ) 
{ 
#ifdef TEST
  localx = 1;
#else
  coord1.x = 1;
#endif

  coord1.y = 2;
  printf("%i\n", coord1.x);
  printf("%i\n", coord1.y);
  printf("%i\n", localx);

  return 0; 
} 

cc myfile.c
cc myfile.c -DTEST
