typedef struct pstring {
  size_t length;
  char   string[];
} pstring;

pstring* s = malloc(sizeof(pstring) + len)
len
pstring
pstring* s = malloc(sizeof(pstring));
s->string;

malloc
s->string
