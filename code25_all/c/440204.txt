double d = floor(3.0 + 0.5);
int x = (int) d;
assert(x == 3);

