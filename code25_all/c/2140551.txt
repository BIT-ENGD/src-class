size = *(int *)data;        // size of string plus header word
off = (size + 3) & ~3;
chan = *(int *)(data + off);
data[size] = '\0';      // zero terminate

