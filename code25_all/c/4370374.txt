#include <string.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]){
    char linea[] = "send UDP 4500 50";
    char **resul=NULL;
    int numTokens,conta2;
    char *sep=" ";//character which divides the orders
    int conta=0;  //counter of the number of tokens found
    char *saveptr,*token;

    for(token=strtok_r(linea,sep,&saveptr); token!=NULL; token=strtok_r(NULL,sep,&saveptr)){
        printf("token: %s\n",token);
        printf("size: %i\n",(conta+1)*sizeof(char*));
        resul = (char **)realloc(resul,(conta+1)*sizeof(char*)); //Increase the size for the array of pointers

        resul[conta]= malloc(sizeof(char*)); //Reserve size for the pointer
        resul[conta]=token; //Asign word to the pointer
        conta++;
    }
    //Print the results
    for(conta2=0;conta2<conta;conta2++)
        printf("resul: \"%s\"\n",resul[conta2]);
    //free memory
    for(conta2=0;conta2<conta;conta2++){
        printf("liberando: %i\n",conta2);
        free(resul[conta2]);
    }
    free(resul);
    return(0);
}

$ ./lectura_consola 
token: send
size: 4
token: UDP
size: 8
token: 4500
size: 12
token: 50
size: 16
resul: "send"
resul: "UDP"
resul: "4500"
resul: "50"
liberando: 0
*** glibc detected *** ./lectura_consola: free(): invalid pointer: 0xbffb7f1b ***

liberando: 0
==8372== Invalid free() / delete / delete[]
==8372==    at 0x40257ED: free (vg_replace_malloc.c:366)
==8372==    by 0x80489FA: main (lectura_consola.c:92)
==8372==  Address 0xbee8e28b is on thread 1's stack

