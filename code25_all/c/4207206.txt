OR
#define _GNU_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct my_struct { 
  char *str;
};

int main () {
  struct my_struct *struc;

  int max = 5;
  char *tmp = "Hello World@Foo Bar In here@Bar Foo dot com@here@there";

  struc = malloc (20 * sizeof (struct my_struct));

  int strIdx = 0, offSet = 0;
  char *p = tmp;
  char *tmpChar = malloc (strlen (tmp) + 1), *save;
  save = tmpChar;

  while (*p != '\0') {
    if (offSet < max) {             
      offSet++;
      if (*p == '@') {
        if (offSet != 1) {
          *tmpChar = '\0';
          struc[strIdx++].str = strndup (save, max);
          save = tmpChar;
        }
        offSet = 0;
      } else
        *tmpChar++ = *p; 
    } else {                    // max
      offSet = 0;
      *tmpChar = '\0';
      struc[strIdx++].str = strndup (save, max);
      save = tmpChar;
      continue;
    }   
    p++;
  }
  struc[strIdx++].str = strndup (save, max);    // last 'save'

  for (strIdx = 0; strIdx < 11; strIdx++)
    printf ("%s\n", struc[strIdx].str);

  for (strIdx = 0; strIdx < 11; strIdx++)
    free (struc[strIdx].str);
  free (struc);
  return 0;
}

Hello
 Worl
d
Foo B
ar In
 here
Bar F
oo do
t com
here
there

