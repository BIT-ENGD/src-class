char *getFileExt(char *filename) {

    char ext[10];

    while (*filename) {
        filename++;
    }

    while (*filename != '.') {
        *(ext++) = *(--filename);               
    }   
    strrev(*ext);       
    return ext;     
}

EXC_BAD_ACCESS
while
filename
ext
