open
O_CREAT | O_WRONLY | O_TRUNC | O_NOFOLLOW
O_CREAT | O_WRONLY | O_APPEND | O_NOFOLLOW
O_NOFOLLOW
struct stat lst;
if (lstat(filename, &lst) != -1 && S_ISLNK(lst.st_mode)) {
    errno = ELOOP;
    return -1;
}

mode_t mode = S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH;
int fd = open(filename, O_CREAT | O_WRONLY | O_TRUNC | O_NOFOLLOW, mode);

touch
filename
lstat
chmod
filename
