4 5

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/stat.h>
#include <fcntl.h>

typedef struct prova {
    int first;
    int second;
} prova_t;

int main(void) {
    int fd;
prova_t origin;
prova_t result;
ssize_t bytes_read;
size_t nbytes;

fd = open("file.bin", O_WRONLY | O_CREAT);
origin.first = 24;
origin.second = 3;
write(fd, &origin, sizeof(prova_t));
close(fd);


fd = open("file.bin", O_RDONLY);
nbytes = sizeof(prova_t);
/* 1.BAD */
bytes_read = read(fd, &result, nbytes);
write(STDOUT_FILENO, &(result.first), sizeof(int));
write(STDOUT_FILENO, &(result.second), sizeof(int));
close(fd);

    /* 2.GOOD */
    nbytes = sizeof(int);
    bytes_read = read(fd, &(result.first), nbytes);
    write(STDOUT_FILENO, &(result.first), bytes_read);
    bytes_read = read(fd, &(result.second), nbytes);
    write(STDOUT_FILENO, &(result.second), bytes_read);

    return 0;
}

4 5
E�^�

