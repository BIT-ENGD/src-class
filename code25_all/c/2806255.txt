machine->max_cpus = machine->max_cpus ?: 1; /* Default to UP */

if (machine->max_cpus) {
   ; //do nothing
} else {
 machine->max_cpus = 1;
}

if (machine->max_cpus == 0) machine->max_cpus = 1;

