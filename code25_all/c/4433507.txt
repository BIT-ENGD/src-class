struct _MyStaticString {
    volatile MyString * txt;
    const char *chars;
};

struct _MyStaticString my_test_string = { NULL, "Hello world or foo bar, or a rick roll" };

struct _MyString *my_static_string(struct _MyStaticString *a_static) {
    printf("a_static=%lx\n", (gulong) a_static);
    printf("a_static.chars=%s\n", (char *) a_static->chars);
    if (a_static->txt == NULL) {
        CatString *result = g_object_new(MY_TYPE_STRING, NULL);
//      result->data = (gchar *) a_static->chars;
        result->data = strdup((char *)  a_static->chars);
        result->size = strlen((char *) a_static->chars);
        result->hash = 0;
        g_object_ref_sink(G_OBJECT(result));
    result->parent.ref_count = 1000;
    a_static->txt = result;
}
return (struct _MyString *) (a_static->txt);

__attribute__
const char helper_txt = "Hello world or foo bar, or a rick roll";
struct _MyStaticString my_test_string = { NULL, helper_txt };

error: initializer element is not constant
error: (near initialization for 'field.chars')

   C:\MinGW\bin\gcc.exe 
     -IC:\MinGW\include
     -IC:\GTK_ALL_IN_ONE\include\gtk-2.0
     -IC:\GTK_ALL_IN_ONE\lib\gtk-2.0\include
     -IC:\GTK_ALL_IN_ONE\include\atk-1.0
     -IC:\GTK_ALL_IN_ONE\include\cairo
     -IC:\GTK_ALL_IN_ONE\include\gdk-pixbuf-2.0
     -IC:\GTK_ALL_IN_ONE\include\pango-1.0
     -IC:\GTK_ALL_IN_ONE\include\glib-2.0
     -IC:\GTK_ALL_IN_ONE\lib\glib-2.0\include
     -IC:\GTK_ALL_IN_ONE\include
     -IC:\GTK_ALL_IN_ONE\include\freetype2
     -IC:\GTK_ALL_IN_ONE\include\libpng14
     -IC:\work\workspace\module-blah\src
     -O0 -g3 -Wall -c -fmessage-length=0 -mms-bitfields -DOSWINDOWS

C:\>c:\MinGW\bin\gcc.exe --version
gcc.exe (GCC) 4.5.0
Copyright (C) 2010 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

