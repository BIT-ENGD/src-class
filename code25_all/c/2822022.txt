myOperation
clock_gettime()
N
myOperation
M
myOperation
M
myOperation
M
M
M
#include <stdio.h>
#include <time.h>

#define MEASUREMENTS 1
#define OPERATIONS   1

typedef struct timespec TimeClock;

TimeClock diffTimeClock(TimeClock start, TimeClock end) {
    TimeClock aux;

    if((end.tv_nsec - start.tv_nsec) < 0) {
        aux.tv_sec = end.tv_sec - start.tv_sec - 1;
        aux.tv_nsec = 1E9 + end.tv_nsec - start.tv_nsec;
    } else {
        aux.tv_sec = end.tv_sec - start.tv_sec;
        aux.tv_nsec = end.tv_nsec - start.tv_nsec;
    }

    return aux;
}

int main(void) {
    TimeClock sTime, eTime, dTime;
    int i, j;

    for(i = 0; i < MEASUREMENTS; i++) {
        printf(" » MEASURE %02d\n", i+1);

        clock_gettime(CLOCK_REALTIME, &sTime);

        for(j = 0; j < OPERATIONS; j++) {
            myOperation();
        }

        clock_gettime(CLOCK_REALTIME, &eTime);

        dTime = diffTimeClock(sTime, eTime);

        printf("   - NSEC (TOTAL): %ld\n", dTime.tv_nsec);
        printf("   - NSEC (OP): %ld\n\n", dTime.tv_nsec / OPERATIONS);
    }

    return 0;
}

diffTimeClock
myOperation()
myOperation()
OPERATIONS = 1
 » MEASURE 01
   - NSEC (TOTAL): 27456580
   - NSEC (OP): 27456580

OPERATIONS = 100
 » MEASURE 01
   - NSEC (TOTAL): 218929736
   - NSEC (OP): 2189297

OPERATIONS = 1000
 » MEASURE 01
   - NSEC (TOTAL): 862834890
   - NSEC (OP): 862834

OPERATIONS = 10000
 » MEASURE 01
   - NSEC (TOTAL): 574133641
   - NSEC (OP): 57413

OPERATIONS
myOperation
;
clock_gettime()
OPERATIONS = 10000
