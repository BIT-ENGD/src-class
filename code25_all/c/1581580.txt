while( i < a_rows * a_cols ) {
    out[i] = *(a_mat + i);  // this line
    i++;
}

