# VERSION
use strict;
use warnings;
package My::Package;
# VERSION
...

use strict;
use warnings;
package My::Package;
our $VERSION = 0.1;# VERSION
...

# VERSION
#!/usr/bin/env perl
use 5.012;
use strict;
use warnings;

use PPI;

my $ppi = PPI::Document->new('test.pm');

my $comments = $ppi->find('PPI::Token::Comment');

my $version = PPI::Statement::Variable->new;

foreach ( @{$comments} ) {
    if ( /^\s*#\s+VERSION\b$/ ) {
        $_->replace($version);
    }
}

