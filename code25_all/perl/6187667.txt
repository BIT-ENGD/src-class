use Asterisk::AMI;
my $astman = Asterisk::AMI->new(PeerAddr        =>      '127.0.0.1', #Remote host address
                                PeerPort        =>      '5038',      #Remote host port
                                                                     #AMI is available on TCP port 5038 if you enable it in manager.conf. 
                                Username        =>      'admin',     #Username to access the AMI

                                Secret          =>      'supersecret' #Secret used to connect to AMI
                                );

die "Unable to connect to asterisk" unless ($astman);

my $action = $astman->({ Action => 'Command',
                         Command => 'sip show peers'
                       });

print $action;

