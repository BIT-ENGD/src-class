#!use/bin/perl
use strict;
use warnings;

my $find = 'information=filename';

opendir (DIR, "/home/test/test_these_files") || die "can't open directory";
my @files = grep(/.aa/, readdir(DIR));
print @files;
print "\n";
closedir(DIR);

foreach (@files) {
    my $replace = 'information=<@files>'; # want to replace with 'information=<filenames>
    #filenames are names of files present in the '/home/test/test_these_file' directory
    open (FILE, '/home/test/controlfile.txt') || die "cant open file \n";
    my @body = <FILE>;
    print @body;
    open (OUT, '>/home/test/controlfile.txt') || die "can't create file \n";
    foreach $_ (@body) {
        (s/$find/$replace/g);
        print OUT "$_";
    }
    'perl /home/test/controlfile.txt';
    close(FILE);
    close(OUT);
}
exit;

