sub permute
{
   my @array = @_;
   if (@array == 0)
   {
      return;
   }
   else
   {
      my $accum = "";
      my $result = permute_with_accumulator($accum, @array);
      return $result;
   }
}

sub permute_with_accumulator
{
   my ($accum, @array) = @_;
   if (@array == 1)
   {
      my $element = $array[0];
      $accum .= "$element,";
   }
   else
   {
      my $i;
      for ($i = 0; $i <= $#array; $i++)
      {
         $accum .= "$array[$i] ";
         my @new_array = ();
         if ($i == 0)
         {
            @new_array = @array[1..$#array];
         }
         elsif ($i == $#array)
         {
            @new_array = @array[0..$#array-1];
         }
         else
         {
            my $lower = $i - 1;
            my $upper = $i + 1;
            @new_array = @array[1..$lower, $upper..$#array];
         }
         permute_with_accumulator($accum, @new_array);
      }
   }
   return $accum;
}

my $perms = permute(@array);
print ("$perms\n");

e1 e2 e3 e4 e5

