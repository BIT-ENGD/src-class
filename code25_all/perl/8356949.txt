my $libXMLPattern = XML::LibXML::Pattern->new('widget');
my $element;

my $reader = XML::LibXML::Reader->new(string => $xml);
$reader->nextElement();

while ($reader->nextPatternMatch($libXMLPattern))
{
    next if ($reader->nodeType == XML_READER_TYPE_END_ELEMENT);
    $element = $reader->copyCurrentNode(1);
        last;
}
$reader->finish();


    my $xPathExp = '//component';
    my @nodes = $element->findnodes ($xPathExp);

<widget name="a" type="b">
<component type="C">
    <component type="ca"/>
    <component type="cb"/>
</component>
</widget>
<window>
...
</window>

