my $submit_image = $pict->Photo(-file => $submit);
    my $submit_button = $mw->Button(
    -image => $submit_image,
    -text => "Submit", 
    -background => "#cccccc",
    -command => sub {

        if ($pubId eq '') {
            $|;
    Log_message ("\n$DATE - $TIME - WARNING: Please complete all fields\t");
    tk_message ("Please enter a valid Publication ID");
}
else {  
    request_url(); #Open the xml url and read it in
    }
    $text->insert( 
                # put something to the _end_ of the text
                # which is in the widget
                'end', 
                sprintf(" $txtmesg\n")  
            );
            # Set window to the end of the text
            # I want to see the newest events immediately
            $text->see('end');  
        }) ->place( -x => 60, -y =>195);

-command => \&long_job)

MainLoop();

    sub long_job {
        if ($pubId eq '') {
            $|;
    Log_message ("\n$DATE - $TIME - WARNING: Please complete all fields\t");
    tk_message ("Please enter a valid Publication ID");
}
else {  
    DoOneEvent();
    request_url(); #Open the xml url and read it in
    }   
     }

