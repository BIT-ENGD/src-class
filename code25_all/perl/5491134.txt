Readonly my $CTRL_CHARS => qr{[|!?*]}xsm;

my ($dbix_object, $alias, $cardinality) = ($object =~ qr{
        ^                 # Start of the line
        ([^|*?!]*)        # Anything that isn't a relationship control character
                          #   i.e.    | (indicating an alias)
                          #           * (indicating many_to_many)
                          #           ? (indicating might_have)
                          #           ! (indicating has_one)
        \|?               # Possible |, indicating an alias follows
        ([^|!?*]*?)       # Possible alias (excludes all the control characters above)
        ([|!?*]?)$        # Possible control character
       }oxsm);

$CTRL_CHARS
[^$CTRL_CHARS]
[^(?msx-i:[|!?*])]
x-i
Readonly my $CTRL_CHARS     => qr{[|!?*]}xsm;
Readonly my $NON_CTRL_CHARS => qr{[^|!?*]}xsm;

$CTRL_CHARS
$NON_CTRL_CHARS
