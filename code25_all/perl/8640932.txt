package Search;

use Any::Moose;

has query    => qw{ is ro isa Str required 1 };

# my method modifiers
around 'query' => sub {
    my $orig = shift;
    my $self = shift;

    my $content = $self->$orig(@_);

    # simple filter
    $content =~ s{[^\w\-\s]}{}gi;

    return $content;
};

sub create_uri {
    my $self = shift;
    my $uri = "http://localhost/search/".$self->{query};
    return $uri;
};
1;

package main;
my $obj = Search->new({
    query  => 'foo@#$%#%#@&-**bar@@#%!',
});

print $obj->query."\n";

print $obj->create_uri."\n"; # BAD

print $search->query;

print $search->create_uri;

