use
use warnings;
use strict;
use 5.010;

{package insert;
    use Filter::Util::Call;
    BEGIN {$INC{'insert.pm'}++}
    sub import {
        my ($class, @data) = @_;
        filter_add sub {
            my $status = filter_read;
            if ($status) {
                $_ = "@data;$_";
                filter_del;
            }
            $status
        }
    }
}

my $x = 'init';
say $x;                             # init
use insert '$x = "hello"'; say $x;  # init (should be hello)
say $x;                             # hello

