date_default_timezone_set('America/New_York');

/*

min hr dom month dow cmd

hour in 24 hour format, no leading zeros


*/

$jobsQueue = Array();

$jobsQueue[] = Array('10', '0', '*', '*', '*', 'php c:\nightly_script.php');    // These items are order dependent, so run as one script that synchronously executes each command

while(1) {

    $now = time();
    $min = date('i',$now);
    $hr = date('G',$now);

    echo "$hr:$min\n";

    foreach($jobsQueue AS $job) {

        if($job[0] == $min && $job[1] == $hr) {
            system("$job[5]>NULL");
        }

    }

    sleep(60);
}
?>

// Process Hand Histories
system('perl myscript.pl');

?>

while ( ($key, $value) = each(%players) ) {
                print "$key => $value\n";
                if($value > 0)
                {
                    $uname = $key;
                    $uname =~ s/player(.*)(\s*)/$1/;

                    $connect = DBI->connect("DBI:mysql:database=$config_mysql_db;host=$config_mysql_server",$config_mysql_user,$config_mysql_pass,{'RaiseError' => 1});

                    print "\n*****\n$uname\n*****\n";

                    $updateStatement = "INSERT statement";
                    $executeStatement = $connect->prepare($updateStatement);
                    $executeStatement->execute();

                    $updateStatement = "UPDATE command";
                    $executeStatement = $connect->prepare($updateStatement);
                    $executeStatement->execute();

                    delete $players{$key};
                    # Clean up the record set and the database connection
                    $connect->disconnect(); 

                }
                elsif($value <= 0)
                {
                    delete $players{$key};
                }
            }

