Can't call method "value" on an undefined value at
@val = $delta->value();
sub calc_usage {

    my $date_from;
    my $date_to;
    my $delta = new Date::Manip::Delta;
    my $period = 0;
    my $i;
    my @val;

    for $i (0 .. $#DATE_HOLDER_USAGE) {
        $date_from = new Date::Manip::Date;
        $date_to = new Date::Manip::Date;

        $date_from->parse($DATE_HOLDER_USAGE[$i][0]);
        $date_to->parse($DATE_HOLDER_USAGE[$i][1]);

        $delta = $date_from->calc($date_to, "business");
        @val = $delta->value();

        my @year_from = $date_from->value();
        my @year_to = $date_to->value();

        if ($date_to->is_business_day()) {
            $period += $val[3]+1;
        } else {
            $period += $val[3]
        }
    }

    $YEARLY_ALLOC_HTML = $period;
}

@DATE_HOLDER_USAGE
use Date::Manip::Date;
use Date::Manip::Delta;
use Date::Manip;

