package moo;

use Moose;
use Moose::Util::TypeConstraints;

subtype Bar => as 'ArrayRef[Num]';

coerce 'Bar' =>
  from 'Num' => via { [ 10 ] }; # this doesn't seem to be getting called

has x => (
  is => 'rw',
  isa => 'Bar',
);

package main;

my $m1 = moo->new(x => [ 3 ]);  # works
my $m2 = moo->new(x => 5);      # doesn't work

