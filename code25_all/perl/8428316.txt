$fileage = (-M $filename) * 24 * 60;

use CGI;
[...]
my $cgi = new CGI;

[...]

$fileagetolerance = 5;
$filename = "message.txt";

$newmessage = .... read via http from other website ...; # this message changes most of the time every few minutes.

$fileage = (-M $filename) * 24 * 60; # have the file age in minutes
print "file age of ".$filename.": ".$fileage.", minimum value needed for special action: ".$fileagetolerance."<br>\n";


if ( open( FILE, "<", $filename ) ) {
  $lastmessage = <FILE>; 
  close (FILE);   
} else {
  print "Couldn't read last message. Exiting<br>\n";
  die;
}

if ($newmessage eq $lastmessage) {
  print "Last message is identical with new message. Exiting...<br>\n";
  die;
}

if ($fileage < $fileagetolerance) {
  print "Last message was not long enough ago. Exiting...<br>\n";
  die;
}

sendItOut($newmessage);

if ( open( FILEOUT, ">", $filename ) ) {
  print FILEOUT $newmessage;
  close (FILEOUT);   
  print "Done.<br>\n";
} else {
  print "Couldn't write last message.<br>\n";
}

