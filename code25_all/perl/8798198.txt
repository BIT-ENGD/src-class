MyDBI.pm
MyDBI/SQLite.pm
MyDBI/MySQL.pm

package MyDBI;
sub new {
    shift; # discard parent class
    my $database=shift || 'MySQL';
    eval {
      require "MyDBI/$database.pm";
    } or die "$database not found\n";

    my $self="MyDBI::$database"->new;
    bless($self,"MyDBI::$database");
    return $self;
}
sub insert { print "parent insert"; } # children will override it

package MyDBI::MySQL;
require MyDBI;
@ISA=qw(MyDBI);
use DBI;use DBD::mysql;
sub new { #...} # not special
sub insert { print "mysql insert"; }

use MyDBI;
my $dbi=MyDBI->new('SQLite');
$dbi->insert;

