#!/usr/bin/env perl
use warnings;
use 5.012;
use DateTime::Format::Builder;
use DateTime::Format::Builder::Parser::Regex;

my $parser = DateTime::Format::Builder->create_parser(
    regex  => qr/^(\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)$/,
    length => 13,
    params => [ qw( year month day hour minute second ) ],
    postprocess => \&_fix_year,
    extra => {time_zone => "Australia/Sydney" },
    constructor => ..., ###
);

sub _fix_year {
    my %args = @_;
    my ( $date, $p ) = @args{ qw( input parsed ) };
    $p->{year} += $p->{year} > 69 ? 1900 : 2000;
    return 1;
}

