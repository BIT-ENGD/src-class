my $err = undef;

while(1){
  if($err && ($err->code == 502)) {
    [...]
  }
  [...]
  eval {...}
  $err = $@;
}

Can't call method "code" on an undefined value at ./filename.pl line 74.
OP1 && OP2
if( (defined $err) && ($err->code == 502))
