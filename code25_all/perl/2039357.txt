my $line = get_line_from_file;
my @fields = split /\|/, $line;
my $record = My::Record->new;
$record->attr1($fields[0]);
...

my $line = get_line_from_file;
my %records;
@records{@field_names} = split /\|/, $line;

