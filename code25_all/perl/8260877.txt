#!/usr/bin/perl
use warnings;
use strict;
use XML::LibXML;
use Carp;
  use File::Find;
use File::Spec::Functions qw( canonpath );
use XML::LibXML::Reader;

my @ARGV ="c:/main/work";die "Need directories\n" unless @ARGV;
my $all="<DTCSpecification xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n";
  find(
       sub {
    return unless ( /(_tr\.xml)$/ and -f );
    extract_information();
    return;
    },
  @ARGV
  );
 my $elem;
 sub extract_information {
    my $path = $_;

  if ( my $reader = XML::LibXML::Reader->new( location => $path )) {

         while ( $reader->nextElement( 'university' )) {
                  $elem = $reader->readOuterXml();
         $all=$all.$elem;
        }
   }
    return;
    }
  my $so="</DTCSpecification>";
  $all= $all.$so;

  my $doc = XML::LibXML->load_xml( string=>$all);
  my %seen;
    foreach my $uni ( $doc->findnodes('//university') ) 

     my $name = $uni->find('Code');

    print "'$name' duplicated\n",
    $uni->unbindNode() if $seen{$name}++;  # Remove if seen before
     }
   $all = $all.$doc->toString;
    print $all;

