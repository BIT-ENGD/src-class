[id=0 @ 0] : IP address "3.3.3.3" corresponds to device "core". 
Thread 1 terminated abnormally: Not a CODE reference at ./dev_ithread.pl line 23.
[id=0 @ 1] : IP address "5.5.5.5" corresponds to device "border". 
Thread 2 terminated abnormally: Not a CODE reference at ./dev_ithread.pl line 23.

#!/usr/bin/perl

use strict ;
use warnings ;
use diagnostics ;
use threads ;
use Config ;

$Config{useithreads} || die("\n---> Please recompile Perl with \<ithreads\> included. \n") ;


# IP parameterization of network elements.
my %device_ip = ( 
            "core" => "3.3.3.3",
            "border" => "5.5.5.5",      
        ) ;

# Initialize devices' pool of threads.
my $index = 0 ;
my @device_thread = () ;
while( my ($key, $value) = each %device_ip )    
{ 
    push( @device_thread, threads->new(\&thread_job($key, $device_ip{$key}, $index))->join ) ;  $index = $index+1 ;
}

# Worker thread subroutine.
sub thread_job
{
    my ($device, $ip, $index) = @_ ;

    my $ithread = threads->tid() ;
    print "[id=$ithread @ $index] : IP address \"$ip\" corresponds to device \"$device\". \n" ;
}

