open( OUT, "| tar xvf - " ) || die "Failed: tar: $!";

open( IN, "gpg -d $file |" ) || die "Failed: gpg: $!";

while (<IN> ) {
  print OUT;
}

