#!perl -w
# spawnself.pl

if ($ARGV[0]) {
    my $name = ($ARGV[0]);
    system {"perl"} $name, $0;
} else {
    print "running as $^X, PID is $$\n";
    print "press Enter to quit...\n";
    my $trash = <>;
}

exec {'/bin/csh'} '-sh';
spawnself.pl aaa.exe
running as aaa.exe, PID is 1234
running as C:\path\to\my\perl.exe, PID is 1234
