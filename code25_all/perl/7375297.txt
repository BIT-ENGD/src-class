my $status = {};
share($status);
sub get_status {
    my($raid) = @_;
    return $status->{$raid}->{status} if exists $status->{$raid};
    return 1;
}
sub set_status {
    my($raid,$newstatus) = @_;
    my %t;
    $t{status} = $newstatus;
    $t{timestamp} = Time::HiRes::time;
    $status->{$raid} = \%t;
    #$status->{$raid} = {
        #status => $newstatus,
        #timestamp => Time::HiRes::time()
    #};
    #$status->{$raid}->{status}=$newstatus;
    #$status->{$raid}->{timestamp} = Time::HiRes::time;
    return 1;
}
set_status('680','1');
get_status('680');

Invalid value for shared scalar at ./hashtest line 19.
