my $s = "<a>test</a> <a>test</a>";
$s =~ s{ <a> .+? </a> $ }{WHAT}x;

print "$s\n";

WHAT

<a>test</a> WHAT

<a>
</a>$
$s =~ s{ <a> (?! .* <a> ) .* </a> }{WHAT}x;

<a>test</a> WHAT

<a>
[^<]+
