sub run {

    ...
    run_request();
    ...

}

sub run_request {

    ...
    $actions{$cgi->param('a')}->();
    ...

}

sub action_foo {

    foo_body()

}

sub foo_body {

    check_something()
        or handle_error(some description);

}

