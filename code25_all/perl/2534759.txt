   my $result = shift grep {$_->{name} eq 'foo'} @{$hash_ref->{list}};

Type of arg 1 to shift must be array (not grep iterator).
grep
grep
