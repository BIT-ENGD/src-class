use strict;
use File::Basename;
use DBI;
use Time::localtime;
use POSIX qw/uname/;

use vars qw/$dbh $scr $computer_name/;
$scr = basename($0, '');
$computer_name = (uname())[1];

 $dbh = DBI->connect('dbi:Oracle:testdb', 'test', 'test', 
                    {RaiseError => 0, PrintError => 0, AutoCommit => 0}) ||
       die "$scr: connect error on $computer_name [$DBI::errstr]";

my $out = get_val();
print "The date is $out\n";
$dbh->disconnect;

sub get_val
{
  my $sth = $dbh->prepare(q{
        SELECT sysdate 
        FROM   dual}) ||
      die "$scr: prepare error on $computer_name [$DBI::errstr]";
  $sth->execute;
  my $row = $sth->fetchrow_hashref;
  $sth->finish;
  return $row->{VALUE};
   }

