        foreach my $vm (@virtual_machines) {
        my $vmx_file = $ssh1->capture("cat $virtual_machines{$vm}{VMX}");
        my $disk_count = -1;
        my $port;
        while ($vmx_file =~ m/^(ide(?<PORT>[0-1])\:[0-1])\.fileName\s+=\s+"(?<DISK>[^"]+)["]/xmg) {
$port = "$+{port}";
            if ("$+{DISK}" =~ m/\/vmfs\/volumes\/.+?\/(?<ISO>.+?\.iso)/xm) {
                ++$disk_count;
                $virtual_disks{$vm}{"IDE$+{PORT}"}{"Disk$disk_count"} = "$+{ISO}";
            } else {
                ++$disk_count;
                $virtual_disks{$vm}{"IDE$+{PORT}"}{"Disk$disk_count"} = "$+{DISK}";
            }
        }
    }

