#!/usr/bin/perl
use threads;
main:
{
    if ($#ARGV == -1) { usage(); exit(1); }
    my $hostname = $ARGV[0];
    my $thrssh = threads ->create(\&ssh, $hostname);
    my $thrdns = threads ->create(\&dns, $hostname);
    my $thrping = threads ->create(\&ping, $hostname);
    my $thrsmtp = threads ->create(\&smtp, $hostname);
    my $thrproxy = threads ->create(\&proxy, $hostname);
}
sub ssh {
    threads->detach();
    my $hostname = @_;
    #print "SSH\n";
    #LAUNCH SSH SCRIPT
}
#OTHER SUBROUTINES...
sub proxy {
    threads->detach();
    my $hostname = @_;
    #print "PROXY\n";
    #LAUNCH PROXY SCRIPT
}

SSH
DNS
PING
Perl exited with active threads:
2 running and unjoined
0 finished and unjoined
0 running and detached

my $thrssh;
foreach $mynode ($nodeset->get_nodelist) {
    #...
    $thrssh = threads ->create(\&ssh, $port, $hostname);
    #...
}
$thssh->join();

