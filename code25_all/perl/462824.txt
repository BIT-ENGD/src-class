set_val
sub set_val
{
    local our ($key, $self, $parms, $arg) = @_;
    $self->{$key} = $arg;
    unless ($parms->path)
    {
        local our $srv_cfg = Apache2::Module::get_config($self, $parms->server);
        $srv_cfg->{$key} = $arg;
    }
}

PerlLoadModule MyModule::ServerConfig
MyCustomDirective 'hello'

BEGIN
{
    use Apache2::CmdParms ();
#   use Apache2::Directive ();
    use Apache2::Module ();
#   use Apache2::ServerUtil ();
#   use Apache2::RequestUtil ();

    use Data::Dump;
    warn ddx(Apache2::Module::get_config('MyModule::ServerConfig', Apache2::CmdParms->server));
#   warn ddx(Apache2::Directive->as_hash);
#   warn Apache2::ServerUtil->dir_config('MyCustomDirective);
#   warn Apache2::CmdParms->server->server_hostname();
}

CmdParms->server
Parent: child process exited with status 3221225477 -- Restarting
ServerUtil->server to get_config()
BEGIN
$ENV
BEGIN
Apache2::RequestUtil->request->per\_dir\_config()
get_config()
Global $r object is not available.
BEGIN
$ENV
