package Person;
use Moose;

has ['name', 'age'] => (is => 'ro');

package main;

use Data::Dump;
use KiokuDB;

my $dir = KiokuDB->connect("hash");

{
    my $scope   = $dir->new_scope;
    my $obj = Person->new(name => 'Joe', age => 34);

    my $data_id = $dir->store($obj);

    warn $data_id;   # 6702A424-6BF6-1014-B0F5-EC4CE5BB15D7

    my $got = $dir->lookup($data_id);
    dd $got;         # bless({ age => 34, name => "Joe" }, "Person")
}

