$sql="SELECT * FROM table WHERE name = ? ";
&checkDB( $sql , "bob" , "while"  );

sub checkDB(){

my $sth=$dbh->prepare($_[0]) or warn "$DBI::errstr";
$sth->execute( $_[1] ) or warn "$DBI::errstr";

print $_[2] . "\n"; # this works
    $_[2] ( my @rows= $sth -> fetchrow() ) { # this doesn't work
    blah, blah, blah
    }


}

