$dosyaa="LOG.txt";
$dosya_out="KESIK_SEKTORLER.txt";

open fp1, $dosyaa;
open fp2, ">$dosya_out" or die "Cannot find $dosya_out for read\n :$!";

print fp2 "              BSC         BCF              ALARM TÜRÜ         ZAMAN                                               SAHA                     ALARM\n";

$count=0;
$SEG_NUM2=0;
$BCVI4=0;
$BTS_ST=0;
$toplam="";
$toplam2="";
$toplam_p="";
$deneme=0;

foreach $line(<fp1>) {
    chomp($line);
    if (($line =~ /QUAL/)) {$SEG_NUM2=$line};
    if (($line =~ /ALARM/)) {$SEG_NUM3=$line};
    if (($line =~ /ALARM/) or ($line =~ /BCCH MISSING/)) {
        $BTS_ST=$line;
        if (($BTS_ST =~ /BCCH MISSING/) or ($BTS_ST =~ /ALARM/) or ($BTS_ST =~ /QUAL/))  {
            $deneme=$deneme+1
        }
    };
    if (($line =~ /BCCH MISSING/)) {
        if (($BTS_ST =~ /BCCH MISSING/) or ($BTS_ST =~ /ALARM/) or ($BTS_ST =~ /QUAL/))  {
            $BCVI4=$line,
            $toplam= "'".(substr $SEG_NUM2, 06,10)."',";
            if ($toplam ne $toplam_p) {
                $toplam2=$toplam2.$toplam;
            };
            #if ($toplam==$toplam_p) {$toplam2=$toplam2.",".$toplam};
            print fp2 "$SEG_NUM2 $SEG_NUM3 $BCVI4\n";
            $toplam_p=$toplam;
            $toplam=0,$SEG_NUM2=0,$BTS_ST=0,$BCVI4=0,$BCVI5=0,$count++;
        }
    };
}
$toplam2=substr $toplam2,0,-1;
print fp2 "           KESIK SAHA SAYISI...............$count\n";

       BCORK01      BCF-0021  BTS-0022    QUAL      2012-02-29  19:21:45.65

       BCORK02      BCF-0031  BTS-0022    QUAL      2012-02-29  19:13:45.65

       BCORK03      BCF-0041  BTS-0022    QUAL      2012-02-29  19:11:45.65

 BSC          BCF          DATE           TIME         SAHA        ALARM
BCORK01      BCF-0021    2012-02-29     19:11:45.65   CO11801  BCH MISSING   
BCORK01      BCF-0021    2012-02-29     19:11:45.65   CO11802  BCH MISSSING 
BCORK01      BCF-0021    2012-02-29     19:11:45.65   CO11802  BCH MISSSING .                                                     

