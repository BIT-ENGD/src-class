<library>
  <book>
    <title>Perl Best Practices</title>
    <author>Damian Conway</author>
    <isbn>0596001738</isbn>
    <pages>542</pages>
    <image src="http://www.oreilly.com/catalog/covers/perlbp.s.gif"
           width="145" height="190" />
  </book>
  <book>
    <title>Perl Cookbook, Second Edition</title>
    <author>Tom Christiansen</author>
    <author>Nathan Torkington</author>
    <isbn>0596003137</isbn>
    <pages>964</pages>
    <image src="http://www.oreilly.com/catalog/covers/perlckbk2.s.gif"
           width="145" height="190" />
  </book>
  <book>
    <title>Guitar for Dummies</title>
    <author>Mark Phillips</author>
    <author>John Chappell</author>
    <isbn>076455106X</isbn>
    <pages>392</pages>
    <image src="http://media.wiley.com/product_data/coverImage/6X/07645510/076455106X.jpg"
         width="100" height="125" />
  </book>
</library> 

#!/usr/bin/perl

use strict;
use warnings;
#use XML::Simple qw(:strict);

use XML::LibXML;
use XML::Dumper;

my $dump = new XML::Dumper;

my $perl = ' ';
my $xml  = $dump->pl2xml( $perl );

my $filename = 'library.xml';

my $isbn   = '0596001738';

my $parser = XML::LibXML->new();
my $doc    = $parser->parse_file($filename);

my $query  = "//book[isbn = '$isbn']/pages/text()";

my($node)  = $doc->findnodes($query);
$node->setData('99999');

$perl = $doc->toString;

$xml = $dump->pl2xml( $perl, "library.xml" ); 

print $doc->toString;

<perldata>
<scalar>&lt;xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&gt;
&lt;library&gt;
  &lt;book&gt;
    &lt;title&gt;Perl Best Practices&lt;/title&gt;
    &lt;author&gt;Damian Conway&lt;/author&gt;
    &lt;isbn&gt;0596001738&lt;/isbn&gt;
    &lt;pages&gt;99999&lt;/pages&gt;
    &lt;image src=&quot;http://www.oreilly.com/catalog/covers/perlbp.s.gif&quot; width=&quot;145&quot; height=&quot;190&quot;/&gt;
  &lt;/book&gt;
  &lt;book&gt;
    &lt;title&gt;Perl Cookbook, Second Edition&lt;/title&gt;
    &lt;author&gt;Tom Christiansen&lt;/author&gt;
    &lt;author&gt;Nathan Torkington&lt;/author&gt;
    &lt;isbn&gt;0596003137&lt;/isbn&gt;
    &lt;pages&gt;964&lt;/pages&gt;
    &lt;image src=&quot;http://www.oreilly.com/catalog/covers/perlckbk2.s.gif&quot; width=&quot;145&quot; height=&quot;190&quot;/&gt;
  &lt;/book&gt;
  &lt;book&gt;
    &lt;title&gt;Guitar for Dummies&lt;/title&gt;
    &lt;author&gt;Mark Phillips&lt;/author&gt;
    &lt;author&gt;John Chappell&lt;/author&gt;
    &lt;isbn&gt;076455106X&lt;/isbn&gt;
    &lt;pages&gt;392&lt;/pages&gt;
    &lt;image  src=&quot;http://media.wiley.com/product_data/coverImage/6X/07645510/076455106X.jpg&quot;  width=&quot;100&quot; height=&quot;125&quot;/&gt;
  &lt;/book&gt;
&lt;/library&gt;
  </scalar>
</perldata>

