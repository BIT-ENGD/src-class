foo/bar/barfoo
$ftp->Chdir("../..")
foo/bar/barfoo/../..
foo
File::Spec::canonpath
Cwd
use strict;
use warnings;

my $directory = "../foo/./bar/./bar/../foo/barbar/foo/barfoo/../../fubar/barfoo/..";

print "Directory = $directory\n";
$directory =~ s{(^|[^.])\.\/}{$1}g;
print "Directory = $directory\n";
while ($directory =~ s{[^/]+/\.\.(/|$)}{}) {
    print "Directory = $directory\n";
}
$directory =~ s{/$}{};
print "Directory = $directory\n";

