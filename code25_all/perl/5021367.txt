for i in {1..50}; 
do 
    sleep 0.1;
    echo -n $i;
done

echo
echo -n
$| = 1;

open CMD, "testing.sh 2>&1 |";
         while (<CMD>) {
                print "$_ \r";
        }
close CMD;

echo -n
echo
echo -ne "...\r"
[####..............................................] 6.20%
[####..............................................] 6.40%
[#####.............................................] 7.40%

$| = 1;

open CMD, "testing.sh 2>&1 |";

my ($buf, $data, $n);


while (($n = read CMD, $data, 60) != 0) {
  print $data;
}

close CMD; 

