perl
Can't call method "scaleY" on an undefined value at C:/strawberry/perl +/site/lib/ Image/Seek.pm line 137?

Can't call method "scaleY" on an undefined value at C:/strawberry/perl +/site/lib/ Image/Seek.pm line 137.

#!/usr/local/bin/perl 
use Imager;
use Image::Seek qw(loaddb add_image query_id savedb);

loaddb("haar.db");
my $img = Imager->new("photo-1.jpg")
or  die Imager->errstr;

# my $img = Imager->new();
# $img->open(file => "photo-1.jpg")or die Imager->errstr;

add_image($img, 1);
savedb("haar.db");

sub add_image_imager {
    my ($img, $id) = @_;
    my ($reds, $blues, $greens);
    require Imager;
    my $thumb = $img->scaleX(pixels => 128)->scaleY(pixels => 128);
    for my $y (0..127) {
        my @cols = $thumb->getscanline(y => $y);
        for (@cols) {
            my ($r, $g, $b) = $_->rgba;
            $reds .= chr($r); $blues .= chr($b); $greens .= chr($g);
        }
    }
    addImage($id, $reds, $greens, $blues); }

my $thumb = $img->scaleX(pixels => 128)->scaleY(pixels => 128);

->scaleY(pixels => 128)

my @cols = $thumb->getscanline(y => $y);

"This application has requested the Runtime to terminate it in an unusual way. Please contact the application's support team for more information."

