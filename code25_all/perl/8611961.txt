use switch;
use strict;
use warnings;
...other modules;
sub log{
}
..various sub routines
switch {$val1)
{
  log(..) #first invocation of log
  case ($val2)
...
}

{
  $val3  = POSIX::floor($val2/$val4)*$val4;
  $val5="/x/y/$logfilename";
}

