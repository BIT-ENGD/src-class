--Boundary-D4AFFBA9-AD92-4697-9184-7BDA128C3B97
Content-Disposition: form-data; name="fileContents"; filename="1234567/TestImage1.png"
Content-Type: image/png

--Boundary-D4AFFBA9-AD92-4697-9184-7BDA128C3B97
Content-Disposition: form-data; name="uploadButton"

Upload File
--Boundary-D4AFFBA9-AD92-4697-9184-7BDA128C3B97--

--Boundary-D4AFFBA9-AD92-4697-9184-7BDA128C3B97
Content-Disposition: form-data; name="Title"; title="Hello World"
Content-Type: text/plain
--Boundary-D4AFFBA9-AD92-4697-9184-7BDA128C3B97
Content-Disposition: form-data; name="fileContents"; filename="1234567/TestImage1.png"
Content-Type: image/png


--Boundary-D4AFFBA9-AD92-4697-9184-7BDA128C3B97
Content-Disposition: form-data; name="titleButton"
my Title

--Boundary-D4AFFBA9-AD92-4697-9184-7BDA128C3B97
Content-Disposition: form-data; name="uploadButton"

Upload File
--Boundary-D4AFFBA9-AD92-4697-9184-7BDA128C3B97--

#!/usr/bin/perl -wT
use strict;use CGI;
use CGI::Carp qw ( fatalsToBrowser );
use File::Basename;

my $upload_dir = "/Library/WebServer/Documents/upload";

my $query = new CGI;

my $title = $query->param("Title");

#if (!$title) {
#    die "the title is $title. $!";
#}

if ( !$filename ) {
        print $query->header ( );
        die "There was a problem uploading your photo (try a smaller file). : $!";
        exit;
}
...

open ( UPLOADFILE, ">$upload_dir/$filename" ) or die "$!";
while ( <$upload_filehandle> ) {
    print UPLOADFILE;
}

close UPLOADFILE;

if (!$title) {
    die "the title is $title. $!";
}

[Tue Sep 27 17:09:17 2011] [error] [client 10.0.1.2] [Tue Sep 27 17:09:17 2011] upload.cgi: Use of uninitialized value $title in print at /Library/WebServer/CGI-Executables/upload.cgi line 79.

NSString *title = @"Hello World";
bodySuffixStr = [NSString stringWithFormat:     // create the footer for the POST message
            @
            "\r\n"
            "--%@\r\n"
            "Content-Disposition: form-data; name=\"titleButton\"\r\n"
            "%@\r\n\r\n"
            "--%@\r\n"
            "Content-Disposition: form-data; name=\"uploadButton\"\r\n"
            "\r\n"
            "Upload File\r\n"
            "--%@--\r\n" 
            "\r\n",
            boundaryStr,
            title,
            boundaryStr, 
            boundaryStr
        ];

NSString *title = @"Hello World";
bodySuffixStr = [NSString stringWithFormat:     // create the footer for the POST message
            @
            "\r\n"
            "--%@\r\n"
            "Content-Disposition: form-data; name=\"titleButton\"\r\n"
            "\r\n%@\r\n"
            "--%@\r\n"
            "Content-Disposition: form-data; name=\"uploadButton\"\r\n"
            "\r\n"
            "Upload File\r\n"
            "--%@--\r\n" 
            "\r\n",
            boundaryStr,
            title,
            boundaryStr, 
            boundaryStr
        ];

