#!/Applications/XAMPP/xamppfiles/bin/perl

use AnyEvent::Twitter::Stream;
    my $done = AnyEvent->condvar;

BEGIN {
    use Exporter;
    our @ISA = qw(Exporter);
    our @EXPORT = qw{
       &init
    };
}

sub print_tweet {
  my $tweet = shift;
  print $tweet;   
}


  # receive updates from @following_ids
  my $listener = AnyEvent::Twitter::Stream->new(
      username => XXXXXX
      password => XXXXXX
      method   => 'sample',  # "firehose" for everything, "sample" for sample timeline
      decode_json => 1,
      on_tweet => sub {
          my $tweet = shift;
          print_tweet($tweet);
      },
      on_keepalive => sub {
          warn "ping\n";
      },
      on_delete => sub {
          my ($tweet_id, $user_id) = @_; # callback executed when twitter send a delete notification
      },
      timeout => 45,
  );

$done->recv;

HASH(0x8f0ad0)HASH(0x8f0640)HASH(0x875990)HASH(0x8f0ab0)HASH(0x8e0d80)HASH(0x8f06e0)HASH(0x8f08f0)HASH(0x93ef30)HASH(0x876190)HASH(0x93ee60)HASH(0x8f0610)HASH(0x8f0b00)HASH(0x8e13e0)HASH(0x93ee20)HASH(0x8f0a20)HASH(0x8e1970)HASH(0x8f0900)

sub print_tweet {
  my ($jsonref, $tweet) = @_;
  my $tweet = shift;
  print %tweet;
}

  on_tweet => sub {
      my $tweet = shift;
      warn "$tweet->{user}{screen_name}: $tweet->{text}\n";
  },

I was able to ALMOST get it by changing print_tweet to the following:

sub print_tweet {
  my $tweet = shift;
  my $json_output = to_json($tweet);
  print $json_output;
}

