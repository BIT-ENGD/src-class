class Item  
{  
    public virtual int Id {get;set;}  
    public virtual List`<Item`> Parents {get;set;}  
    public virtual List`<Item`> Children {get;set;}  
}  

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
  assembly="Pl.Components" namespace="Pl.Components"`>  
    <class name="Pl.Components.Item, Pl.Components" table="Item">  
        <id name="Id" type="Int32"  column="Id" >  
            <generator class="identity" />  
        </id>  
        <bag name="Parents" lazy="true" table="Hierarchy" cascade="save-update">  
            <key column="ChildId"/>  
            <many-to-many class="Item" column="ParentId" />  
        </bag>  
        <bag name="Children" lazy="true" table="Hierarchy" cascade="delete">  
            <key column="ParentId"/>  
            <many-to-many class="Item" column="ChildId"/>  
        </bag`>  
    </class>  
</hibernate-mapping>  

