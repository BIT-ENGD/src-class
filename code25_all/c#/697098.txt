    ISessionFactory factory =
new NHibernate.Cfg.Configuration().Configure().BuildSessionFactory();

            using (ISession session = factory.OpenSession())
            {

                ICriteria sc = session.CreateCriteria(typeof(Site));
                siteList = sc.List();
                session.Close();
            }
            factory.Close();

        using (var factory= new NHibernate.Cfg.Configuration().Configure().BuildSessionFactory())
        {
            var session = factory.OpenSession();
            ICriteria sc = session.CreateCriteria(typeof(Site));
            siteList = sc.List();

        }

