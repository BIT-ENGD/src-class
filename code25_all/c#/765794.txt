template <class type>
type Read()
{
    type t;
    int s = sizeof(type);
    if(index + s > size)
        throw(std::exception("error 101"));
    memcpy(&t, stream + index, s);
    index += s;
    return t;
}   

BYTE mode = Read<BYTE>();
DWORD mode1 = Read<DWORD>();
WORD mode2 = Read<WORD>();

