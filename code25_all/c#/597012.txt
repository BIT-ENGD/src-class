delegate void Foo();
public static void Main()
{
  Foo foo = null;
  object guard = new object();
  int x = 1;
  lock (guard)
  {
    foo = () =>
    {
      int temp;
      lock (guard) temp = x;
      Console.WriteLine(temp);
    };
  }
  Thread t = new Thread(() => foo());
  t.Start();
  t.Join();
}

