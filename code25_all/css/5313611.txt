from django.db import models
from django.forms import CheckboxSelectMultiple

import tempfile

from django.conf import settings

from django.core.files.base import ContentFile
from django.core.files.storage import default_storage as s3_storage
from django.core.cache import cache

from datetime import datetime

import Image, os
import PIL.Image as PIL
import re, os, sys, urlparse

def createDynamicCSS():
    #create then save a css file here
    #probably best to 'navigation/nav.css'

    #loop through all entries and create class for all of them
    navs = PrimaryNav.all()

    cssfile = ""
    for n in navs:
        string = "." + n.slug + " { ... }"
        cssfile += string

    #save cssfile to s3



class PrimaryNav(models.Model):
    title = models.CharField(max_length=200)
    slug = models.SlugField(max_length=200)

    active = models.BooleanField()

   #saves to s3 (s3 address + /icon/ )
   icon = models.ImageField(upload_to='icons')

    def save(self):
        super(PrimaryNav, self).save() # Call the "real" save() method
        createDynamicCSS()

...

