
    $("a:not('.noajax')").live("click", function(e){
        e.preventDefault();

        //Load new page
        var link = $(this).attr("href");
        loadpage( link );
    });

    function loadpage(href) {

        //Keep fixed the main container
        var old_height = $(".outermain").innerHeight();
        $("#main").css({"height":(old_height)});

        //Fade out the interior
        $(".outermain").fadeOut(100, function(){
            //Prepare interior to calculate new height
            $(".outermain").css({"display": "block", "visibility": "hidden"});

            //Load new page
            $(".outermain").load(href + " .innermain", function(){

                var new_height = $(".outermain").innerHeight();
                var rolloutspeed = 700 - (new_height / 30);

                rolloutspeed = 600;

                $("#main").animate({"height":new_height}, rolloutspeed , "easeOutBack", function(){
                    $(".outermain").css({"visibility": "visible", "display":"none"}).fadeIn(function(){
                        $("body").removeClass("ajaxblocked");
                    });
                });
            });
        });
    }

<section id="main">
    <div class="outermain">
        <div class="innermain clearfix">

            ...

        </div>
    </div>
</section>

