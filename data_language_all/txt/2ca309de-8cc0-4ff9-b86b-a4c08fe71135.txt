个人快速搭建serverless快速指南（建设中，目前只记录一些操作）
https://multipass.run/#install

针对ubuntu18.04版本安装
sh
sudo apt-get update
sudo apt-get install snapd -y
microk8s
sh
sudo snap install --classic microk8s
sudo snap alias microk8s.kubectl kubectl
k8s.gcr.io被墙问题后续还有knative的gcr.io被墙问题，这里就别想了，加了sha，要挪过来实在太麻烦
/var/snap/microk8s/current/args/文件夹所有toml后缀的文件的k8s.gcr.io替换为mirrorgooglecontainers，然后重启containerd.service
sudo sed -i 's/k8s.gcr.io/mirrorgooglecontainers/g' sudo grep -rl  --include="*.yaml" --include="*.toml"  "k8s.gcr.io"  /var/snap/microk8s/current/args/
sudo microk8s.reset # 这里可以多重置几次直到提示服务重启完成
:%s/k8s.gcr.io/mirrorgooglecontainers/g
 sudo systemctl restart snap.microk8s.daemon-containerd.service 
sudo microk8s.restart
安装个dashboard方便可视化看数据

打开链接选择token登陆，使用上面显示的token
https://{你的IP}:16443/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/
查看是否安装成功
sh
sudo microk8s.kubectl get nodes
sudo microk8s.kubectl get services
安装Knative
sh
echo 'N;' | sudo microk8s.enable knative
查看是否安装完成
sh
sudo kubectl get pods -n knative-serving
sudo kubectl get pods -n knative-eventing
sudo kubectl get pods -n knative-monitoring
// 开启rbac强行给匿名用户赋权超级管理员
  sudo kubectl create clusterrolebinding anonymous-cluster-admin \
  --clusterrole=cluster-admin \
  --group=system:anonymous
sudo kubectl create clusterrolebinding unauthenticated-cluster-admin \
  --clusterrole=cluster-admin \
  --group=system:unauthenticated
sudo kubectl delete clusterrolebinding anonymous-cluster-admin unauthenticated-cluster-admin