OnlineChatSdk-Swift




Добавление в проект
ruby
pod 'OnlineChatSdk'
Получение id
Перейдите в раздел «Online чат - Ваш сайт - Настройки - Установка» и скопируйте значение переменной id.

Пример использования
Добавьте свой ViewController с суперклассом ChatController. 

События

operatorSendMessage - оператор отправил сообщение посетителю.
clientSendMessage - посетитель отправил сообщение оператору.
clientMakeSubscribe - посетитель заполнил форму.
contactsUpdated - посетитель обновил информацию о себе.
sendRate - посетитель отправил новый отзыв.
clientId - уникальный идентификатор посетителя.

Для каждого события есть персональный обработчик.

Методы

setClientInfo - изменение информации о посетителе.
setTarget - пометить посетителя целевым.
openReviewsTab - отобразить форму для отзыва.
openTab - отобразить необходимую вкладку.
sendMessage - отправка сообщения от имени клиента.
receiveMessage - отправка сообщения от имени оператора.
setOperator - выбор любого оператора.
getContacts - получение контактных данных.


Подробное описание методов можно прочесть в разделе «Интеграция и API - Javascript API».
Получение token
Перейдите в раздел «Интеграция и API - REST API», скопируйте существующий token или добавьте новый.

Получение новых сообщений от оператора
Для получения новых сообщений, в ChatController есть два статичных метода getUnreadedMessages и getNewMessages.
getUnreadedMessages - возвращает все непрочитанные сообщения.
getNewMessages работает аналогичным образом, но при повторном запросе предыдущие сообщения уже не возвращаются. 
Перед использование методов, нужно указать apiToken.
swift
ChatController.getUnreadedMessages { data in }
ChatController.getNewMessages { data in }
Формат data аналогичен ответу метода /chat/message/getList в Rest Api.
Подробное описание можно прочесть в разделе «Интеграция и API - REST API - Инструкции по подключению».

License
OnlineChatSdk is available under the MIT license. See the LICENSE file for more info.