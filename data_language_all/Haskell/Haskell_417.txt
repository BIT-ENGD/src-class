-- !!! Simple test of dupChan
-- Embarassingly, the published version fails!

module Main where

import Control.Exception
import Control.Concurrent.Chan

main = do
	  chan <- newChan
	  ch <- dupChan chan
	  writeChan chan "done"
	  x <- readChan chan
	  y <- readChan ch
	  print ("Got "++x ++" "++y) 
 
-- test for blocking putMVar

import Control.Concurrent

main = do
  m <- newMVar ()
  forkIO (threadDelay 100000 >> takeMVar m)
  putMVar m ()  
