-- test tryPutMVar

import Control.Concurrent

main = do
  m <- newMVar ()
  r <- tryPutMVar m ()
  print r
  takeMVar m
  r <- tryPutMVar m ()
  print r
{-# LANGUAGE CPP #-}
module Main where

import Control.Exception
import Control.Concurrent
#if __GLASGOW_HASKELL__ < 705
import Prelude hiding (catch)
#endif

-- the BlockOnDeadMVar exception doesn't cause any output by default

main = do
  forkIO (do m <- newEmptyMVar; takeMVar m)
  print (sum [1..10000])
