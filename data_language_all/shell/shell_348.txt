#!/bin/bash
set -e -f -o pipefail
source "/usr/local/etc/babun.instance"
source "$babun_tools/script.sh"
source "$babun_tools/git.sh"

src="$babun/home/core"
dest="$homedir"

if [ ! -f "$dest/.babunrc" ]; then
	/bin/cp -rf "$src/.babunrc" "$dest/.babunrc"
	branch=$( git --git-dir="$babun/source/.git" --work-tree="$babun/source" rev-parse --abbrev-ref HEAD )
	if ! [[ "release" == "$branch" ]]; then
		echo "" >> "$dest/.babunrc"
		echo "export BABUN_BRANCH=$branch" >> "$dest/.babunrc"
	fi
fi

#!/bin/bash

cite 'about-alias'
about-alias 'Curl aliases for convenience.'

# set apt aliases
function _set_pkg_aliases()
{
	if [ -x $(which curl) ]; then
		# follow redirects
                alias cl='curl -L'
                # follow redirects, download as original name
                alias clo='curl -L -O'
                # follow redirects, download as original name, continue
                alias cloc='curl -L -C - -O'
                # follow redirects, download as original name, continue, retry 5 times
                alias clocr='curl -L -C - -O --retry 5'
                # follow redirects, fetch banner
                alias clb='curl -L -I'
		# see only response headers from a get request
		alias clhead='curl -D - -so /dev/null'
	fi
}

_set_pkg_aliases
cite 'about-alias'
about-alias 'emacs editor'

case $OSTYPE in
  linux*)
    alias em='emacs'
    alias en='emacs -nw'
    alias e='emacsclient -n'
    alias et='emacsclient -t'
    alias ed='emacs --daemon'
    alias E='SUDO_EDITOR=emacsclient sudo -e'
    ;;
  darwin*)
    alias em='open -a emacs'
    ;;
esac
