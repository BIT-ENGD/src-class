#!/bin/sh

\. ../../../nvm.sh
\. ../../common.sh

die () { echo "$@" ; exit 1; }

make_fake_node v0.2.3
make_fake_node v0.3.3

EXPECTED_STABLE="$(nvm_print_implicit_alias local stable)"
STABLE_VERSION="$(nvm_version "$EXPECTED_STABLE")"

EXPECTED_UNSTABLE="$(nvm_print_implicit_alias local unstable)"
UNSTABLE_VERSION="$(nvm_version "$EXPECTED_UNSTABLE")"

nvm ls stable | \grep "$STABLE_VERSION" >/dev/null \
  || die "expected 'nvm ls stable' to give $STABLE_VERSION, got $(nvm ls stable)"

nvm ls unstable | \grep "$UNSTABLE_VERSION" >/dev/null \
  || die "expected 'nvm ls unstable' to give $UNSTABLE_VERSION, got $(nvm ls unstable)"

make_fake_node v0.1.4
nvm alias stable 0.1

nvm ls stable | \grep -v "$STABLE_VERSION" >/dev/null \
  || die "'nvm ls stable' contained $STABLE_VERSION instead of v0.1.4"
nvm ls stable | \grep v0.1.4 >/dev/null \
  || die "'nvm ls stable' did not contain v0.1.4"
#!/bin/sh

\. ../../../nvm.sh
\. ../../common.sh

make_fake_node v0.0.2
make_fake_node v0.0.20
make_fake_node v0.12.0

die () { echo "$@" ; exit 1; }

# The result should contain only the appropriate version numbers.

nvm which 0.0.2 || die "v0.0.2 not found"
NVM_BIN="$(nvm which 0.0.2)"
[ "_$NVM_BIN" = "_$(nvm_version_path v0.0.2)/bin/node" ] \
  || die "'nvm which 0.0.2' did not contain the correct path: got '$NVM_BIN'"

nvm which 0.0.20 || die "v0.0.20 not found"
NVM_BIN="$(nvm which 0.0.20)"
[ "_$NVM_BIN" = "_$(nvm_version_path v0.0.20)/bin/node" ] \
  || die "'nvm which 0.20.0' did not contain the correct path: got '$NVM_BIN'"

nvm which 0.12.0 || die "v0.0.20 not found"
NVM_BIN="$(nvm which 0.12.0)"
[ "_$NVM_BIN" = "_$(nvm_version_path v0.12.0)/bin/node" ] \
  || die "'nvm which 0.12.0' did not contain the correct path: got '$NVM_BIN'"
#!/bin/sh

\. ../../../nvm.sh
\. ../../common.sh

make_fake_node v0.0.2
make_fake_node v0.0.20
make_fake_node v0.12.0

die () { echo "$@" ; exit 1; }

# The result should contain only the appropriate version numbers.

nvm which 0.0.2 || die "v0.0.2 not found"
NVM_BIN="$(nvm which 0.0.2)"
[ "_$NVM_BIN" = "_$(nvm_version_path v0.0.2)/bin/node" ] \
  || die "'nvm which 0.0.2' did not contain the correct path: got '$NVM_BIN'"

nvm which 0.0.20 || die "v0.0.20 not found"
NVM_BIN="$(nvm which 0.0.20)"
[ "_$NVM_BIN" = "_$(nvm_version_path v0.0.20)/bin/node" ] \
  || die "'nvm which 0.20.0' did not contain the correct path: got '$NVM_BIN'"

nvm which 0.12.0 || die "v0.0.20 not found"
NVM_BIN="$(nvm which 0.12.0)"
[ "_$NVM_BIN" = "_$(nvm_version_path v0.12.0)/bin/node" ] \
  || die "'nvm which 0.12.0' did not contain the correct path: got '$NVM_BIN'"
