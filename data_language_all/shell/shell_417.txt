#!/usr/bin/env bash
set -Eeuo pipefail

cd "$(dirname "$(readlink -f "$BASH_SOURCE")")"

files=( * )

p() {
	cut -d= -f1 "$1" \
		| sed 's!^-!!' \
		| sort -u
}

for (( i = 0; i < ${#files[@]}; ++i )); do
	for (( j = i + 1; j < ${#files[@]}; ++j )); do
		f1="${files[$i]}"
		f2="${files[$j]}"
		comm -12 <(p "$f1") <(p "$f2")
	done
done
#!/bin/sh

usage() {
	cat <<-'EOF'
		Usage: shutdown [-rh] time
		        -r: reboot after shutdown.
		        -h: halt after shutdown.
		  ** the "time" argument is mandatory! (try "now") **
	EOF
}

case "$1" in
	-r) CMD='reboot' ;;
	-h) CMD='poweroff' ;;
	*) usage >&2; exit 1 ;;
esac

shift

case "$1" in
	now|+0) ;;
	+[0-9]*) CMD="$CMD -d $(( $1 * 60))" ;;
	*) usage >&2; exit 1 ;;
esac

exec $CMD
