#!/usr/bin/env bash
# Summary: List all available pyenv commands
# Usage: pyenv commands [--sh|--no-sh]

set -e
[ -n "$PYENV_DEBUG" ] && set -x

# Provide pyenv completions
if [ "$1" = "--complete" ]; then
  echo --sh
  echo --no-sh
  exit
fi

if [ "$1" = "--sh" ]; then
  sh=1
  shift
elif [ "$1" = "--no-sh" ]; then
  nosh=1
  shift
fi

IFS=: paths=($PATH)

shopt -s nullglob

{ for path in "${paths[@]}"; do
    for command in "${path}/pyenv-"*; do
      command="${command##*pyenv-}"
      if [ -n "$sh" ]; then
        if [ "${command:0:3}" = "sh-" ]; then
          echo "${command##sh-}"
        fi
      elif [ -n "$nosh" ]; then
        if [ "${command:0:3}" != "sh-" ]; then
          echo "${command##sh-}"
        fi
      else
        echo "${command##sh-}"
      fi
    done
  done
} | sort | uniq
#!/bin/bash

# Set errexit option to exit immediately on any non-zero status return.
set -e

# check_ansible checks that Ansible is installed on the local system
# and that it is a supported version.
function check_ansible() {
  local REQUIRED_ANSIBLE_VERSION="2.5.2"

  if ! command -v ansible > /dev/null 2>&1; then
    echo "
Streisand requires Ansible and it is not installed.
Please see the README Installation section on Prerequisites"
    exit 1
  fi

  if [[ $(ansible --version | grep -oe '2\(.[0-9]\)*') < $REQUIRED_ANSIBLE_VERSION ]]; then
      echo "
Streisand requires Ansible version $REQUIRED_ANSIBLE_VERSION or higher.
This system has Ansible $(ansible --version)."
      exit 1
  fi
}
#!/bin/bash

# Set errexit option to exit immediately on any non-zero status return.
set -e

# check_ansible checks that Ansible is installed on the local system
# and that it is a supported version.
function check_ansible() {
  local REQUIRED_ANSIBLE_VERSION="2.5.2"

  if ! command -v ansible > /dev/null 2>&1; then
    echo "
Streisand requires Ansible and it is not installed.
Please see the README Installation section on Prerequisites"
    exit 1
  fi

  if [[ $(ansible --version | grep -oe '2\(.[0-9]\)*') < $REQUIRED_ANSIBLE_VERSION ]]; then
      echo "
Streisand requires Ansible version $REQUIRED_ANSIBLE_VERSION or higher.
This system has Ansible $(ansible --version)."
      exit 1
  fi
}
