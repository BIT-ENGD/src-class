#!/bin/bash
set -e -f -o pipefail
source "/usr/local/etc/babun.instance"

source "$babun_tools/script.sh"
source "$babun_tools/plugins.sh"

# prepare the environment
mkdir -p "$babun/home"
mkdir -p "$babun/external"
mkdir -p "$babun/installed"

# fix the symlinks if necessary
bash "$babun_tools/fix_symlinks.sh"

# install plugins
plugin_install "dist"
plugin_install "core"
plugin_install "cygfix"
plugin_install "shell"
plugin_install "pact"
plugin_install "cacert"
plugin_install "oh-my-zsh"
plugin_install "git"
plugin_install "cygdrive"
plugin_install "ack"
cite 'about-alias'
about-alias 'common svn abbreviations'

# Aliases
alias svs='svn status'
alias sa='svn add'
alias sci='svn ci -m'
alias sco='svn co'
alias sup='svn up'
alias scu='svn cleanup'
alias sli='svn list'
alias sdel='svn delete'
alias sdif='svn diff'
alias slog='svn log'
alias smv='svn move'
cite 'about-alias'
about-alias 'systemd service'

case $OSTYPE in
    linux*)
	alias sc='systemctl'
	alias scr='systemctl daemon-reload'
	alias scu='systemctl --user'
	alias scur='systemctl --user daemon-reload'
	alias sce='systemctl stop'
	alias scue='systemctl --user stop'
	alias scs='systemctl start'
	alias scus='systemctl --user start'
    ;;
esac
